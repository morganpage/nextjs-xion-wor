!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).sequence={})}(this,(function(t){"use strict";const e={erc1271:Object.freeze({__proto__:null,abi:[{type:"function",name:"isValidSignature",constant:!0,inputs:[{type:"bytes32"},{type:"bytes"}],outputs:[{type:"bytes4"}],payable:!1,stateMutability:"view"}],returns:{isValidSignatureBytes32:"0x1626ba7e"}}),factory:Object.freeze({__proto__:null,abi:[{type:"function",name:"deploy",constant:!1,inputs:[{type:"address"},{type:"bytes32"}],outputs:[],payable:!0,stateMutability:"payable"}]}),mainModule:Object.freeze({__proto__:null,abi:[{type:"function",name:"nonce",constant:!0,inputs:[],outputs:[{type:"uint256"}],payable:!1,stateMutability:"view"},{type:"function",name:"readNonce",constant:!0,inputs:[{type:"uint256"}],outputs:[{type:"uint256"}],payable:!1,stateMutability:"view"},{type:"function",name:"updateImplementation",constant:!1,inputs:[{type:"address"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"selfExecute",constant:!1,inputs:[{components:[{type:"bool",name:"delegateCall"},{type:"bool",name:"revertOnError"},{type:"uint256",name:"gasLimit"},{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"data"}],type:"tuple[]"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"execute",constant:!1,inputs:[{components:[{type:"bool",name:"delegateCall"},{type:"bool",name:"revertOnError"},{type:"uint256",name:"gasLimit"},{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"data"}],type:"tuple[]"},{type:"uint256"},{type:"bytes"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"createContract",inputs:[{type:"bytes"}],payable:!0,stateMutability:"payable"}]}),mainModuleUpgradable:Object.freeze({__proto__:null,abi:[{type:"function",name:"updateImageHash",constant:!0,inputs:[{type:"bytes32"}],outputs:[],payable:!1,stateMutability:"view"},{type:"function",name:"imageHash",constant:!0,inputs:[],outputs:[{type:"bytes32"}],payable:!1,stateMutability:"view"}]}),sequenceUtils:Object.freeze({__proto__:null,abi:[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_mainModule",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_wallet",type:"address"},{indexed:!0,internalType:"bytes32",name:"_imageHash",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_threshold",type:"uint256"},{indexed:!1,internalType:"bytes",name:"_signers",type:"bytes"}],name:"RequiredConfig",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_wallet",type:"address"},{indexed:!0,internalType:"address",name:"_signer",type:"address"}],name:"RequiredSigner",type:"event"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callBalanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_i",type:"uint256"}],name:"callBlockhash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"callChainId",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callCode",outputs:[{internalType:"bytes",name:"code",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callCodeHash",outputs:[{internalType:"bytes32",name:"codeHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callCodeSize",outputs:[{internalType:"uint256",name:"size",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callCoinbase",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"callDifficulty",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callGasLeft",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callGasLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callGasPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callOrigin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"callTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"knownImageHashes",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"lastImageHashUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastSignerUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastWalletUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bool",name:"delegateCall",type:"bool"},{internalType:"bool",name:"revertOnError",type:"bool"},{internalType:"uint256",name:"gasLimit",type:"uint256"},{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct IModuleCalls.Transaction[]",name:"_txs",type:"tuple[]"}],name:"multiCall",outputs:[{internalType:"bool[]",name:"_successes",type:"bool[]"},{internalType:"bytes[]",name:"_results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"uint256",name:"_threshold",type:"uint256"},{components:[{internalType:"uint256",name:"weight",type:"uint256"},{internalType:"address",name:"signer",type:"address"}],internalType:"struct RequireUtils.Member[]",name:"_members",type:"tuple[]"},{internalType:"bool",name:"_index",type:"bool"}],name:"publishConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"uint256",name:"_sizeMembers",type:"uint256"},{internalType:"bytes",name:"_signature",type:"bytes"},{internalType:"bool",name:"_index",type:"bool"}],name:"publishInitialSigners",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"uint256",name:"_nonce",type:"uint256"}],name:"requireMinNonce",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_expiration",type:"uint256"}],name:"requireNonExpired",outputs:[],stateMutability:"view",type:"function"}]}),requireFreshSigner:Object.freeze({__proto__:null,abi:[{inputs:[{internalType:"address",name:"",type:"address"}],name:"requireFreshSigner",outputs:[],stateMutability:"nonpayable",type:"function"}]})};var r=Object.freeze({__proto__:null,walletContracts:e});function n(){return n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n.apply(this,arguments)}let i,s,o;!function(t){t.UNKNOWN="UNKNOWN",t.RUNNING_CHECKS="RUNNING_CHECKS",t.PROCESSING="PROCESSING",t.FAILED="FAILED",t.COMPLETE="COMPLETE"}(i||(i={})),function(t){t.UNKNOWN="UNKNOWN",t.SUCCESSFUL="SUCCESSFUL",t.FAILED="FAILED"}(s||(s={})),function(t){t.DESC="DESC",t.ASC="ASC"}(o||(o={}));class a{constructor(t,e){this.hostname=void 0,this.fetch=void 0,this.path="/rpc/API/",this.ping=t=>this.fetch(this.url("Ping"),l({},t)).then((t=>h(t).then((t=>({status:t.status}))))),this.version=t=>this.fetch(this.url("Version"),l({},t)).then((t=>h(t).then((t=>({version:t.version}))))),this.runtimeStatus=t=>this.fetch(this.url("RuntimeStatus"),l({},t)).then((t=>h(t).then((t=>({status:t.status}))))),this.getSequenceContext=t=>this.fetch(this.url("GetSequenceContext"),l({},t)).then((t=>h(t).then((t=>({data:t.data}))))),this.getAuthToken=(t,e)=>this.fetch(this.url("GetAuthToken"),l(t,e)).then((t=>h(t).then((t=>({status:t.status,jwtToken:t.jwtToken,address:t.address,user:t.user}))))),this.sendPasswordlessLink=(t,e)=>this.fetch(this.url("SendPasswordlessLink"),l(t,e)).then((t=>h(t).then((t=>({status:t.status}))))),this.friendList=(t,e)=>this.fetch(this.url("FriendList"),l(t,e)).then((t=>h(t).then((t=>({page:t.page,friends:t.friends}))))),this.getFriendByAddress=(t,e)=>this.fetch(this.url("GetFriendByAddress"),l(t,e)).then((t=>h(t).then((t=>({status:t.status,friend:t.friend}))))),this.searchFriends=(t,e)=>this.fetch(this.url("SearchFriends"),l(t,e)).then((t=>h(t).then((t=>({friends:t.friends}))))),this.addFriend=(t,e)=>this.fetch(this.url("AddFriend"),l(t,e)).then((t=>h(t).then((t=>({status:t.status,friend:t.friend}))))),this.updateFriendNickname=(t,e)=>this.fetch(this.url("UpdateFriendNickname"),l(t,e)).then((t=>h(t).then((t=>({status:t.status,friend:t.friend}))))),this.removeFriend=(t,e)=>this.fetch(this.url("RemoveFriend"),l(t,e)).then((t=>h(t).then((t=>({status:t.status}))))),this.contractCall=(t,e)=>this.fetch(this.url("ContractCall"),l(t,e)).then((t=>h(t).then((t=>({returns:t.returns}))))),this.decodeContractCall=(t,e)=>this.fetch(this.url("DecodeContractCall"),l(t,e)).then((t=>h(t).then((t=>({call:t.call}))))),this.lookupContractCallSelectors=(t,e)=>this.fetch(this.url("LookupContractCallSelectors"),l(t,e)).then((t=>h(t).then((t=>({signatures:t.signatures}))))),this.userStorageFetch=(t,e)=>this.fetch(this.url("UserStorageFetch"),l(t,e)).then((t=>h(t).then((t=>({object:t.object}))))),this.userStorageSave=(t,e)=>this.fetch(this.url("UserStorageSave"),l(t,e)).then((t=>h(t).then((t=>({ok:t.ok}))))),this.userStorageDelete=(t,e)=>this.fetch(this.url("UserStorageDelete"),l(t,e)).then((t=>h(t).then((t=>({ok:t.ok}))))),this.userStorageFetchAll=(t,e)=>this.fetch(this.url("UserStorageFetchAll"),l(t,e)).then((t=>h(t).then((t=>({objects:t.objects}))))),this.getMoonpayLink=(t,e)=>this.fetch(this.url("GetMoonpayLink"),l(t,e)).then((t=>h(t).then((t=>({signedUrl:t.signedUrl}))))),this.isUsingGoogleMail=(t,e)=>this.fetch(this.url("IsUsingGoogleMail"),l(t,e)).then((t=>h(t).then((t=>({yes:t.yes}))))),this.isValidSignature=(t,e)=>this.fetch(this.url("IsValidSignature"),l(t,e)).then((t=>h(t).then((t=>({isValid:t.isValid}))))),this.isValidMessageSignature=(t,e)=>this.fetch(this.url("IsValidMessageSignature"),l(t,e)).then((t=>h(t).then((t=>({isValid:t.isValid}))))),this.isValidTypedDataSignature=(t,e)=>this.fetch(this.url("IsValidTypedDataSignature"),l(t,e)).then((t=>h(t).then((t=>({isValid:t.isValid}))))),this.isValidETHAuthProof=(t,e)=>this.fetch(this.url("IsValidETHAuthProof"),l(t,e)).then((t=>h(t).then((t=>({isValid:t.isValid}))))),this.getCoinPrices=(t,e)=>this.fetch(this.url("GetCoinPrices"),l(t,e)).then((t=>h(t).then((t=>({tokenPrices:t.tokenPrices}))))),this.getCollectiblePrices=(t,e)=>this.fetch(this.url("GetCollectiblePrices"),l(t,e)).then((t=>h(t).then((t=>({tokenPrices:t.tokenPrices}))))),this.getExchangeRate=(t,e)=>this.fetch(this.url("GetExchangeRate"),l(t,e)).then((t=>h(t).then((t=>({exchangeRate:t.exchangeRate}))))),this.listPayCardsOnFile=t=>this.fetch(this.url("ListPayCardsOnFile"),l({},t)).then((t=>h(t).then((t=>({payCards:t.payCards}))))),this.savePayCard=(t,e)=>this.fetch(this.url("SavePayCard"),l(t,e)).then((t=>h(t).then((t=>({ok:t.ok,payCard:t.payCard}))))),this.updatePayCardCVC=(t,e)=>this.fetch(this.url("UpdatePayCardCVC"),l(t,e)).then((t=>h(t).then((t=>({ok:t.ok}))))),this.deletePayCard=(t,e)=>this.fetch(this.url("DeletePayCard"),l(t,e)).then((t=>h(t).then((t=>({ok:t.ok}))))),this.smartRampQuote=(t,e)=>this.fetch(this.url("SmartRampQuote"),l(t,e)).then((t=>h(t).then((t=>({status:t.status,quoteDetails:t.quoteDetails}))))),this.smartRampPurchase=(t,e)=>this.fetch(this.url("SmartRampPurchase"),l(t,e)).then((t=>h(t).then((t=>({processing:t.processing,receipt:t.receipt}))))),this.smartRampWaitOrderConfirmation=(t,e)=>this.fetch(this.url("SmartRampWaitOrderConfirmation"),l(t,e)).then((t=>h(t).then((t=>({done:t.done,receipt:t.receipt}))))),this.smartRampGetOrder=(t,e)=>this.fetch(this.url("SmartRampGetOrder"),l(t,e)).then((t=>h(t).then((t=>({order:t.order}))))),this.smartRampCheckCardAuthorization=(t,e)=>this.fetch(this.url("SmartRampCheckCardAuthorization"),l(t,e)).then((t=>h(t).then((t=>({cardAuth:t.cardAuth}))))),this.smartRampOrdersList=(t,e)=>this.fetch(this.url("SmartRampOrdersList"),l(t,e)).then((t=>h(t).then((t=>({page:t.page,orders:t.orders}))))),this.smartRampGetOrderTxnHash=(t,e)=>this.fetch(this.url("SmartRampGetOrderTxnHash"),l(t,e)).then((t=>h(t).then((t=>({txnHash:t.txnHash,txnSuccessful:t.txnSuccessful}))))),this.smartRampSubmitCardAuthorization=(t,e)=>this.fetch(this.url("SmartRampSubmitCardAuthorization"),l(t,e)).then((t=>h(t).then((t=>({status:t.status}))))),this.getInviteInfo=t=>this.fetch(this.url("GetInviteInfo"),l({},t)).then((t=>h(t).then((t=>({inviteInfo:t.inviteInfo}))))),this.isValidAccessCode=(t,e)=>this.fetch(this.url("IsValidAccessCode"),l(t,e)).then((t=>h(t).then((t=>({status:t.status}))))),this.internalClaimAccessCode=(t,e)=>this.fetch(this.url("InternalClaimAccessCode"),l(t,e)).then((t=>h(t).then((t=>({status:t.status}))))),this.walletRecover=(t,e)=>this.fetch(this.url("WalletRecover"),l(t,e)).then((t=>h(t).then((t=>({encryptedWallet:t.encryptedWallet}))))),this.blockNumberAtTime=(t,e)=>this.fetch(this.url("BlockNumberAtTime"),l(t,e)).then((t=>h(t).then((t=>({blocks:t.blocks}))))),this.hostname=t,this.fetch=e}url(t){return this.hostname+this.path+t}}const l=(t={},e={})=>({method:"POST",headers:n({},e,{"Content-Type":"application/json"}),body:JSON.stringify(t||{})}),h=t=>t.text().then((e=>{let r;try{r=JSON.parse(e)}catch(r){throw{code:"unknown",msg:`expecting JSON, got: ${e}`,status:t.status}}if(!t.ok)throw r;return r}));var c="undefined"!=typeof globalThis?globalThis:"undefined"!="object"?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function d(t,e,r){return r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},t(r,r.exports),r.exports}function f(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}var p=d((function(t,e){var r="undefined"!=typeof self?self:c,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in t,o="ArrayBuffer"in t;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function g(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():o&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,r,n=f(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=p(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=h(t),e=c(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=c(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),u(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),u(t)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var r,n,i=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];E.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function A(t,r){return new Promise((function(n,s){var o=new v(t,r);if(o.signal&&o.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new E(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),o.signal&&(o.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",l)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=d,t.Request=v,t.Response=E),e.Headers=d,e.Request=v,e.Response=E,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})),g=u(p);class m extends a{constructor(t,e){super(t.endsWith("/")?t.slice(0,-1):t,g),this.jwtAuth=e,this._fetch=(t,e)=>{const r={};return this.jwtAuth&&this.jwtAuth.length>0&&(r.Authorization=`BEARER ${this.jwtAuth}`),e.headers=n({},e.headers,r),g(t,e)},this.fetch=this._fetch}}var y=Object.freeze({__proto__:null,WebRPCVersion:"v1",WebRPCSchemaVersion:"v0.4.0",WebRPCSchemaHash:"fa198c3e3a7ffc3ce59fa84c1f962aae3a3dd211",get SmartRampOrderStatus(){return i},get SmartRampTxnStatus(){return s},get SortOrder(){return o},API:a,SequenceAPIClient:m}),w=f(Object.freeze({__proto__:null,default:{}})),v=d((function(t){!function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function i(t,e,r){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{s="undefined"!=="object".Buffer?window.Buffer:w.Buffer}catch(t){}function o(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(t,e,r){var n=o(t,r);return r-1>=e&&(n|=o(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,s=Math.min(t.length,r),o=e;o<s;o++){var a=t.charCodeAt(o)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===n)for(i=t.length-1,s=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===n)for(i=0,s=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},i.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=a(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=a(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this.strip()},i.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var s=t.length-r,o=s%n,a=Math.min(s,s-o)+r,h=0,c=r;c<a;c+=n)h=l(t,c,c+n,e),this.imuln(i),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var u=1;for(h=l(t,c,t.length,e),c=0;c<o;c++)u*=e;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],s=0|e.words[0],o=i*s,a=67108863&o,l=o/67108864|0;r.words[0]=a;for(var h=1;h<n;h++){for(var c=l>>>26,u=67108863&l,d=Math.min(h,e.length-1),f=Math.max(0,h-t.length+1);f<=d;f++){var p=h-f|0;c+=(o=(i=0|t.words[p])*(s=0|e.words[f])+u)/67108864|0,u=67108863&o}r.words[h]=0|u,l=0|c}return 0!==l?r.words[h]=0|l:r.length--,r.strip()}i.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],l=(16777215&(a<<i|s)).toString(16);n=0!==(s=a>>>24-i&16777215)||o!==this.length-1?h[6-l.length]+l+n:l+n,(i+=2)>=26&&(i-=26,o--)}for(0!==s&&(n=s.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var d=c[t],f=u[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(f).toString(t);n=(p=p.idivn(f)).isZero()?g+n:h[d-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},i.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),s=n||Math.max(1,i);r(i<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0"),this.strip();var o,a,l="le"===e,h=new t(s),c=this.clone();if(l){for(a=0;!c.isZero();a++)o=c.andln(255),c.iushrn(8),h[a]=o;for(;a<s;a++)h[a]=0}else{for(a=0;a<s-i;a++)h[a]=0;for(a=0;!c.isZero();a++)o=c.andln(255),c.iushrn(8),h[s-a-1]=o}return h},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,s=0;s<n.length;s++)e=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&e,i=e>>>26;for(;0!==i&&s<r.length;s++)e=(0|r.words[s])+i,this.words[s]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var s=0,o=0;o<n.length;o++)s=(e=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)s=(e=(0|r.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,r){var n,i,s,o=t.words,a=e.words,l=r.words,h=0,c=0|o[0],u=8191&c,d=c>>>13,f=0|o[1],p=8191&f,g=f>>>13,m=0|o[2],y=8191&m,w=m>>>13,v=0|o[3],b=8191&v,E=v>>>13,_=0|o[4],A=8191&_,S=_>>>13,x=0|o[5],k=8191&x,C=x>>>13,P=0|o[6],T=8191&P,N=P>>>13,I=0|o[7],M=8191&I,O=I>>>13,R=0|o[8],B=8191&R,L=R>>>13,U=0|o[9],D=8191&U,F=U>>>13,j=0|a[0],q=8191&j,W=j>>>13,G=0|a[1],H=8191&G,z=G>>>13,V=0|a[2],K=8191&V,$=V>>>13,J=0|a[3],Z=8191&J,X=J>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],st=8191&it,ot=it>>>13,at=0|a[7],lt=8191&at,ht=at>>>13,ct=0|a[8],ut=8191&ct,dt=ct>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;r.negative=t.negative^e.negative,r.length=19;var mt=(h+(n=Math.imul(u,q))|0)+((8191&(i=(i=Math.imul(u,W))+Math.imul(d,q)|0))<<13)|0;h=((s=Math.imul(d,W))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(p,q),i=(i=Math.imul(p,W))+Math.imul(g,q)|0,s=Math.imul(g,W);var yt=(h+(n=n+Math.imul(u,H)|0)|0)+((8191&(i=(i=i+Math.imul(u,z)|0)+Math.imul(d,H)|0))<<13)|0;h=((s=s+Math.imul(d,z)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,q),i=(i=Math.imul(y,W))+Math.imul(w,q)|0,s=Math.imul(w,W),n=n+Math.imul(p,H)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,z)|0;var wt=(h+(n=n+Math.imul(u,K)|0)|0)+((8191&(i=(i=i+Math.imul(u,$)|0)+Math.imul(d,K)|0))<<13)|0;h=((s=s+Math.imul(d,$)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(b,q),i=(i=Math.imul(b,W))+Math.imul(E,q)|0,s=Math.imul(E,W),n=n+Math.imul(y,H)|0,i=(i=i+Math.imul(y,z)|0)+Math.imul(w,H)|0,s=s+Math.imul(w,z)|0,n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(g,K)|0,s=s+Math.imul(g,$)|0;var vt=(h+(n=n+Math.imul(u,Z)|0)|0)+((8191&(i=(i=i+Math.imul(u,X)|0)+Math.imul(d,Z)|0))<<13)|0;h=((s=s+Math.imul(d,X)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(A,q),i=(i=Math.imul(A,W))+Math.imul(S,q)|0,s=Math.imul(S,W),n=n+Math.imul(b,H)|0,i=(i=i+Math.imul(b,z)|0)+Math.imul(E,H)|0,s=s+Math.imul(E,z)|0,n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(w,K)|0,s=s+Math.imul(w,$)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(g,Z)|0,s=s+Math.imul(g,X)|0;var bt=(h+(n=n+Math.imul(u,Q)|0)|0)+((8191&(i=(i=i+Math.imul(u,tt)|0)+Math.imul(d,Q)|0))<<13)|0;h=((s=s+Math.imul(d,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(k,q),i=(i=Math.imul(k,W))+Math.imul(C,q)|0,s=Math.imul(C,W),n=n+Math.imul(A,H)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(S,H)|0,s=s+Math.imul(S,z)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,$)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,$)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(w,Z)|0,s=s+Math.imul(w,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,tt)|0;var Et=(h+(n=n+Math.imul(u,rt)|0)|0)+((8191&(i=(i=i+Math.imul(u,nt)|0)+Math.imul(d,rt)|0))<<13)|0;h=((s=s+Math.imul(d,nt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(T,q),i=(i=Math.imul(T,W))+Math.imul(N,q)|0,s=Math.imul(N,W),n=n+Math.imul(k,H)|0,i=(i=i+Math.imul(k,z)|0)+Math.imul(C,H)|0,s=s+Math.imul(C,z)|0,n=n+Math.imul(A,K)|0,i=(i=i+Math.imul(A,$)|0)+Math.imul(S,K)|0,s=s+Math.imul(S,$)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(E,Z)|0,s=s+Math.imul(E,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,s=s+Math.imul(w,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,s=s+Math.imul(g,nt)|0;var _t=(h+(n=n+Math.imul(u,st)|0)|0)+((8191&(i=(i=i+Math.imul(u,ot)|0)+Math.imul(d,st)|0))<<13)|0;h=((s=s+Math.imul(d,ot)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,q),i=(i=Math.imul(M,W))+Math.imul(O,q)|0,s=Math.imul(O,W),n=n+Math.imul(T,H)|0,i=(i=i+Math.imul(T,z)|0)+Math.imul(N,H)|0,s=s+Math.imul(N,z)|0,n=n+Math.imul(k,K)|0,i=(i=i+Math.imul(k,$)|0)+Math.imul(C,K)|0,s=s+Math.imul(C,$)|0,n=n+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,X)|0)+Math.imul(S,Z)|0,s=s+Math.imul(S,X)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(w,rt)|0,s=s+Math.imul(w,nt)|0,n=n+Math.imul(p,st)|0,i=(i=i+Math.imul(p,ot)|0)+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0;var At=(h+(n=n+Math.imul(u,lt)|0)|0)+((8191&(i=(i=i+Math.imul(u,ht)|0)+Math.imul(d,lt)|0))<<13)|0;h=((s=s+Math.imul(d,ht)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(B,q),i=(i=Math.imul(B,W))+Math.imul(L,q)|0,s=Math.imul(L,W),n=n+Math.imul(M,H)|0,i=(i=i+Math.imul(M,z)|0)+Math.imul(O,H)|0,s=s+Math.imul(O,z)|0,n=n+Math.imul(T,K)|0,i=(i=i+Math.imul(T,$)|0)+Math.imul(N,K)|0,s=s+Math.imul(N,$)|0,n=n+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(C,Z)|0,s=s+Math.imul(C,X)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(S,Q)|0,s=s+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(E,rt)|0,s=s+Math.imul(E,nt)|0,n=n+Math.imul(y,st)|0,i=(i=i+Math.imul(y,ot)|0)+Math.imul(w,st)|0,s=s+Math.imul(w,ot)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ht)|0)+Math.imul(g,lt)|0,s=s+Math.imul(g,ht)|0;var St=(h+(n=n+Math.imul(u,ut)|0)|0)+((8191&(i=(i=i+Math.imul(u,dt)|0)+Math.imul(d,ut)|0))<<13)|0;h=((s=s+Math.imul(d,dt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,q),i=(i=Math.imul(D,W))+Math.imul(F,q)|0,s=Math.imul(F,W),n=n+Math.imul(B,H)|0,i=(i=i+Math.imul(B,z)|0)+Math.imul(L,H)|0,s=s+Math.imul(L,z)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,$)|0)+Math.imul(O,K)|0,s=s+Math.imul(O,$)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,X)|0)+Math.imul(N,Z)|0,s=s+Math.imul(N,X)|0,n=n+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(C,Q)|0,s=s+Math.imul(C,tt)|0,n=n+Math.imul(A,rt)|0,i=(i=i+Math.imul(A,nt)|0)+Math.imul(S,rt)|0,s=s+Math.imul(S,nt)|0,n=n+Math.imul(b,st)|0,i=(i=i+Math.imul(b,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ht)|0)+Math.imul(w,lt)|0,s=s+Math.imul(w,ht)|0,n=n+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,dt)|0)+Math.imul(g,ut)|0,s=s+Math.imul(g,dt)|0;var xt=(h+(n=n+Math.imul(u,pt)|0)|0)+((8191&(i=(i=i+Math.imul(u,gt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((s=s+Math.imul(d,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,H),i=(i=Math.imul(D,z))+Math.imul(F,H)|0,s=Math.imul(F,z),n=n+Math.imul(B,K)|0,i=(i=i+Math.imul(B,$)|0)+Math.imul(L,K)|0,s=s+Math.imul(L,$)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,X)|0)+Math.imul(O,Z)|0,s=s+Math.imul(O,X)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(N,Q)|0,s=s+Math.imul(N,tt)|0,n=n+Math.imul(k,rt)|0,i=(i=i+Math.imul(k,nt)|0)+Math.imul(C,rt)|0,s=s+Math.imul(C,nt)|0,n=n+Math.imul(A,st)|0,i=(i=i+Math.imul(A,ot)|0)+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,n=n+Math.imul(b,lt)|0,i=(i=i+Math.imul(b,ht)|0)+Math.imul(E,lt)|0,s=s+Math.imul(E,ht)|0,n=n+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,dt)|0)+Math.imul(w,ut)|0,s=s+Math.imul(w,dt)|0;var kt=(h+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;h=((s=s+Math.imul(g,gt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,$))+Math.imul(F,K)|0,s=Math.imul(F,$),n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,X)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(O,Q)|0,s=s+Math.imul(O,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(N,rt)|0,s=s+Math.imul(N,nt)|0,n=n+Math.imul(k,st)|0,i=(i=i+Math.imul(k,ot)|0)+Math.imul(C,st)|0,s=s+Math.imul(C,ot)|0,n=n+Math.imul(A,lt)|0,i=(i=i+Math.imul(A,ht)|0)+Math.imul(S,lt)|0,s=s+Math.imul(S,ht)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,dt)|0)+Math.imul(E,ut)|0,s=s+Math.imul(E,dt)|0;var Ct=(h+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,gt)|0)+Math.imul(w,pt)|0))<<13)|0;h=((s=s+Math.imul(w,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,X))+Math.imul(F,Z)|0,s=Math.imul(F,X),n=n+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(O,rt)|0,s=s+Math.imul(O,nt)|0,n=n+Math.imul(T,st)|0,i=(i=i+Math.imul(T,ot)|0)+Math.imul(N,st)|0,s=s+Math.imul(N,ot)|0,n=n+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,ht)|0)+Math.imul(C,lt)|0,s=s+Math.imul(C,ht)|0,n=n+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,dt)|0)+Math.imul(S,ut)|0,s=s+Math.imul(S,dt)|0;var Pt=(h+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,gt)|0)+Math.imul(E,pt)|0))<<13)|0;h=((s=s+Math.imul(E,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,tt))+Math.imul(F,Q)|0,s=Math.imul(F,tt),n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(L,rt)|0,s=s+Math.imul(L,nt)|0,n=n+Math.imul(M,st)|0,i=(i=i+Math.imul(M,ot)|0)+Math.imul(O,st)|0,s=s+Math.imul(O,ot)|0,n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,ht)|0)+Math.imul(N,lt)|0,s=s+Math.imul(N,ht)|0,n=n+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,dt)|0)+Math.imul(C,ut)|0,s=s+Math.imul(C,dt)|0;var Tt=(h+(n=n+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,gt)|0)+Math.imul(S,pt)|0))<<13)|0;h=((s=s+Math.imul(S,gt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(F,rt)|0,s=Math.imul(F,nt),n=n+Math.imul(B,st)|0,i=(i=i+Math.imul(B,ot)|0)+Math.imul(L,st)|0,s=s+Math.imul(L,ot)|0,n=n+Math.imul(M,lt)|0,i=(i=i+Math.imul(M,ht)|0)+Math.imul(O,lt)|0,s=s+Math.imul(O,ht)|0,n=n+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,dt)|0)+Math.imul(N,ut)|0,s=s+Math.imul(N,dt)|0;var Nt=(h+(n=n+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,gt)|0)+Math.imul(C,pt)|0))<<13)|0;h=((s=s+Math.imul(C,gt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(D,st),i=(i=Math.imul(D,ot))+Math.imul(F,st)|0,s=Math.imul(F,ot),n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ht)|0)+Math.imul(L,lt)|0,s=s+Math.imul(L,ht)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,dt)|0)+Math.imul(O,ut)|0,s=s+Math.imul(O,dt)|0;var It=(h+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,gt)|0)+Math.imul(N,pt)|0))<<13)|0;h=((s=s+Math.imul(N,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,lt),i=(i=Math.imul(D,ht))+Math.imul(F,lt)|0,s=Math.imul(F,ht),n=n+Math.imul(B,ut)|0,i=(i=i+Math.imul(B,dt)|0)+Math.imul(L,ut)|0,s=s+Math.imul(L,dt)|0;var Mt=(h+(n=n+Math.imul(M,pt)|0)|0)+((8191&(i=(i=i+Math.imul(M,gt)|0)+Math.imul(O,pt)|0))<<13)|0;h=((s=s+Math.imul(O,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,dt))+Math.imul(F,ut)|0,s=Math.imul(F,dt);var Ot=(h+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,gt)|0)+Math.imul(L,pt)|0))<<13)|0;h=((s=s+Math.imul(L,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863;var Rt=(h+(n=Math.imul(D,pt))|0)+((8191&(i=(i=Math.imul(D,gt))+Math.imul(F,pt)|0))<<13)|0;return h=((s=Math.imul(F,gt))+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,l[0]=mt,l[1]=yt,l[2]=wt,l[3]=vt,l[4]=bt,l[5]=Et,l[6]=_t,l[7]=At,l[8]=St,l[9]=xt,l[10]=kt,l[11]=Ct,l[12]=Pt,l[13]=Tt,l[14]=Nt,l[15]=It,l[16]=Mt,l[17]=Ot,l[18]=Rt,0!==h&&(l[19]=h,r.length++),r};function p(t,e,r){return(new g).mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(f=d),i.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?f(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,l=Math.min(s,e.length-1),h=Math.max(0,s-t.length+1);h<=l;h++){var c=s-h,u=(0|t.words[c])*(0|e.words[h]),d=67108863&u;a=67108863&(d=d+a|0),i+=(o=(o=o+(u/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r.strip()}(this,t,e):p(this,t,e),r},g.prototype.makeRBT=function(t){for(var e=new Array(t),r=i.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,s){for(var o=0;o<s;o++)n[o]=e[t[o]],i[o]=r[t[o]]},g.prototype.transform=function(t,e,r,n,i,s){this.permute(s,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,l=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var u=l,d=h,f=0;f<o;f++){var p=r[c+f],g=n[c+f],m=r[c+f+o],y=n[c+f+o],w=u*m-d*y;y=u*y+d*m,m=w,r[c+f]=p+m,n[c+f]=g+y,r[c+f+o]=p-m,n[c+f+o]=g-y,f!==a&&(w=l*u-h*d,d=l*d+h*u,u=w)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,n,i){for(var s=0,o=0;o<e;o++)s+=0|t[o],n[2*o]=8191&s,s>>>=13,n[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<i;++o)n[o]=0;r(0===s),r(0==(-8192&s))},g.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),l=new Array(n),h=new Array(n),c=new Array(n),u=new Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,h,n),this.transform(o,s,a,l,n,i),this.transform(h,s,c,u,n,i);for(var f=0;f<n;f++){var p=a[f]*c[f]-l[f]*u[f];l[f]=a[f]*u[f]+l[f]*c[f],a[f]=p}return this.conjugate(a,l,n),this.transform(a,l,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),p(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,s=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=s>>>26,this.words[n]=67108863&s}return 0!==e&&(this.words[n]=e,this.length++),this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new i(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var s=r.sqr();n<e.length;n++,s=s.sqr())0!==e[n]&&(r=r.mul(s));return r},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,s=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,l=(0|this.words[e])-a<<n;this.words[e]=l|o,o=a>>>26-n}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,l=n;if(i-=o,i=Math.max(0,i),l){for(var h=0;h<o;h++)l.words[h]=this.words[h];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,h=0;h<this.length;h++)this.words[h]=this.words[h+o];else this.words[0]=0,this.length=1;var c=0;for(h=this.length-1;h>=0&&(0!==c||h>=i);h--){var u=0|this.words[h];this.words[h]=c<<26-s|u>>>s,c=u&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var i,s,o=t.length+n;this._expand(o);var a=0;for(i=0;i<t.length;i++){s=(0|this.words[i+n])+a;var l=(0|t.words[i])*e;a=((s-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&s}for(;i<this.length-n;i++)a=(s=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&s;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},i.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),s=t,o=0|s.words[s.length-1];0!==(r=26-this._countBits(o))&&(s=s.ushln(r),n.iushln(r),o=0|s.words[s.length-1]);var a,l=n.length-s.length;if("mod"!==e){(a=new i(null)).length=l+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var c=n.clone()._ishlnsubmul(s,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var u=l-1;u>=0;u--){var d=67108864*(0|n.words[s.length+u])+(0|n.words[s.length+u-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(s,d,u);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(s,1,u),n.isZero()||(n.negative^=1);a&&(a.words[u]=d)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(s=a.div.neg()),"div"!==e&&(o=a.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:s,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(s=a.div.neg()),{div:s,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}:this._wordDiv(t,e);var s,o,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},i.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var s=new i(1),o=new i(0),a=new i(0),l=new i(1),h=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++h;for(var c=n.clone(),u=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(c),o.isub(u)),s.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(u)),a.iushrn(1),l.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a),o.isub(l)):(n.isub(e),a.isub(s),l.isub(o))}return{a:a,b:l,gcd:n.iushln(h)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var s,o=new i(1),a=new i(0),l=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,c=1;0==(e.words[0]&c)&&h<26;++h,c<<=1);if(h>0)for(e.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var u=0,d=1;0==(n.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(n.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(a)):(n.isub(e),a.isub(o))}return(s=0===e.cmpn(1)?o:a).cmpn(0)<0&&s.iadd(t),s},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var s=e;e=r,r=s}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var s=i,o=n;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new A(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[i-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(b,y),n(E,y),n(_,y),_.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new E;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new _}return m[t]=e,e},A.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var s=this.m.subn(1),o=0;!s.isZero()&&0===s.andln(1);)o++,s.iushrn(1);r(!s.isZero());var a=new i(1).toRed(this),l=a.redNeg(),h=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);0!==this.pow(c,h).cmp(l);)c.redIAdd(l);for(var u=this.pow(c,s),d=this.pow(t,s.addn(1).iushrn(1)),f=this.pow(t,s),p=o;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(u,new i(1).iushln(p-m-1));d=d.redMul(y),u=y.redSqr(),f=f.redMul(u),p=m}return d},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var s=r[0],o=0,a=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var h=e.words[n],c=l-1;c>=0;c--){var u=h>>c&1;s!==r[0]&&(s=this.sqr(s)),0!==u||0!==o?(o<<=1,o|=u,(4===++a||0===n&&0===c)&&(s=this.mul(s,r[o]),a=0,o=0)):a=0}l=26}return s},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new S(t)},n(S,A),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,c)}));let b=!1,E=!1;const _={debug:1,default:2,info:2,warning:3,error:4,off:5};let A=_.default,S=null;const x=function(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();var k,C;!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(k||(k={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(C||(C={}));const P="0123456789abcdef";class T{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const r=t.toLowerCase();null==_[r]&&this.throwArgumentError("invalid log level name","logLevel",t),A>_[r]||console.log.apply(console,e)}debug(...t){this._log(T.levels.DEBUG,t)}info(...t){this._log(T.levels.INFO,t)}warn(...t){this._log(T.levels.WARNING,t)}makeError(t,e,r){if(E)return this.makeError("censored error",e,{});e||(e=T.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((t=>{const e=r[t];try{if(e instanceof Uint8Array){let r="";for(let t=0;t<e.length;t++)r+=P[e[t]>>4],r+=P[15&e[t]];n.push(t+"=Uint8Array(0x"+r+")")}else n.push(t+"="+JSON.stringify(e))}catch(e){n.push(t+"="+JSON.stringify(r[t].toString()))}})),n.push(`code=${e}`),n.push(`version=${this.version}`);const i=t;n.length&&(t+=" ("+n.join(", ")+")");const s=new Error(t);return s.reason=i,s.code=e,Object.keys(r).forEach((function(t){s[t]=r[t]})),s}throwError(t,e,r){throw this.makeError(t,e,r)}throwArgumentError(t,e,r){return this.throwError(t,T.errors.INVALID_ARGUMENT,{argument:e,value:r})}assert(t,e,r,n){t||this.throwError(e,r,n)}assertArgument(t,e,r,n){t||this.throwArgumentError(e,r,n)}checkNormalize(t){x&&this.throwError("platform missing String.prototype.normalize",T.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:x})}checkSafeUint53(t,e){"number"==typeof t&&(null==e&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,T.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,T.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,r){r=r?": "+r:"",t<e&&this.throwError("missing argument"+r,T.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+r,T.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){t!==Object&&null!=t||this.throwError("missing new",T.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",T.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",T.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return S||(S=new T("logger/5.5.0")),S}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",T.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),b){if(!t)return;this.globalLogger().throwError("error censorship permanent",T.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}E=!!t,b=!!e}static setLogLevel(t){const e=_[t.toLowerCase()];null!=e?A=e:T.globalLogger().warn("invalid log level - "+t)}static from(t){return new T(t)}}T.errors=C,T.levels=k;var N=Object.freeze({__proto__:null,get LogLevel(){return k},get ErrorCode(){return C},Logger:T});const I=new T("bytes/5.5.0");function M(t){return!!t.toHexString}function O(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return O(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function R(t){return q(t)&&!(t.length%2)||L(t)}function B(t){return"number"==typeof t&&t==t&&t%1==0}function L(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"==typeof t)return!1;if(!B(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!B(r)||r<0||r>=256)return!1}return!0}function U(t,e){if(e||(e={}),"number"==typeof t){I.checkSafeUint53(t,"invalid arrayify value");const e=[];for(;t;)e.unshift(255&t),t=parseInt(String(t/256));return 0===e.length&&e.push(0),O(new Uint8Array(e))}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),M(t)&&(t=t.toHexString()),q(t)){let r=t.substring(2);r.length%2&&("left"===e.hexPad?r="0x0"+r.substring(2):"right"===e.hexPad?r+="0":I.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let t=0;t<r.length;t+=2)n.push(parseInt(r.substring(t,t+2),16));return O(new Uint8Array(n))}return L(t)?O(new Uint8Array(t)):I.throwArgumentError("invalid arrayify value","value",t)}function D(t){const e=t.map((t=>U(t))),r=e.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(r);return e.reduce(((t,e)=>(n.set(e,t),t+e.length)),0),O(n)}function F(t){let e=U(t);if(0===e.length)return e;let r=0;for(;r<e.length&&0===e[r];)r++;return r&&(e=e.slice(r)),e}function j(t,e){(t=U(t)).length>e&&I.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),O(r)}function q(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}const W="0123456789abcdef";function G(t,e){if(e||(e={}),"number"==typeof t){I.checkSafeUint53(t,"invalid hexlify value");let e="";for(;t;)e=W[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if("bigint"==typeof t)return(t=t.toString(16)).length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),M(t))return t.toHexString();if(q(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":I.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(L(t)){let e="0x";for(let r=0;r<t.length;r++){let n=t[r];e+=W[(240&n)>>4]+W[15&n]}return e}return I.throwArgumentError("invalid hexlify value","value",t)}function H(t){if("string"!=typeof t)t=G(t);else if(!q(t)||t.length%2)return null;return(t.length-2)/2}function z(t,e,r){return"string"!=typeof t?t=G(t):(!q(t)||t.length%2)&&I.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=r?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function V(t){let e="0x";return t.forEach((t=>{e+=G(t).substring(2)})),e}function K(t){const e=$(G(t,{hexPad:"left"}));return"0x"===e?"0x0":e}function $(t){"string"!=typeof t&&(t=G(t)),q(t)||I.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&"0"===t[e];)e++;return"0x"+t.substring(e)}function J(t,e){for("string"!=typeof t?t=G(t):q(t)||I.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&I.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Z(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(R(t)){const r=U(t);65!==r.length&&I.throwArgumentError("invalid signature string; must be 65 bytes","signature",t),e.r=G(r.slice(0,32)),e.s=G(r.slice(32,64)),e.v=r[64],e.v<27&&(0===e.v||1===e.v?e.v+=27:I.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=G(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){const r=j(U(e._vs),32);e._vs=G(r);const n=r[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=n:e.recoveryParam!==n&&I.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),r[0]&=127;const i=G(r);null==e.s?e.s=i:e.s!==i&&I.throwArgumentError("signature v mismatch _vs","signature",t)}if(null==e.recoveryParam)null==e.v?I.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(null==e.v)e.v=27+e.recoveryParam;else{const r=0===e.v||1===e.v?e.v:1-e.v%2;e.recoveryParam!==r&&I.throwArgumentError("signature recoveryParam mismatch v","signature",t)}null!=e.r&&q(e.r)?e.r=J(e.r,32):I.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&q(e.s)?e.s=J(e.s,32):I.throwArgumentError("signature missing or invalid s","signature",t);const r=U(e.s);r[0]>=128&&I.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=G(r);e._vs&&(q(e._vs)||I.throwArgumentError("signature invalid _vs","signature",t),e._vs=J(e._vs,32)),null==e._vs?e._vs=n:e._vs!==n&&I.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e}function X(t){return G(D([(t=Z(t)).r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}var Y=Object.freeze({__proto__:null,isBytesLike:R,isBytes:L,arrayify:U,concat:D,stripZeros:F,zeroPad:j,isHexString:q,hexlify:G,hexDataLength:H,hexDataSlice:z,hexConcat:V,hexValue:K,hexStripZeros:$,hexZeroPad:J,splitSignature:Z,joinSignature:X});const Q="bignumber/5.5.0";var tt=v.BN;const et=new T(Q),rt={},nt=9007199254740991;let it=!1;class st{constructor(t,e){et.checkNew(new.target,st),t!==rt&&et.throwError("cannot call constructor directly; use BigNumber.from",T.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return at(lt(this).fromTwos(t))}toTwos(t){return at(lt(this).toTwos(t))}abs(){return"-"===this._hex[0]?st.from(this._hex.substring(1)):this}add(t){return at(lt(this).add(lt(t)))}sub(t){return at(lt(this).sub(lt(t)))}div(t){return st.from(t).isZero()&&ht("division by zero","div"),at(lt(this).div(lt(t)))}mul(t){return at(lt(this).mul(lt(t)))}mod(t){const e=lt(t);return e.isNeg()&&ht("cannot modulo negative values","mod"),at(lt(this).umod(e))}pow(t){const e=lt(t);return e.isNeg()&&ht("cannot raise to negative values","pow"),at(lt(this).pow(e))}and(t){const e=lt(t);return(this.isNegative()||e.isNeg())&&ht("cannot 'and' negative values","and"),at(lt(this).and(e))}or(t){const e=lt(t);return(this.isNegative()||e.isNeg())&&ht("cannot 'or' negative values","or"),at(lt(this).or(e))}xor(t){const e=lt(t);return(this.isNegative()||e.isNeg())&&ht("cannot 'xor' negative values","xor"),at(lt(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&ht("cannot mask negative values","mask"),at(lt(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&ht("cannot shift negative values","shl"),at(lt(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&ht("cannot shift negative values","shr"),at(lt(this).shrn(t))}eq(t){return lt(this).eq(lt(t))}lt(t){return lt(this).lt(lt(t))}lte(t){return lt(this).lte(lt(t))}gt(t){return lt(this).gt(lt(t))}gte(t){return lt(this).gte(lt(t))}isNegative(){return"-"===this._hex[0]}isZero(){return lt(this).isZero()}toNumber(){try{return lt(this).toNumber()}catch(t){ht("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(t){}return et.throwError("this platform does not support BigInt",T.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?it||(it=!0,et.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?et.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",T.errors.UNEXPECTED_ARGUMENT,{}):et.throwError("BigNumber.toString does not accept parameters",T.errors.UNEXPECTED_ARGUMENT,{})),lt(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof st)return t;if("string"==typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new st(rt,ot(t)):t.match(/^-?[0-9]+$/)?new st(rt,ot(new tt(t))):et.throwArgumentError("invalid BigNumber string","value",t);if("number"==typeof t)return t%1&&ht("underflow","BigNumber.from",t),(t>=nt||t<=-nt)&&ht("overflow","BigNumber.from",t),st.from(String(t));const e=t;if("bigint"==typeof e)return st.from(e.toString());if(L(e))return st.from(G(e));if(e)if(e.toHexString){const t=e.toHexString();if("string"==typeof t)return st.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"==typeof t&&(q(t)||"-"===t[0]&&q(t.substring(1))))return st.from(t)}return et.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!(!t||!t._isBigNumber)}}function ot(t){if("string"!=typeof t)return ot(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&et.throwArgumentError("invalid hex","value",t),"0x00"===(t=ot(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function at(t){return st.from(ot(t))}function lt(t){const e=st.from(t).toHexString();return"-"===e[0]?new tt("-"+e.substring(3),16):new tt(e.substring(2),16)}function ht(t,e,r){const n={fault:t,operation:e};return null!=r&&(n.value=r),et.throwError(t,T.errors.NUMERIC_FAULT,n)}const ct=new T(Q),ut={},dt=st.from(0),ft=st.from(-1);function pt(t,e,r,n){const i={fault:e,operation:r};return void 0!==n&&(i.value=n),ct.throwError(t,T.errors.NUMERIC_FAULT,i)}let gt="0";for(;gt.length<256;)gt+=gt;function mt(t){if("number"!=typeof t)try{t=st.from(t).toNumber()}catch(t){}return"number"==typeof t&&t>=0&&t<=256&&!(t%1)?"1"+gt.substring(0,t):ct.throwArgumentError("invalid decimal size","decimals",t)}function yt(t,e){null==e&&(e=0);const r=mt(e),n=(t=st.from(t)).lt(dt);n&&(t=t.mul(ft));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return t=1===r.length?s:s+"."+i,n&&(t="-"+t),t}function wt(t,e){null==e&&(e=0);const r=mt(e);"string"==typeof t&&t.match(/^-?[0-9.]+$/)||ct.throwArgumentError("invalid decimal value","value",t);const n="-"===t.substring(0,1);n&&(t=t.substring(1)),"."===t&&ct.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&ct.throwArgumentError("too many decimal points","value",t);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");"0"===o[o.length-1];)o=o.substring(0,o.length-1);for(o.length>r.length-1&&pt("fractional component exceeds decimals","underflow","parseFixed"),""===o&&(o="0");o.length<r.length-1;)o+="0";const a=st.from(s),l=st.from(o);let h=a.mul(r).add(l);return n&&(h=h.mul(ft)),h}class vt{constructor(t,e,r,n){t!==ut&&ct.throwError("cannot use FixedFormat constructor; use FixedFormat.from",T.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=e,this.width=r,this.decimals=n,this.name=(e?"":"u")+"fixed"+String(r)+"x"+String(n),this._multiplier=mt(n),Object.freeze(this)}static from(t){if(t instanceof vt)return t;"number"==typeof t&&(t=`fixed128x${t}`);let e=!0,r=128,n=18;if("string"==typeof t)if("fixed"===t);else if("ufixed"===t)e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||ct.throwArgumentError("invalid fixed format","format",t),e="u"!==i[1],r=parseInt(i[2]),n=parseInt(i[3])}else if(t){const i=(e,r,n)=>null==t[e]?n:(typeof t[e]!==r&&ct.throwArgumentError("invalid fixed format ("+e+" not "+r+")","format."+e,t[e]),t[e]);e=i("signed","boolean",e),r=i("width","number",r),n=i("decimals","number",n)}return r%8&&ct.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),n>80&&ct.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new vt(ut,e,r,n)}}class bt{constructor(t,e,r,n){ct.checkNew(new.target,bt),t!==ut&&ct.throwError("cannot use FixedNumber constructor; use FixedNumber.from",T.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=e,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&ct.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const e=wt(this._value,this.format.decimals),r=wt(t._value,t.format.decimals);return bt.fromValue(e.add(r),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const e=wt(this._value,this.format.decimals),r=wt(t._value,t.format.decimals);return bt.fromValue(e.sub(r),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const e=wt(this._value,this.format.decimals),r=wt(t._value,t.format.decimals);return bt.fromValue(e.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const e=wt(this._value,this.format.decimals),r=wt(t._value,t.format.decimals);return bt.fromValue(e.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");1===t.length&&t.push("0");let e=bt.from(t[0],this.format);const r=!t[1].match(/^(0*)$/);return this.isNegative()&&r&&(e=e.subUnsafe(Et.toFormat(e.format))),e}ceiling(){const t=this.toString().split(".");1===t.length&&t.push("0");let e=bt.from(t[0],this.format);const r=!t[1].match(/^(0*)$/);return!this.isNegative()&&r&&(e=e.addUnsafe(Et.toFormat(e.format))),e}round(t){null==t&&(t=0);const e=this.toString().split(".");if(1===e.length&&e.push("0"),(t<0||t>80||t%1)&&ct.throwArgumentError("invalid decimal count","decimals",t),e[1].length<=t)return this;const r=bt.from("1"+gt.substring(0,t),this.format),n=_t.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(t){if(null==t)return this._hex;t%8&&ct.throwArgumentError("invalid byte width","width",t);return J(st.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString(),t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return bt.fromString(this._value,t)}static fromValue(t,e,r){return null!=r||null==e||function(t){return null!=t&&(st.isBigNumber(t)||"number"==typeof t&&t%1==0||"string"==typeof t&&!!t.match(/^-?[0-9]+$/)||q(t)||"bigint"==typeof t||L(t))}(e)||(r=e,e=null),null==e&&(e=0),null==r&&(r="fixed"),bt.fromString(yt(t,e),vt.from(r))}static fromString(t,e){null==e&&(e="fixed");const r=vt.from(e),n=wt(t,r.decimals);!r.signed&&n.lt(dt)&&pt("unsigned value cannot be negative","overflow","value",t);let i=null;r.signed?i=n.toTwos(r.width).toHexString():(i=n.toHexString(),i=J(i,r.width/8));const s=yt(n,r.decimals);return new bt(ut,i,s,r)}static fromBytes(t,e){null==e&&(e="fixed");const r=vt.from(e);if(U(t).length>r.width/8)throw new Error("overflow");let n=st.from(t);r.signed&&(n=n.fromTwos(r.width));const i=n.toTwos((r.signed?0:1)+r.width).toHexString(),s=yt(n,r.decimals);return new bt(ut,i,s,r)}static from(t,e){if("string"==typeof t)return bt.fromString(t,e);if(L(t))return bt.fromBytes(t,e);try{return bt.fromValue(t,0,e)}catch(t){if(t.code!==T.errors.INVALID_ARGUMENT)throw t}return ct.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!(!t||!t._isFixedNumber)}}const Et=bt.from(1),_t=bt.from("0.5");var At=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const St=new T("properties/5.5.0");function xt(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function kt(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||"object"!=typeof t.prototype)break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function Ct(t){return At(this,void 0,void 0,(function*(){const e=Object.keys(t).map((e=>{const r=t[e];return Promise.resolve(r).then((t=>({key:e,value:t})))}));return(yield Promise.all(e)).reduce(((t,e)=>(t[e.key]=e.value,t)),{})}))}function Pt(t,e){t&&"object"==typeof t||St.throwArgumentError("invalid object","object",t),Object.keys(t).forEach((r=>{e[r]||St.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)}))}function Tt(t){const e={};for(const r in t)e[r]=t[r];return e}const Nt={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function It(t){if(null==t||Nt[typeof t])return!0;if(Array.isArray(t)||"object"==typeof t){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch(t){continue}if(!It(n))return!1}return!0}return St.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function Mt(t){if(It(t))return t;if(Array.isArray(t))return Object.freeze(t.map((t=>Ot(t))));if("object"==typeof t){const e={};for(const r in t){const n=t[r];void 0!==n&&xt(e,r,Ot(n))}return e}return St.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function Ot(t){return Mt(t)}class Rt{constructor(t){for(const e in t)this[e]=Ot(t[e])}}var Bt=Object.freeze({__proto__:null,defineReadOnly:xt,getStatic:kt,resolveProperties:Ct,checkProperties:Pt,shallowCopy:Tt,deepCopy:Ot,Description:Rt});const Lt="abi/5.5.0",Ut=new T(Lt),Dt={};let Ft={calldata:!0,memory:!0,storage:!0},jt={calldata:!0,memory:!0};function qt(t,e){if("bytes"===t||"string"===t){if(Ft[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&jt[e])return!0;return(Ft[e]||"payable"===e)&&Ut.throwArgumentError("invalid modifier","name",e),!1}function Wt(t,e){for(let r in e)xt(t,r,e[r])}const Gt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Ht=new RegExp(/^(.*)\[([0-9]*)\]$/);class zt{constructor(t,e){t!==Dt&&Ut.throwError("use fromString",T.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Wt(this,e);let r=this.type.match(Ht);Wt(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:zt.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=Gt.sighash),Gt[t]||Ut.throwArgumentError("invalid format type","format",t),t===Gt.json){let e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(e)}let e="";return"array"===this.baseType?(e+=this.arrayChildren.format(t),e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==Gt.sighash&&(e+=this.type),e+="("+this.components.map((e=>e.format(t))).join(t===Gt.full?", ":",")+")"):e+=this.type,t!==Gt.sighash&&(!0===this.indexed&&(e+=" indexed"),t===Gt.full&&this.name&&(e+=" "+this.name)),e}static from(t,e){return"string"==typeof t?zt.fromString(t,e):zt.fromObject(t)}static fromObject(t){return zt.isParamType(t)?t:new zt(Dt,{name:t.name||null,type:re(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(zt.fromObject):null})}static fromString(t,e){return r=function(t,e){let r=t;function n(e){Ut.throwArgumentError(`unexpected character at position ${e}`,"param",t)}function i(t){let r={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(r.indexed=!1),r}t=t.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},o=s;for(let r=0;r<t.length;r++){let s=t[r];switch(s){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||n(r),o.state.allowType=!1,o.type=re(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(e||n(r),o.indexed=!0,o.name=""),qt(o.type,o.name)&&(o.name=""),o.type=re(o.type);let t=o;o=o.parent,o||n(r),delete t.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(e||n(r),o.indexed=!0,o.name=""),qt(o.type,o.name)&&(o.name=""),o.type=re(o.type);let a=i(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=re(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(e||n(r),o.indexed&&n(r),o.indexed=!0,o.name=""):qt(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(r),o.type+=s,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(r),o.type+=s,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=s,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=s,delete o.state.allowArray):o.state.readArray?o.type+=s:n(r)}}return o.parent&&Ut.throwArgumentError("unexpected eof","param",t),delete s.state,"indexed"===o.name?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):qt(o.type,o.name)&&(o.name=""),s.type=re(s.type),s}(t,!!e),zt.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(t){return!(null==t||!t._isParamType)}}function Vt(t,e){return function(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];","===s&&0===n?(e.push(r),r=""):(r+=s,"("===s?n++:")"===s&&(n--,-1===n&&Ut.throwArgumentError("unbalanced parenthesis","value",t)))}r&&e.push(r);return e}(t).map((t=>zt.fromString(t,e)))}class Kt{constructor(t,e){t!==Dt&&Ut.throwError("use a static from method",T.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Wt(this,e),this._isFragment=!0,Object.freeze(this)}static from(t){return Kt.isFragment(t)?t:"string"==typeof t?Kt.fromString(t):Kt.fromObject(t)}static fromObject(t){if(Kt.isFragment(t))return t;switch(t.type){case"function":return Qt.fromObject(t);case"event":return $t.fromObject(t);case"constructor":return Yt.fromObject(t);case"error":return ee.fromObject(t);case"fallback":case"receive":return null}return Ut.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?$t.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?Qt.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?Yt.fromString(t.trim()):"error"===t.split(" ")[0]?ee.fromString(t.substring(5).trim()):Ut.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!(!t||!t._isFragment)}}class $t extends Kt{format(t){if(t||(t=Gt.sighash),Gt[t]||Ut.throwArgumentError("invalid format type","format",t),t===Gt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==Gt.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Gt.full?", ":",")+") ",t!==Gt.sighash&&this.anonymous&&(e+="anonymous "),e.trim()}static from(t){return"string"==typeof t?$t.fromString(t):$t.fromObject(t)}static fromObject(t){if($t.isEventFragment(t))return t;"event"!==t.type&&Ut.throwArgumentError("invalid event object","value",t);const e={name:ie(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(zt.fromObject):[],type:"event"};return new $t(Dt,e)}static fromString(t){let e=t.match(se);e||Ut.throwArgumentError("invalid event string","value",t);let r=!1;return e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":r=!0;break;case"":break;default:Ut.warn("unknown modifier: "+t)}})),$t.fromObject({name:e[1].trim(),anonymous:r,inputs:Vt(e[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&"event"===t.type}}function Jt(t,e){e.gas=null;let r=t.split("@");return 1!==r.length?(r.length>2&&Ut.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||Ut.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=st.from(r[1]),r[0]):t}function Zt(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function Xt(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&Ut.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&Ut.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||Ut.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Ut.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&Ut.throwArgumentError("unable to determine stateMutability","value",t),e}class Yt extends Kt{format(t){if(t||(t=Gt.sighash),Gt[t]||Ut.throwArgumentError("invalid format type","format",t),t===Gt.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});t===Gt.sighash&&Ut.throwError("cannot format a constructor for sighash",T.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let e="constructor("+this.inputs.map((e=>e.format(t))).join(t===Gt.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()}static from(t){return"string"==typeof t?Yt.fromString(t):Yt.fromObject(t)}static fromObject(t){if(Yt.isConstructorFragment(t))return t;"constructor"!==t.type&&Ut.throwArgumentError("invalid constructor object","value",t);let e=Xt(t);e.constant&&Ut.throwArgumentError("constructor cannot be constant","value",t);const r={name:null,type:t.type,inputs:t.inputs?t.inputs.map(zt.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?st.from(t.gas):null};return new Yt(Dt,r)}static fromString(t){let e={type:"constructor"},r=(t=Jt(t,e)).match(se);return r&&"constructor"===r[1].trim()||Ut.throwArgumentError("invalid constructor string","value",t),e.inputs=Vt(r[2].trim(),!1),Zt(r[3].trim(),e),Yt.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&"constructor"===t.type}}class Qt extends Yt{format(t){if(t||(t=Gt.sighash),Gt[t]||Ut.throwArgumentError("invalid format type","format",t),t===Gt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==Gt.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Gt.full?", ":",")+") ",t!==Gt.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((e=>e.format(t))).join(", ")+") "),null!=this.gas&&(e+="@"+this.gas.toString()+" ")),e.trim()}static from(t){return"string"==typeof t?Qt.fromString(t):Qt.fromObject(t)}static fromObject(t){if(Qt.isFunctionFragment(t))return t;"function"!==t.type&&Ut.throwArgumentError("invalid function object","value",t);let e=Xt(t);const r={type:t.type,name:ie(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(zt.fromObject):[],outputs:t.outputs?t.outputs.map(zt.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?st.from(t.gas):null};return new Qt(Dt,r)}static fromString(t){let e={type:"function"},r=(t=Jt(t,e)).split(" returns ");r.length>2&&Ut.throwArgumentError("invalid function string","value",t);let n=r[0].match(se);if(n||Ut.throwArgumentError("invalid function signature","value",t),e.name=n[1].trim(),e.name&&ie(e.name),e.inputs=Vt(n[2],!1),Zt(n[3].trim(),e),r.length>1){let n=r[1].match(se);""==n[1].trim()&&""==n[3].trim()||Ut.throwArgumentError("unexpected tokens","value",t),e.outputs=Vt(n[2],!1)}else e.outputs=[];return Qt.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&"function"===t.type}}function te(t){const e=t.format();return"Error(string)"!==e&&"Panic(uint256)"!==e||Ut.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class ee extends Kt{format(t){if(t||(t=Gt.sighash),Gt[t]||Ut.throwArgumentError("invalid format type","format",t),t===Gt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==Gt.sighash&&(e+="error "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Gt.full?", ":",")+") ",e.trim()}static from(t){return"string"==typeof t?ee.fromString(t):ee.fromObject(t)}static fromObject(t){if(ee.isErrorFragment(t))return t;"error"!==t.type&&Ut.throwArgumentError("invalid error object","value",t);const e={type:t.type,name:ie(t.name),inputs:t.inputs?t.inputs.map(zt.fromObject):[]};return te(new ee(Dt,e))}static fromString(t){let e={type:"error"},r=t.match(se);return r||Ut.throwArgumentError("invalid error signature","value",t),e.name=r[1].trim(),e.name&&ie(e.name),e.inputs=Vt(r[2],!1),te(ee.fromObject(e))}static isErrorFragment(t){return t&&t._isFragment&&"error"===t.type}}function re(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const ne=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function ie(t){return t&&t.match(ne)||Ut.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const se=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");const oe=new T(Lt);function ae(t){const e=[],r=function(t,n){if(Array.isArray(n))for(let i in n){const s=t.slice();s.push(i);try{r(s,n[i])}catch(t){e.push({path:s,error:t})}}};return r([],t),e}class le{constructor(t,e,r,n){this.name=t,this.type=e,this.localName=r,this.dynamic=n}_throwError(t,e){oe.throwArgumentError(t,this.localName,e)}}class he{constructor(t){xt(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return V(this._data)}get length(){return this._dataLength}_writeData(t){return this._data.push(t),this._dataLength+=t.length,t.length}appendWriter(t){return this._writeData(D(t._data))}writeBytes(t){let e=U(t);const r=e.length%this.wordSize;return r&&(e=D([e,this._padding.slice(r)])),this._writeData(e)}_getValue(t){let e=U(st.from(t));return e.length>this.wordSize&&oe.throwError("value out-of-bounds",T.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=D([this._padding.slice(e.length%this.wordSize),e])),e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,e=>{this._data[t]=this._getValue(e)}}}class ce{constructor(t,e,r,n){xt(this,"_data",U(t)),xt(this,"wordSize",e||32),xt(this,"_coerceFunc",r),xt(this,"allowLoose",n),this._offset=0}get data(){return G(this._data)}get consumed(){return this._offset}static coerce(t,e){let r=t.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(e=e.toNumber()),e}coerce(t,e){return this._coerceFunc?this._coerceFunc(t,e):ce.coerce(t,e)}_peekBytes(t,e,r){let n=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+e<=this._data.length?n=e:oe.throwError("data out-of-bounds",T.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(t){return new ce(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let r=this._peekBytes(0,t,!!e);return this._offset+=r.length,r.slice(0,t)}readValue(){return st.from(this.readBytes(this.wordSize))}}var ue=d((function(t){
/**
   * [js-sha3]{@link https://github.com/emn178/js-sha3}
   *
   * @version 0.8.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2015-2018
   * @license MIT
   */
!function(){var e="input is invalid type",r=!0,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=c:i&&(n=self);var s=!n.JS_SHA3_NO_COMMON_JS&&t.exports,o=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),l=[4,1024,262144,67108864],h=[0,8,16,24],u=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],d=[224,256,384,512],f=[128,256],p=["hex","buffer","arrayBuffer","array","digest"],g={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!o||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var m=function(t,e,r){return function(n){return new I(t,e,t).update(n)[r]()}},y=function(t,e,r){return function(n,i){return new I(t,e,i).update(n)[r]()}},w=function(t,e,r){return function(e,n,i,s){return A["cshake"+t].update(e,n,i,s)[r]()}},v=function(t,e,r){return function(e,n,i,s){return A["kmac"+t].update(e,n,i,s)[r]()}},b=function(t,e,r,n){for(var i=0;i<p.length;++i){var s=p[i];t[s]=e(r,n,s)}return t},E=function(t,e){var r=m(t,e,"hex");return r.create=function(){return new I(t,e,t)},r.update=function(t){return r.create().update(t)},b(r,m,t,e)},_=[{name:"keccak",padding:[1,256,65536,16777216],bits:d,createMethod:E},{name:"sha3",padding:[6,1536,393216,100663296],bits:d,createMethod:E},{name:"shake",padding:[31,7936,2031616,520093696],bits:f,createMethod:function(t,e){var r=y(t,e,"hex");return r.create=function(r){return new I(t,e,r)},r.update=function(t,e){return r.create(e).update(t)},b(r,y,t,e)}},{name:"cshake",padding:l,bits:f,createMethod:function(t,e){var r=g[t],n=w(t,0,"hex");return n.create=function(n,i,s){return i||s?new I(t,e,n).bytepad([i,s],r):A["shake"+t].create(n)},n.update=function(t,e,r,i){return n.create(e,r,i).update(t)},b(n,w,t,e)}},{name:"kmac",padding:l,bits:f,createMethod:function(t,e){var r=g[t],n=v(t,0,"hex");return n.create=function(n,i,s){return new M(t,e,i).bytepad(["KMAC",s],r).bytepad([n],r)},n.update=function(t,e,r,i){return n.create(t,r,i).update(e)},b(n,v,t,e)}}],A={},S=[],x=0;x<_.length;++x)for(var k=_[x],C=k.bits,P=0;P<C.length;++P){var T=k.name+"_"+C[P];if(S.push(T),A[T]=k.createMethod(C[P],k.padding),"sha3"!==k.name){var N=k.name+C[P];S.push(N),A[N]=A[T]}}function I(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function M(t,e,r){I.call(this,t,e,r)}I.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(o&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||o&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var i,s,a=this.blocks,l=this.byteCount,c=t.length,u=this.blockCount,d=0,f=this.s;d<c;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<u+1;++i)a[i]=0;if(r)for(i=this.start;d<c&&i<l;++d)a[i>>2]|=t[d]<<h[3&i++];else for(i=this.start;d<c&&i<l;++d)(s=t.charCodeAt(d))<128?a[i>>2]|=s<<h[3&i++]:s<2048?(a[i>>2]|=(192|s>>6)<<h[3&i++],a[i>>2]|=(128|63&s)<<h[3&i++]):s<55296||s>=57344?(a[i>>2]|=(224|s>>12)<<h[3&i++],a[i>>2]|=(128|s>>6&63)<<h[3&i++],a[i>>2]|=(128|63&s)<<h[3&i++]):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++d)),a[i>>2]|=(240|s>>18)<<h[3&i++],a[i>>2]|=(128|s>>12&63)<<h[3&i++],a[i>>2]|=(128|s>>6&63)<<h[3&i++],a[i>>2]|=(128|63&s)<<h[3&i++]);if(this.lastByteIndex=i,i>=l){for(this.start=i-l,this.block=a[u],i=0;i<u;++i)f[i]^=a[i];O(f),this.reset=!0}else this.start=i}return this},I.prototype.encode=function(t,e){var r=255&t,n=1,i=[r];for(r=255&(t>>=8);r>0;)i.unshift(r),r=255&(t>>=8),++n;return e?i.push(n):i.unshift(n),this.update(i),i.length},I.prototype.encodeString=function(t){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(o&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||o&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}var i=0,s=t.length;if(r)i=s;else for(var a=0;a<t.length;++a){var l=t.charCodeAt(a);l<128?i+=1:l<2048?i+=2:l<55296||l>=57344?i+=3:(l=65536+((1023&l)<<10|1023&t.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(t),i},I.prototype.bytepad=function(t,e){for(var r=this.encode(e),n=0;n<t.length;++n)r+=this.encodeString(t[n]);var i=e-r%e,s=[];return s.length=i,this.update(s),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];O(n)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,l="";o<n;){for(s=0;s<e&&o<n;++s,++o)t=r[s],l+=a[t>>4&15]+a[15&t]+a[t>>12&15]+a[t>>8&15]+a[t>>20&15]+a[t>>16&15]+a[t>>28&15]+a[t>>24&15];o%e==0&&(O(r),s=0)}return i&&(t=r[s],l+=a[t>>4&15]+a[15&t],i>1&&(l+=a[t>>12&15]+a[t>>8&15]),i>2&&(l+=a[t>>20&15]+a[t>>16&15])),l},I.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;t=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var l=new Uint32Array(t);o<n;){for(s=0;s<e&&o<n;++s,++o)l[o]=r[s];o%e==0&&O(r)}return i&&(l[s]=r[s],t=t.slice(0,a)),t},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var t,e,r=this.blockCount,n=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,l=[];a<i;){for(o=0;o<r&&a<i;++o,++a)t=a<<2,e=n[o],l[t]=255&e,l[t+1]=e>>8&255,l[t+2]=e>>16&255,l[t+3]=e>>24&255;a%r==0&&O(n)}return s&&(t=a<<2,e=n[o],l[t]=255&e,s>1&&(l[t+1]=e>>8&255),s>2&&(l[t+2]=e>>16&255)),l},M.prototype=new I,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var O=function(t){var e,r,n,i,s,o,a,l,h,c,d,f,p,g,m,y,w,v,b,E,_,A,S,x,k,C,P,T,N,I,M,O,R,B,L,U,D,F,j,q,W,G,H,z,V,K,$,J,Z,X,Y,Q,tt,et,rt,nt,it,st,ot,at,lt,ht,ct;for(n=0;n<48;n+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],s=t[1]^t[11]^t[21]^t[31]^t[41],o=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],l=t[4]^t[14]^t[24]^t[34]^t[44],h=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],d=t[7]^t[17]^t[27]^t[37]^t[47],e=(f=t[8]^t[18]^t[28]^t[38]^t[48])^(o<<1|a>>>31),r=(p=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|o>>>31),t[0]^=e,t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,e=i^(l<<1|h>>>31),r=s^(h<<1|l>>>31),t[2]^=e,t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,e=o^(c<<1|d>>>31),r=a^(d<<1|c>>>31),t[4]^=e,t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,e=l^(f<<1|p>>>31),r=h^(p<<1|f>>>31),t[6]^=e,t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,e=c^(i<<1|s>>>31),r=d^(s<<1|i>>>31),t[8]^=e,t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,g=t[0],m=t[1],K=t[11]<<4|t[10]>>>28,$=t[10]<<4|t[11]>>>28,T=t[20]<<3|t[21]>>>29,N=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,lt=t[30]<<9|t[31]>>>23,G=t[40]<<18|t[41]>>>14,H=t[41]<<18|t[40]>>>14,B=t[2]<<1|t[3]>>>31,L=t[3]<<1|t[2]>>>31,y=t[13]<<12|t[12]>>>20,w=t[12]<<12|t[13]>>>20,J=t[22]<<10|t[23]>>>22,Z=t[23]<<10|t[22]>>>22,I=t[33]<<13|t[32]>>>19,M=t[32]<<13|t[33]>>>19,ht=t[42]<<2|t[43]>>>30,ct=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,U=t[14]<<6|t[15]>>>26,D=t[15]<<6|t[14]>>>26,v=t[25]<<11|t[24]>>>21,b=t[24]<<11|t[25]>>>21,X=t[34]<<15|t[35]>>>17,Y=t[35]<<15|t[34]>>>17,O=t[45]<<29|t[44]>>>3,R=t[44]<<29|t[45]>>>3,x=t[6]<<28|t[7]>>>4,k=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,F=t[26]<<25|t[27]>>>7,j=t[27]<<25|t[26]>>>7,E=t[36]<<21|t[37]>>>11,_=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,z=t[8]<<27|t[9]>>>5,V=t[9]<<27|t[8]>>>5,C=t[18]<<20|t[19]>>>12,P=t[19]<<20|t[18]>>>12,st=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,q=t[38]<<8|t[39]>>>24,W=t[39]<<8|t[38]>>>24,A=t[48]<<14|t[49]>>>18,S=t[49]<<14|t[48]>>>18,t[0]=g^~y&v,t[1]=m^~w&b,t[10]=x^~C&T,t[11]=k^~P&N,t[20]=B^~U&F,t[21]=L^~D&j,t[30]=z^~K&J,t[31]=V^~$&Z,t[40]=et^~nt&st,t[41]=rt^~it&ot,t[2]=y^~v&E,t[3]=w^~b&_,t[12]=C^~T&I,t[13]=P^~N&M,t[22]=U^~F&q,t[23]=D^~j&W,t[32]=K^~J&X,t[33]=$^~Z&Y,t[42]=nt^~st&at,t[43]=it^~ot&lt,t[4]=v^~E&A,t[5]=b^~_&S,t[14]=T^~I&O,t[15]=N^~M&R,t[24]=F^~q&G,t[25]=j^~W&H,t[34]=J^~X&Q,t[35]=Z^~Y&tt,t[44]=st^~at&ht,t[45]=ot^~lt&ct,t[6]=E^~A&g,t[7]=_^~S&m,t[16]=I^~O&x,t[17]=M^~R&k,t[26]=q^~G&B,t[27]=W^~H&L,t[36]=X^~Q&z,t[37]=Y^~tt&V,t[46]=at^~ht&et,t[47]=lt^~ct&rt,t[8]=A^~g&y,t[9]=S^~m&w,t[18]=O^~x&C,t[19]=R^~k&P,t[28]=G^~B&U,t[29]=H^~L&D,t[38]=Q^~z&K,t[39]=tt^~V&$,t[48]=ht^~et&nt,t[49]=ct^~rt&it,t[0]^=u[n],t[1]^=u[n+1]};if(s)t.exports=A;else for(x=0;x<S.length;++x)n[S[x]]=A[S[x]]}()})),de=ue;function fe(t){return"0x"+de.keccak_256(U(t))}var pe=Object.freeze({__proto__:null,keccak256:fe});const ge=new T("rlp/5.5.0");function me(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function ye(t,e,r){let n=0;for(let i=0;i<r;i++)n=256*n+t[e+i];return n}function we(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(we(t))})),e.length<=55)return e.unshift(192+e.length),e;const r=me(e.length);return r.unshift(247+r.length),r.concat(e)}R(t)||ge.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(U(t));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=me(e.length);return r.unshift(183+r.length),r.concat(e)}function ve(t){return G(we(t))}function be(t,e,r,n){const i=[];for(;r<e+1+n;){const s=Ee(t,r);i.push(s.result),(r+=s.consumed)>e+1+n&&ge.throwError("child data too short",T.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Ee(t,e){if(0===t.length&&ge.throwError("data too short",T.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&ge.throwError("data short segment too short",T.errors.BUFFER_OVERRUN,{});const n=ye(t,e+1,r);return e+1+r+n>t.length&&ge.throwError("data long segment too short",T.errors.BUFFER_OVERRUN,{}),be(t,e,e+1+r,r+n)}if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&ge.throwError("data array too short",T.errors.BUFFER_OVERRUN,{}),be(t,e,e+1,r)}if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&ge.throwError("data array too short",T.errors.BUFFER_OVERRUN,{});const n=ye(t,e+1,r);e+1+r+n>t.length&&ge.throwError("data array too short",T.errors.BUFFER_OVERRUN,{});return{consumed:1+r+n,result:G(t.slice(e+1+r,e+1+r+n))}}if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&ge.throwError("data too short",T.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:G(t.slice(e+1,e+1+r))}}return{consumed:1,result:G(t[e])}}function _e(t){const e=U(t),r=Ee(e,0);return r.consumed!==e.length&&ge.throwArgumentError("invalid rlp data","data",t),r.result}var Ae=Object.freeze({__proto__:null,encode:ve,decode:_e});const Se=new T("address/5.5.0");function xe(t){q(t,20)||Se.throwArgumentError("invalid address","address",t);const e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let t=0;t<40;t++)r[t]=e[t].charCodeAt(0);const n=U(fe(r));for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&n[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const ke={};for(let t=0;t<10;t++)ke[String(t)]=String(t);for(let t=0;t<26;t++)ke[String.fromCharCode(65+t)]=String(10+t);const Ce=Math.floor(function(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}(9007199254740991));function Pe(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>ke[t])).join("");for(;e.length>=Ce;){let t=e.substring(0,Ce);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Te(t){let e=null;if("string"!=typeof t&&Se.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=xe(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Se.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==Pe(t)&&Se.throwArgumentError("bad icap checksum","address",t),e=function(t){return new tt(t,36).toString(16)}(t.substring(4));e.length<40;)e="0"+e;e=xe("0x"+e)}else Se.throwArgumentError("invalid address","address",t);return e}function Ne(t){let e=null;try{e=Te(t.from)}catch(e){Se.throwArgumentError("missing from address","transaction",t)}return Te(z(fe(ve([e,F(U(st.from(t.nonce).toHexString()))])),12))}var Ie=Object.freeze({__proto__:null,getAddress:Te,isAddress:function(t){try{return Te(t),!0}catch(t){}return!1},getIcapAddress:function(t){let e=function(t){return new tt(t,16).toString(36)}(Te(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Pe("XE00"+e)+e},getContractAddress:Ne,getCreate2Address:function(t,e,r){return 32!==H(e)&&Se.throwArgumentError("salt must be 32 bytes","salt",e),32!==H(r)&&Se.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),Te(z(fe(D(["0xff",Te(t),e,r])),12))}});class Me extends le{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){try{e=Te(e)}catch(t){this._throwError(t.message,e)}return t.writeValue(e)}decode(t){return Te(J(t.readValue().toHexString(),20))}}class Oe extends le{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const Re=new T(Lt);function Be(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let t={};n=e.map((e=>{const n=e.localName;return n||Re.throwError("cannot encode object for signature with missing names",T.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]&&Re.throwError("cannot encode object for signature with duplicate names",T.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]=!0,r[n]}))}else Re.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&Re.throwArgumentError("types/value length mismatch","tuple",r);let i=new he(t.wordSize),s=new he(t.wordSize),o=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=s.length;t.encode(s,r);let n=i.writeUpdatableValue();o.push((t=>{n(t+e)}))}else t.encode(i,r)})),o.forEach((t=>{t(i.length)}));let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function Le(t,e){let r=[],n=t.subReader(0);e.forEach((e=>{let i=null;if(e.dynamic){let r=t.readValue(),s=n.subReader(r.toNumber());try{i=e.decode(s)}catch(t){if(t.code===T.errors.BUFFER_OVERRUN)throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(t){if(t.code===T.errors.BUFFER_OVERRUN)throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}null!=i&&r.push(i)}));const i=e.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});e.forEach(((t,e)=>{let n=t.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const s=r[e];s instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw s}}):r[n]=s}));for(let t=0;t<r.length;t++){const e=r[t];e instanceof Error&&Object.defineProperty(r,t,{enumerable:!0,get:()=>{throw e}})}return Object.freeze(r)}class Ue extends le{constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),this.coder=t,this.length=e}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){Array.isArray(e)||this._throwError("expected array value",e);let r=this.length;-1===r&&(r=e.length,t.writeValue(e.length)),Re.checkArgumentCount(e.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let t=0;t<e.length;t++)n.push(this.coder);return Be(t,n,e)}decode(t){let e=this.length;-1===e&&(e=t.readValue().toNumber(),32*e>t._data.length&&Re.throwError("insufficient data length",T.errors.BUFFER_OVERRUN,{length:t._data.length,count:e}));let r=[];for(let t=0;t<e;t++)r.push(new Oe(this.coder));return t.coerce(this.name,Le(t,r))}}class De extends le{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class Fe extends le{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=U(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class je extends Fe{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,G(super.decode(t)))}}class qe extends le{constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=U(e);return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)}decode(t){return t.coerce(this.name,G(t.readBytes(this.size)))}}class We extends le{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}const Ge="0x0000000000000000000000000000000000000000",He=st.from(-1),ze=st.from(0),Ve=st.from(1),Ke=st.from(2),$e=st.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Je="0x0000000000000000000000000000000000000000000000000000000000000000";class Ze extends le{constructor(t,e,r){const n=(e?"int":"uint")+8*t;super(n,n,r,!1),this.size=t,this.signed=e}defaultValue(){return 0}encode(t,e){let r=st.from(e),n=$e.mask(8*t.wordSize);if(this.signed){let t=n.mask(8*this.size-1);(r.gt(t)||r.lt(t.add(Ve).mul(He)))&&this._throwError("value out-of-bounds",e)}else(r.lt(ze)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(r)}decode(t){let e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)}}const Xe=new T("strings/5.5.0");var Ye,Qe;function tr(t,e,r,n,i){if(t===Qe.BAD_PREFIX||t===Qe.UNEXPECTED_CONTINUE){let t=0;for(let n=e+1;n<r.length&&r[n]>>6==2;n++)t++;return t}return t===Qe.OVERRUN?r.length-e-1:0}!function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(Ye||(Ye={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(Qe||(Qe={}));const er=Object.freeze({error:function(t,e,r,n,i){return Xe.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)},ignore:tr,replace:function(t,e,r,n,i){return t===Qe.OVERLONG?(n.push(i),0):(n.push(65533),tr(t,e,r))}});function rr(t,e){null==e&&(e=er.error),t=U(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7==0){r.push(i);continue}let s=null,o=null;if(192==(224&i))s=1,o=127;else if(224==(240&i))s=2,o=2047;else{if(240!=(248&i)){n+=e(128==(192&i)?Qe.UNEXPECTED_CONTINUE:Qe.BAD_PREFIX,n-1,t,r);continue}s=3,o=65535}if(n-1+s>=t.length){n+=e(Qe.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=t[n];if(128!=(192&i)){n+=e(Qe.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=e(Qe.OUT_OF_RANGE,n-1-s,t,r,a):a>=55296&&a<=57343?n+=e(Qe.UTF16_SURROGATE,n-1-s,t,r,a):a<=o?n+=e(Qe.OVERLONG,n-1-s,t,r,a):r.push(a))}return r}function nr(t,e=Ye.current){e!=Ye.current&&(Xe.checkNormalize(),t=t.normalize(e));let r=[];for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){e++;const i=t.charCodeAt(e);if(e>=t.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&n)<<10)+(1023&i);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return U(r)}function ir(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function sr(t){return t.map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}function or(t,e){return sr(rr(t,e))}function ar(t,e=Ye.current){return rr(nr(t,e))}function lr(t,e){e||(e=function(t){return[parseInt(t,16)]});let r=0,n={};return t.split(",").forEach((t=>{let i=t.split(":");r+=parseInt(i[0],16),n[r]=e(i[1])})),n}function hr(t){let e=0;return t.split(",").map((t=>{let r=t.split("-");1===r.length?r[1]="0":""===r[1]&&(r[1]="1");let n=e+parseInt(r[0],16);return e=parseInt(r[1],16),{l:n,h:e}}))}function cr(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)==0){if(i.e&&-1!==i.e.indexOf(t-r))continue;return i}}return null}const ur=hr("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),dr="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((t=>parseInt(t,16))),fr=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],pr=lr("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),gr=lr("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),mr=lr("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(t){if(t.length%4!=0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e})),yr=hr("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function wr(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=ar(t);var r;r=e.map((t=>{if(dr.indexOf(t)>=0)return[];if(t>=65024&&t<=65039)return[];let e=function(t){let e=cr(t,fr);if(e)return[t+e.s];let r=pr[t];if(r)return r;let n=gr[t];return n?[t+n[0]]:mr[t]||null}(t);return e||[t]})),e=r.reduce(((t,e)=>(e.forEach((e=>{t.push(e)})),t)),[]),e=ar(sr(e),Ye.NFKC),e.forEach((t=>{if(cr(t,yr))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),e.forEach((t=>{if(cr(t,ur))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));let n=sr(e);if("-"===n.substring(0,1)||"--"===n.substring(2,4)||"-"===n.substring(n.length-1))throw new Error("invalid hyphen");if(n.length>63)throw new Error("too long");return n}var vr=Object.freeze({__proto__:null,_toEscapedUtf8String:function(t,e){return'"'+rr(t,e).map((t=>{if(t<256){switch(t){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(t>=32&&t<127)return String.fromCharCode(t)}return t<=65535?ir(t):ir(55296+((t-=65536)>>10&1023))+ir(56320+(1023&t))})).join("")+'"'},toUtf8Bytes:nr,toUtf8CodePoints:ar,toUtf8String:or,Utf8ErrorFuncs:er,get Utf8ErrorReason(){return Qe},get UnicodeNormalizationForm(){return Ye},formatBytes32String:function(t){const e=nr(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return G(D([e,Je]).slice(0,32))},parseBytes32String:function(t){const e=U(t);if(32!==e.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==e[31])throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;0===e[r-1];)r--;return or(e.slice(0,r))},nameprep:wr});class br extends Fe{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,nr(e))}decode(t){return or(super.decode(t))}}class Er extends le{constructor(t,e){let r=!1;const n=[];t.forEach((t=>{t.dynamic&&(r=!0),n.push(t.type)}));super("tuple","tuple("+n.join(",")+")",e,r),this.coders=t}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach(((r,n)=>{let i=r.localName;i&&1===e[i]&&("length"===i&&(i="_length"),null==t[i]&&(t[i]=t[n]))})),Object.freeze(t)}encode(t,e){return Be(t,this.coders,e)}decode(t){return t.coerce(this.name,Le(t,this.coders))}}const _r=new T(Lt),Ar=new RegExp(/^bytes([0-9]*)$/),Sr=new RegExp(/^(u?int)([0-9]*)$/);class xr{constructor(t){_r.checkNew(new.target,xr),xt(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new Me(t.name);case"bool":return new De(t.name);case"string":return new br(t.name);case"bytes":return new je(t.name);case"array":return new Ue(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new Er((t.components||[]).map((t=>this._getCoder(t))),t.name);case"":return new We(t.name)}let e=t.type.match(Sr);if(e){let r=parseInt(e[2]||"256");return(0===r||r>256||r%8!=0)&&_r.throwArgumentError("invalid "+e[1]+" bit length","param",t),new Ze(r/8,"int"===e[1],t.name)}if(e=t.type.match(Ar),e){let r=parseInt(e[1]);return(0===r||r>32)&&_r.throwArgumentError("invalid bytes length","param",t),new qe(r,t.name)}return _r.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,e){return new ce(t,this._getWordSize(),this.coerceFunc,e)}_getWriter(){return new he(this._getWordSize())}getDefaultValue(t){const e=t.map((t=>this._getCoder(zt.from(t))));return new Er(e,"_").defaultValue()}encode(t,e){t.length!==e.length&&_r.throwError("types/values length mismatch",T.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});const r=t.map((t=>this._getCoder(zt.from(t)))),n=new Er(r,"_"),i=this._getWriter();return n.encode(i,e),i.data}decode(t,e,r){const n=t.map((t=>this._getCoder(zt.from(t))));return new Er(n,"_").decode(this._getReader(U(e),r))}}const kr=new xr;function Cr(t){return fe(nr(t))}const Pr="hash/5.5.0",Tr=new T(Pr),Nr=new Uint8Array(32);Nr.fill(0);const Ir=new RegExp("^((.*)\\.)?([^.]+)$");function Mr(t){"string"!=typeof t&&Tr.throwArgumentError("invalid ENS name; not a string","name",t);let e=t,r=Nr;for(;e.length;){const n=e.match(Ir);null!=n&&""!==n[2]||Tr.throwArgumentError("invalid ENS address; missing component","name",t);r=fe(D([r,fe(nr(wr(n[3])))])),e=n[2]||""}return G(r)}const Or="Ethereum Signed Message:\n";function Rr(t){return"string"==typeof t&&(t=nr(t)),fe(D([nr(Or),nr(String(t.length)),t]))}var Br=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const Lr=new T(Pr),Ur=new Uint8Array(32);Ur.fill(0);const Dr=st.from(-1),Fr=st.from(0),jr=st.from(1),qr=st.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Wr=J(jr.toHexString(),32),Gr=J(Fr.toHexString(),32),Hr={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},zr=["name","version","chainId","verifyingContract","salt"];function Vr(t){return function(e){return"string"!=typeof e&&Lr.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Kr={name:Vr("name"),version:Vr("version"),chainId:function(t){try{return st.from(t).toString()}catch(t){}return Lr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Te(t).toLowerCase()}catch(t){}return Lr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=U(t);if(32!==e.length)throw new Error("bad length");return G(e)}catch(t){}return Lr.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function $r(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=""===e[1],n=parseInt(e[2]||"256");(n%8!=0||n>256||e[2]&&e[2]!==String(n))&&Lr.throwArgumentError("invalid numeric width","type",t);const i=qr.mask(r?n-1:n),s=r?i.add(jr).mul(Dr):Fr;return function(e){const r=st.from(e);return(r.lt(s)||r.gt(i))&&Lr.throwArgumentError(`value out-of-bounds for ${t}`,"value",e),J(r.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(0===r||r>32||e[1]!==String(r))&&Lr.throwArgumentError("invalid bytes width","type",t),function(e){return U(e).length!==r&&Lr.throwArgumentError(`invalid length for ${t}`,"value",e),function(t){const e=U(t),r=e.length%32;return r?V([e,Ur.slice(r)]):G(e)}(e)}}}switch(t){case"address":return function(t){return J(Te(t),32)};case"bool":return function(t){return t?Wr:Gr};case"bytes":return function(t){return fe(t)};case"string":return function(t){return Cr(t)}}return null}function Jr(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class Zr{constructor(t){xt(this,"types",Object.freeze(Ot(t))),xt(this,"_encoderCache",{}),xt(this,"_types",{});const e={},r={},n={};Object.keys(t).forEach((t=>{e[t]={},r[t]=[],n[t]={}}));for(const n in t){const i={};t[n].forEach((s=>{i[s.name]&&Lr.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",t),i[s.name]=!0;const o=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===n&&Lr.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",t);$r(o)||(r[o]||Lr.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",t),r[o].push(n),e[n][o]=!0)}))}const i=Object.keys(r).filter((t=>0===r[t].length));0===i.length?Lr.throwArgumentError("missing primary type","types",t):i.length>1&&Lr.throwArgumentError(`ambiguous primary types or unused types: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),xt(this,"primaryType",i[0]),function i(s,o){o[s]&&Lr.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",t),o[s]=!0,Object.keys(e[s]).forEach((t=>{r[t]&&(i(t,o),Object.keys(o).forEach((e=>{n[e][t]=!0})))})),delete o[s]}(this.primaryType,{});for(const e in n){const r=Object.keys(n[e]);r.sort(),this._types[e]=Jr(e,t[e])+r.map((e=>Jr(e,t[e]))).join("")}}getEncoder(t){let e=this._encoderCache[t];return e||(e=this._encoderCache[t]=this._getEncoder(t)),e}_getEncoder(t){{const e=$r(t);if(e)return e}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1],r=this.getEncoder(t),n=parseInt(e[3]);return e=>{n>=0&&e.length!==n&&Lr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);let i=e.map(r);return this._types[t]&&(i=i.map(fe)),fe(V(i))}}const r=this.types[t];if(r){const e=Cr(this._types[t]);return t=>{const n=r.map((({name:e,type:r})=>{const n=this.getEncoder(r)(t[e]);return this._types[r]?fe(n):n}));return n.unshift(e),V(n)}}return Lr.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){const e=this._types[t];return e||Lr.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return fe(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if($r(t))return r(t,e);const n=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const t=n[1],i=parseInt(n[3]);return i>=0&&e.length!==i&&Lr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e),e.map((e=>this._visit(t,e,r)))}const i=this.types[t];return i?i.reduce(((t,{name:n,type:i})=>(t[n]=this._visit(i,e[n],r),t)),{}):Lr.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new Zr(t)}static getPrimaryType(t){return Zr.from(t).primaryType}static hashStruct(t,e,r){return Zr.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){const n=Hr[r];n||Lr.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:n})}return e.sort(((t,e)=>zr.indexOf(t.name)-zr.indexOf(e.name))),Zr.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return V(["0x1901",Zr.hashDomain(t),Zr.from(e).hash(r)])}static hash(t,e,r){return fe(Zr.encode(t,e,r))}static resolveNames(t,e,r,n){return Br(this,void 0,void 0,(function*(){t=Tt(t);const i={};t.verifyingContract&&!q(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const s=Zr.from(e);s.visit(r,((t,e)=>("address"!==t||q(e,20)||(i[e]="0x"),e)));for(const t in i)i[t]=yield n(t);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),r=s.visit(r,((t,e)=>"address"===t&&i[e]?i[e]:e)),{domain:t,value:r}}))}static getPayload(t,e,r){Zr.hashDomain(t);const n={},i=[];zr.forEach((e=>{const r=t[e];null!=r&&(n[e]=Kr[e](r),i.push({name:e,type:Hr[e]}))}));const s=Zr.from(e),o=Tt(e);return o.EIP712Domain?Lr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",e):o.EIP712Domain=i,s.encode(r),{types:o,domain:n,primaryType:s.primaryType,message:s.visit(r,((t,e)=>{if(t.match(/^bytes(\d*)/))return G(U(e));if(t.match(/^u?int/))return st.from(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return"string"!=typeof e&&Lr.throwArgumentError("invalid string","value",e),e}return Lr.throwArgumentError("unsupported type","type",t)}))}}}var Xr=Object.freeze({__proto__:null,id:Cr,namehash:Mr,isValidName:function(t){try{const e=t.split(".");for(let t=0;t<e.length;t++)if(0===wr(e[t]).length)throw new Error("empty");return!0}catch(t){}return!1},messagePrefix:Or,hashMessage:Rr,_TypedDataEncoder:Zr});const Yr=new T(Lt);class Qr extends Rt{}class tn extends Rt{}class en extends Rt{}class rn extends Rt{static isIndexed(t){return!(!t||!t._isIndexed)}}const nn={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function sn(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class on{constructor(t){Yr.checkNew(new.target,on);let e=[];e="string"==typeof t?JSON.parse(t):t,xt(this,"fragments",e.map((t=>Kt.from(t))).filter((t=>null!=t))),xt(this,"_abiCoder",kt(new.target,"getAbiCoder")()),xt(this,"functions",{}),xt(this,"errors",{}),xt(this,"events",{}),xt(this,"structs",{}),this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":return this.deploy?void Yr.warn("duplicate definition - constructor"):void xt(this,"deploy",t);case"function":e=this.functions;break;case"event":e=this.events;break;case"error":e=this.errors;break;default:return}let r=t.format();e[r]?Yr.warn("duplicate definition - "+r):e[r]=t})),this.deploy||xt(this,"deploy",Yt.from({payable:!1,type:"constructor"})),xt(this,"_isInterface",!0)}format(t){t||(t=Gt.full),t===Gt.sighash&&Yr.throwArgumentError("interface does not support formatting sighash","format",t);const e=this.fragments.map((e=>e.format(t)));return t===Gt.json?JSON.stringify(e.map((t=>JSON.parse(t)))):e}static getAbiCoder(){return kr}static getAddress(t){return Te(t)}static getSighash(t){return z(Cr(t.format()),0,4)}static getEventTopic(t){return Cr(t.format())}getFunction(t){if(q(t)){for(const e in this.functions)if(t===this.getSighash(e))return this.functions[e];Yr.throwArgumentError("no matching function","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));return 0===r.length?Yr.throwArgumentError("no matching function","name",e):r.length>1&&Yr.throwArgumentError("multiple matching functions","name",e),this.functions[r[0]]}const e=this.functions[Qt.fromString(t).format()];return e||Yr.throwArgumentError("no matching function","signature",t),e}getEvent(t){if(q(t)){const e=t.toLowerCase();for(const t in this.events)if(e===this.getEventTopic(t))return this.events[t];Yr.throwArgumentError("no matching event","topichash",e)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.events).filter((t=>t.split("(")[0]===e));return 0===r.length?Yr.throwArgumentError("no matching event","name",e):r.length>1&&Yr.throwArgumentError("multiple matching events","name",e),this.events[r[0]]}const e=this.events[$t.fromString(t).format()];return e||Yr.throwArgumentError("no matching event","signature",t),e}getError(t){if(q(t)){const e=kt(this.constructor,"getSighash");for(const r in this.errors){if(t===e(this.errors[r]))return this.errors[r]}Yr.throwArgumentError("no matching error","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.errors).filter((t=>t.split("(")[0]===e));return 0===r.length?Yr.throwArgumentError("no matching error","name",e):r.length>1&&Yr.throwArgumentError("multiple matching errors","name",e),this.errors[r[0]]}const e=this.errors[Qt.fromString(t).format()];return e||Yr.throwArgumentError("no matching error","signature",t),e}getSighash(t){if("string"==typeof t)try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(t){throw e}}return kt(this.constructor,"getSighash")(t)}getEventTopic(t){return"string"==typeof t&&(t=this.getEvent(t)),kt(this.constructor,"getEventTopic")(t)}_decodeParams(t,e){return this._abiCoder.decode(t,e)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){"string"==typeof t&&(t=this.getError(t));const r=U(e);return G(r.slice(0,4))!==this.getSighash(t)&&Yr.throwArgumentError(`data signature does not match error ${t.name}.`,"data",G(r)),this._decodeParams(t.inputs,r.slice(4))}encodeErrorResult(t,e){return"string"==typeof t&&(t=this.getError(t)),G(D([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionData(t,e){"string"==typeof t&&(t=this.getFunction(t));const r=U(e);return G(r.slice(0,4))!==this.getSighash(t)&&Yr.throwArgumentError(`data signature does not match function ${t.name}.`,"data",G(r)),this._decodeParams(t.inputs,r.slice(4))}encodeFunctionData(t,e){return"string"==typeof t&&(t=this.getFunction(t)),G(D([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,e){"string"==typeof t&&(t=this.getFunction(t));let r=U(e),n=null,i=null,s=null,o=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,r)}catch(t){}break;case 4:{const t=G(r.slice(0,4)),e=nn[t];if(e)i=this._abiCoder.decode(e.inputs,r.slice(4)),s=e.name,o=e.signature,e.reason&&(n=i[0]);else try{const e=this.getError(t);i=this._abiCoder.decode(e.inputs,r.slice(4)),s=e.name,o=e.format()}catch(t){console.log(t)}break}}return Yr.throwError("call revert exception",T.errors.CALL_EXCEPTION,{method:t.format(),errorArgs:i,errorName:s,errorSignature:o,reason:n})}encodeFunctionResult(t,e){return"string"==typeof t&&(t=this.getFunction(t)),G(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){"string"==typeof t&&(t=this.getEvent(t)),e.length>t.inputs.length&&Yr.throwError("too many arguments for "+t.format(),T.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e});let r=[];t.anonymous||r.push(this.getEventTopic(t));const n=(t,e)=>"string"===t.type?Cr(e):"bytes"===t.type?fe(G(e)):("address"===t.type&&this._abiCoder.encode(["address"],[e]),J(G(e),32));for(e.forEach(((e,i)=>{let s=t.inputs[i];s.indexed?null==e?r.push(null):"array"===s.baseType||"tuple"===s.baseType?Yr.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,e):Array.isArray(e)?r.push(e.map((t=>n(s,t)))):r.push(n(s,e)):null!=e&&Yr.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){"string"==typeof t&&(t=this.getEvent(t));const r=[],n=[],i=[];return t.anonymous||r.push(this.getEventTopic(t)),e.length!==t.inputs.length&&Yr.throwArgumentError("event arguments/values mismatch","values",e),t.inputs.forEach(((t,s)=>{const o=e[s];if(t.indexed)if("string"===t.type)r.push(Cr(o));else if("bytes"===t.type)r.push(fe(o));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([t.type],[o]))}else n.push(t),i.push(o)})),{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(t,e,r){if("string"==typeof t&&(t=this.getEvent(t)),null!=r&&!t.anonymous){let e=this.getEventTopic(t);q(r[0],32)&&r[0].toLowerCase()===e||Yr.throwError("fragment/topic mismatch",T.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:e,value:r[0]}),r=r.slice(1)}let n=[],i=[],s=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(n.push(zt.fromObject({type:"bytes32",name:t.name})),s.push(!0)):(n.push(t),s.push(!1)):(i.push(t),s.push(!1))}));let o=null!=r?this._abiCoder.decode(n,D(r)):null,a=this._abiCoder.decode(i,e,!0),l=[],h=0,c=0;t.inputs.forEach(((t,e)=>{if(t.indexed)if(null==o)l[e]=new rn({_isIndexed:!0,hash:null});else if(s[e])l[e]=new rn({_isIndexed:!0,hash:o[c++]});else try{l[e]=o[c++]}catch(t){l[e]=t}else try{l[e]=a[h++]}catch(t){l[e]=t}if(t.name&&null==l[t.name]){const r=l[e];r instanceof Error?Object.defineProperty(l,t.name,{enumerable:!0,get:()=>{throw sn(`property ${JSON.stringify(t.name)}`,r)}}):l[t.name]=r}}));for(let t=0;t<l.length;t++){const e=l[t];e instanceof Error&&Object.defineProperty(l,t,{enumerable:!0,get:()=>{throw sn(`index ${t}`,e)}})}return Object.freeze(l)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());return e?new tn({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:st.from(t.value||"0")}):null}parseLog(t){let e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Qr({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}parseError(t){const e=G(t);let r=this.getError(e.substring(0,10).toLowerCase());return r?new en({args:this._abiCoder.decode(r.inputs,"0x"+e.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(t){return!(!t||!t._isInterface)}}var an=Object.freeze({__proto__:null,ConstructorFragment:Yt,ErrorFragment:ee,EventFragment:$t,Fragment:Kt,FunctionFragment:Qt,ParamType:zt,FormatTypes:Gt,AbiCoder:xr,defaultAbiCoder:kr,Interface:on,Indexed:rn,checkResultErrors:ae,LogDescription:Qr,TransactionDescription:tn});var ln=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const hn=new T("abstract-provider/5.5.1");class cn extends Rt{static isForkEvent(t){return!(!t||!t._isForkEvent)}}class un{constructor(){hn.checkAbstract(new.target,un),xt(this,"_isProvider",!0)}getFeeData(){return ln(this,void 0,void 0,(function*(){const{block:t,gasPrice:e}=yield Ct({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((t=>null))});let r=null,n=null;return t&&t.baseFeePerGas&&(n=st.from("2500000000"),r=t.baseFeePerGas.mul(2).add(n)),{maxFeePerGas:r,maxPriorityFeePerGas:n,gasPrice:e}}))}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}static isProvider(t){return!(!t||!t._isProvider)}}var dn=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const fn=new T("abstract-signer/5.5.0"),pn=["accessList","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],gn=[T.errors.INSUFFICIENT_FUNDS,T.errors.NONCE_EXPIRED,T.errors.REPLACEMENT_UNDERPRICED];class mn{constructor(){fn.checkAbstract(new.target,mn),xt(this,"_isSigner",!0)}getBalance(t){return dn(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)}))}getTransactionCount(t){return dn(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)}))}estimateGas(t){return dn(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const e=yield Ct(this.checkTransaction(t));return yield this.provider.estimateGas(e)}))}call(t,e){return dn(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield Ct(this.checkTransaction(t));return yield this.provider.call(r,e)}))}sendTransaction(t){return dn(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const e=yield this.populateTransaction(t),r=yield this.signTransaction(e);return yield this.provider.sendTransaction(r)}))}getChainId(){return dn(this,void 0,void 0,(function*(){this._checkProvider("getChainId");return(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return dn(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return dn(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(t){return dn(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)}))}checkTransaction(t){for(const e in t)-1===pn.indexOf(e)&&fn.throwArgumentError("invalid transaction key: "+e,"transaction",t);const e=Tt(t);return null==e.from?e.from=this.getAddress():e.from=Promise.all([Promise.resolve(e.from),this.getAddress()]).then((e=>(e[0].toLowerCase()!==e[1].toLowerCase()&&fn.throwArgumentError("from address mismatch","transaction",t),e[0]))),e}populateTransaction(t){return dn(this,void 0,void 0,(function*(){const e=yield Ct(this.checkTransaction(t));null!=e.to&&(e.to=Promise.resolve(e.to).then((t=>dn(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.resolveName(t);return null==e&&fn.throwArgumentError("provided ENS name resolves to null","tx.to",t),e})))),e.to.catch((t=>{})));const r=null!=e.maxFeePerGas||null!=e.maxPriorityFeePerGas;if(null==e.gasPrice||2!==e.type&&!r?0!==e.type&&1!==e.type||!r||fn.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t):fn.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t),2!==e.type&&null!=e.type||null==e.maxFeePerGas||null==e.maxPriorityFeePerGas)if(0===e.type||1===e.type)null==e.gasPrice&&(e.gasPrice=this.getGasPrice());else{const t=yield this.getFeeData();if(null==e.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(e.type=2,null!=e.gasPrice){const t=e.gasPrice;delete e.gasPrice,e.maxFeePerGas=t,e.maxPriorityFeePerGas=t}else null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(r&&fn.throwError("network does not support EIP-1559",T.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==e.gasPrice&&(e.gasPrice=t.gasPrice),e.type=0):fn.throwError("failed to get consistent fee data",T.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===e.type&&(null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else e.type=2;return null==e.nonce&&(e.nonce=this.getTransactionCount("pending")),null==e.gasLimit&&(e.gasLimit=this.estimateGas(e).catch((t=>{if(gn.indexOf(t.code)>=0)throw t;return fn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",T.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:e})}))),null==e.chainId?e.chainId=this.getChainId():e.chainId=Promise.all([Promise.resolve(e.chainId),this.getChainId()]).then((e=>(0!==e[1]&&e[0]!==e[1]&&fn.throwArgumentError("chainId address mismatch","transaction",t),e[0]))),yield Ct(e)}))}_checkProvider(t){this.provider||fn.throwError("missing provider",T.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!(!t||!t._isSigner)}}class yn extends mn{constructor(t,e){fn.checkNew(new.target,yn),super(),xt(this,"address",t),xt(this,"provider",e||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,e){return Promise.resolve().then((()=>{fn.throwError(t,T.errors.UNSUPPORTED_OPERATION,{operation:e})}))}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,e,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new yn(this.address,t)}}var wn=vn;function vn(t,e){if(!t)throw new Error(e||"Assertion failed")}function bn(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function En(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function _n(t){return 1===t.length?"0"+t:t}function An(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}vn.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var Sn={inherits:d((function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),toArray:function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):bn(t,i)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},toHex:function(t){for(var e="",r=0;r<t.length;r++)e+=_n(t[r].toString(16));return e},htonl:En,toHex32:function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=En(i)),r+=An(i.toString(16))}return r},zero2:_n,zero8:An,join32:function(t,e,r,n){var i=r-e;wn(i%4==0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var l;l="big"===n?t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=l>>>0}return s},split32:function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];"big"===e?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},rotr32:function(t,e){return t>>>e|t<<32-e},rotl32:function(t,e){return t<<e|t>>>32-e},sum32:function(t,e){return t+e>>>0},sum32_3:function(t,e,r){return t+e+r>>>0},sum32_4:function(t,e,r,n){return t+e+r+n>>>0},sum32_5:function(t,e,r,n,i){return t+e+r+n+i>>>0},sum64:function(t,e,r,n){var i=t[e],s=n+t[e+1]>>>0,o=(s<n?1:0)+r+i;t[e]=o>>>0,t[e+1]=s},sum64_hi:function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},sum64_lo:function(t,e,r,n){return e+n>>>0},sum64_4_hi:function(t,e,r,n,i,s,o,a){var l=0,h=e;return l+=(h=h+n>>>0)<e?1:0,l+=(h=h+s>>>0)<s?1:0,t+r+i+o+(l+=(h=h+a>>>0)<a?1:0)>>>0},sum64_4_lo:function(t,e,r,n,i,s,o,a){return e+n+s+a>>>0},sum64_5_hi:function(t,e,r,n,i,s,o,a,l,h){var c=0,u=e;return c+=(u=u+n>>>0)<e?1:0,c+=(u=u+s>>>0)<s?1:0,c+=(u=u+a>>>0)<a?1:0,t+r+i+o+l+(c+=(u=u+h>>>0)<h?1:0)>>>0},sum64_5_lo:function(t,e,r,n,i,s,o,a,l,h){return e+n+s+a+h>>>0},rotr64_hi:function(t,e,r){return(e<<32-r|t>>>r)>>>0},rotr64_lo:function(t,e,r){return(t<<32-r|e>>>r)>>>0},shr64_hi:function(t,e,r){return t>>>r},shr64_lo:function(t,e,r){return(t<<32-r|e>>>r)>>>0}};function xn(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var kn=xn;xn.prototype.update=function(t,e){if(t=Sn.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=Sn.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},xn.prototype.digest=function(t){return this.update(this._pad()),wn(null===this.pending),this._digest(t)},xn.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n};var Cn={BlockHash:kn},Pn=Sn.rotr32;var Tn=function(t,e,r,n){return 0===t?Nn(e,r,n):1===t||3===t?Mn(e,r,n):2===t?In(e,r,n):void 0};function Nn(t,e,r){return t&e^~t&r}function In(t,e,r){return t&e^t&r^e&r}function Mn(t,e,r){return t^e^r}var On=function(t){return Pn(t,2)^Pn(t,13)^Pn(t,22)};var Rn=function(t){return Pn(t,6)^Pn(t,11)^Pn(t,25)};var Bn=function(t){return Pn(t,7)^Pn(t,18)^t>>>3};var Ln=function(t){return Pn(t,17)^Pn(t,19)^t>>>10},Un={ft_1:Tn,ch32:Nn,maj32:In,p32:Mn,s0_256:On,s1_256:Rn,g0_256:Bn,g1_256:Ln},Dn=Sn.rotl32,Fn=Sn.sum32,jn=Sn.sum32_5,qn=Un.ft_1,Wn=Cn.BlockHash,Gn=[1518500249,1859775393,2400959708,3395469782];function Hn(){if(!(this instanceof Hn))return new Hn;Wn.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Sn.inherits(Hn,Wn);var zn=Hn;Hn.blockSize=512,Hn.outSize=160,Hn.hmacStrength=80,Hn.padLength=64,Hn.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=Dn(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4];for(n=0;n<r.length;n++){var h=~~(n/20),c=jn(Dn(i,5),qn(h,s,o,a),l,r[n],Gn[h]);l=a,a=o,o=Dn(s,30),s=i,i=c}this.h[0]=Fn(this.h[0],i),this.h[1]=Fn(this.h[1],s),this.h[2]=Fn(this.h[2],o),this.h[3]=Fn(this.h[3],a),this.h[4]=Fn(this.h[4],l)},Hn.prototype._digest=function(t){return"hex"===t?Sn.toHex32(this.h,"big"):Sn.split32(this.h,"big")};var Vn=Sn.sum32,Kn=Sn.sum32_4,$n=Sn.sum32_5,Jn=Un.ch32,Zn=Un.maj32,Xn=Un.s0_256,Yn=Un.s1_256,Qn=Un.g0_256,ti=Un.g1_256,ei=Cn.BlockHash,ri=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ni(){if(!(this instanceof ni))return new ni;ei.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ri,this.W=new Array(64)}Sn.inherits(ni,ei);var ii=ni;function si(){if(!(this instanceof si))return new si;ii.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}ni.blockSize=512,ni.outSize=256,ni.hmacStrength=192,ni.padLength=64,ni.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=Kn(ti(r[n-2]),r[n-7],Qn(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],h=this.h[5],c=this.h[6],u=this.h[7];for(wn(this.k.length===r.length),n=0;n<r.length;n++){var d=$n(u,Yn(l),Jn(l,h,c),this.k[n],r[n]),f=Vn(Xn(i),Zn(i,s,o));u=c,c=h,h=l,l=Vn(a,d),a=o,o=s,s=i,i=Vn(d,f)}this.h[0]=Vn(this.h[0],i),this.h[1]=Vn(this.h[1],s),this.h[2]=Vn(this.h[2],o),this.h[3]=Vn(this.h[3],a),this.h[4]=Vn(this.h[4],l),this.h[5]=Vn(this.h[5],h),this.h[6]=Vn(this.h[6],c),this.h[7]=Vn(this.h[7],u)},ni.prototype._digest=function(t){return"hex"===t?Sn.toHex32(this.h,"big"):Sn.split32(this.h,"big")},Sn.inherits(si,ii);var oi=si;si.blockSize=512,si.outSize=224,si.hmacStrength=192,si.padLength=64,si.prototype._digest=function(t){return"hex"===t?Sn.toHex32(this.h.slice(0,7),"big"):Sn.split32(this.h.slice(0,7),"big")};var ai=Sn.rotr64_hi,li=Sn.rotr64_lo,hi=Sn.shr64_hi,ci=Sn.shr64_lo,ui=Sn.sum64,di=Sn.sum64_hi,fi=Sn.sum64_lo,pi=Sn.sum64_4_hi,gi=Sn.sum64_4_lo,mi=Sn.sum64_5_hi,yi=Sn.sum64_5_lo,wi=Cn.BlockHash,vi=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function bi(){if(!(this instanceof bi))return new bi;wi.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=vi,this.W=new Array(160)}Sn.inherits(bi,wi);var Ei=bi;function _i(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function Ai(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function Si(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function xi(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function ki(t,e){var r=ai(t,e,28)^ai(e,t,2)^ai(e,t,7);return r<0&&(r+=4294967296),r}function Ci(t,e){var r=li(t,e,28)^li(e,t,2)^li(e,t,7);return r<0&&(r+=4294967296),r}function Pi(t,e){var r=ai(t,e,14)^ai(t,e,18)^ai(e,t,9);return r<0&&(r+=4294967296),r}function Ti(t,e){var r=li(t,e,14)^li(t,e,18)^li(e,t,9);return r<0&&(r+=4294967296),r}function Ni(t,e){var r=ai(t,e,1)^ai(t,e,8)^hi(t,e,7);return r<0&&(r+=4294967296),r}function Ii(t,e){var r=li(t,e,1)^li(t,e,8)^ci(t,e,7);return r<0&&(r+=4294967296),r}function Mi(t,e){var r=ai(t,e,19)^ai(e,t,29)^hi(t,e,6);return r<0&&(r+=4294967296),r}function Oi(t,e){var r=li(t,e,19)^li(e,t,29)^ci(t,e,6);return r<0&&(r+=4294967296),r}function Ri(){if(!(this instanceof Ri))return new Ri;Ei.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}bi.blockSize=1024,bi.outSize=512,bi.hmacStrength=192,bi.padLength=128,bi.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=Mi(r[n-4],r[n-3]),s=Oi(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],l=Ni(r[n-30],r[n-29]),h=Ii(r[n-30],r[n-29]),c=r[n-32],u=r[n-31];r[n]=pi(i,s,o,a,l,h,c,u),r[n+1]=gi(i,s,o,a,l,h,c,u)}},bi.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],l=this.h[5],h=this.h[6],c=this.h[7],u=this.h[8],d=this.h[9],f=this.h[10],p=this.h[11],g=this.h[12],m=this.h[13],y=this.h[14],w=this.h[15];wn(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var b=y,E=w,_=Pi(u,d),A=Ti(u,d),S=_i(u,d,f,p,g),x=Ai(u,d,f,p,g,m),k=this.k[v],C=this.k[v+1],P=r[v],T=r[v+1],N=mi(b,E,_,A,S,x,k,C,P,T),I=yi(b,E,_,A,S,x,k,C,P,T);b=ki(n,i),E=Ci(n,i),_=Si(n,i,s,o,a),A=xi(n,i,s,o,a,l);var M=di(b,E,_,A),O=fi(b,E,_,A);y=g,w=m,g=f,m=p,f=u,p=d,u=di(h,c,N,I),d=fi(c,c,N,I),h=a,c=l,a=s,l=o,s=n,o=i,n=di(N,I,M,O),i=fi(N,I,M,O)}ui(this.h,0,n,i),ui(this.h,2,s,o),ui(this.h,4,a,l),ui(this.h,6,h,c),ui(this.h,8,u,d),ui(this.h,10,f,p),ui(this.h,12,g,m),ui(this.h,14,y,w)},bi.prototype._digest=function(t){return"hex"===t?Sn.toHex32(this.h,"big"):Sn.split32(this.h,"big")},Sn.inherits(Ri,Ei);var Bi=Ri;Ri.blockSize=1024,Ri.outSize=384,Ri.hmacStrength=192,Ri.padLength=128,Ri.prototype._digest=function(t){return"hex"===t?Sn.toHex32(this.h.slice(0,12),"big"):Sn.split32(this.h.slice(0,12),"big")};var Li={sha1:zn,sha224:oi,sha256:ii,sha384:Bi,sha512:Ei},Ui=Sn.rotl32,Di=Sn.sum32,Fi=Sn.sum32_3,ji=Sn.sum32_4,qi=Cn.BlockHash;function Wi(){if(!(this instanceof Wi))return new Wi;qi.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Sn.inherits(Wi,qi);var Gi=Wi;function Hi(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function zi(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Vi(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}Wi.blockSize=512,Wi.outSize=160,Wi.hmacStrength=192,Wi.padLength=64,Wi.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],s=this.h[3],o=this.h[4],a=r,l=n,h=i,c=s,u=o,d=0;d<80;d++){var f=Di(Ui(ji(r,Hi(d,n,i,s),t[Ki[d]+e],zi(d)),Ji[d]),o);r=o,o=s,s=Ui(i,10),i=n,n=f,f=Di(Ui(ji(a,Hi(79-d,l,h,c),t[$i[d]+e],Vi(d)),Zi[d]),u),a=u,u=c,c=Ui(h,10),h=l,l=f}f=Fi(this.h[1],i,c),this.h[1]=Fi(this.h[2],s,u),this.h[2]=Fi(this.h[3],o,a),this.h[3]=Fi(this.h[4],r,l),this.h[4]=Fi(this.h[0],n,h),this.h[0]=f},Wi.prototype._digest=function(t){return"hex"===t?Sn.toHex32(this.h,"little"):Sn.split32(this.h,"little")};var Ki=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],$i=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ji=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Zi=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Xi={ripemd160:Gi};function Yi(t,e,r){if(!(this instanceof Yi))return new Yi(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Sn.toArray(e,r))}var Qi=Yi;Yi.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),wn(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},Yi.prototype.update=function(t,e){return this.inner.update(t,e),this},Yi.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};var ts=d((function(t,e){var r=e;r.utils=Sn,r.common=Cn,r.sha=Li,r.ripemd=Xi,r.hmac=Qi,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160})),es=ts;function rs(t,e,r){return r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},t(r,r.exports),r.exports}var ns=is;function is(t,e){if(!t)throw new Error(e||"Assertion failed")}is.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var ss=rs((function(t,e){var r=e;function n(t){return 1===t.length?"0"+t:t}function i(t){for(var e="",r=0;r<t.length;r++)e+=n(t[r].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}return r},r.zero2=n,r.toHex=i,r.encode=function(t,e){return"hex"===e?i(t):t}})),os=rs((function(t,e){var r=e;r.assert=ns,r.toArray=ss.toArray,r.zero2=ss.zero2,r.toHex=ss.toHex,r.encode=ss.encode,r.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,s=t.clone(),o=0;o<n.length;o++){var a,l=s.andln(i-1);s.isOdd()?(a=l>(i>>1)-1?(i>>1)-l:l,s.isubn(a)):a=0,n[o]=a,s.iushrn(1)}return n},r.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,s=0;t.cmpn(-i)>0||e.cmpn(-s)>0;){var o,a,l=t.andln(3)+i&3,h=e.andln(3)+s&3;3===l&&(l=-1),3===h&&(h=-1),o=0==(1&l)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==h?l:-l,r[0].push(o),a=0==(1&h)?0:3!==(n=e.andln(7)+s&7)&&5!==n||2!==l?h:-h,r[1].push(a),2*i===o+1&&(i=1-i),2*s===a+1&&(s=1-s),t.iushrn(1),e.iushrn(1)}return r},r.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new v(t,"hex","le")}})),as=os.getNAF,ls=os.getJSF,hs=os.assert;function cs(t,e){this.type=t,this.p=new v(e.p,16),this.red=e.prime?v.red(e.prime):v.mont(this.p),this.zero=new v(0).toRed(this.red),this.one=new v(1).toRed(this.red),this.two=new v(2).toRed(this.red),this.n=e.n&&new v(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var us=cs;function ds(t,e){this.curve=t,this.type=e,this.precomputed=null}cs.prototype.point=function(){throw new Error("Not implemented")},cs.prototype.validate=function(){throw new Error("Not implemented")},cs.prototype._fixedNafMul=function(t,e){hs(t.precomputed);var r=t._getDoubles(),n=as(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var s,o,a=[];for(s=0;s<n.length;s+=r.step){o=0;for(var l=s+r.step-1;l>=s;l--)o=(o<<1)+n[l];a.push(o)}for(var h=this.jpoint(null,null,null),c=this.jpoint(null,null,null),u=i;u>0;u--){for(s=0;s<a.length;s++)(o=a[s])===u?c=c.mixedAdd(r.points[s]):o===-u&&(c=c.mixedAdd(r.points[s].neg()));h=h.add(c)}return h.toP()},cs.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=as(e,r,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var l=0;a>=0&&0===s[a];a--)l++;if(a>=0&&l++,o=o.dblp(l),a<0)break;var h=s[a];hs(0!==h),o="affine"===t.type?h>0?o.mixedAdd(i[h-1>>1]):o.mixedAdd(i[-h-1>>1].neg()):h>0?o.add(i[h-1>>1]):o.add(i[-h-1>>1].neg())}return"affine"===t.type?o.toP():o},cs.prototype._wnafMulAdd=function(t,e,r,n,i){var s,o,a,l=this._wnafT1,h=this._wnafT2,c=this._wnafT3,u=0;for(s=0;s<n;s++){var d=(a=e[s])._getNAFPoints(t);l[s]=d.wnd,h[s]=d.points}for(s=n-1;s>=1;s-=2){var f=s-1,p=s;if(1===l[f]&&1===l[p]){var g=[e[f],null,null,e[p]];0===e[f].y.cmp(e[p].y)?(g[1]=e[f].add(e[p]),g[2]=e[f].toJ().mixedAdd(e[p].neg())):0===e[f].y.cmp(e[p].y.redNeg())?(g[1]=e[f].toJ().mixedAdd(e[p]),g[2]=e[f].add(e[p].neg())):(g[1]=e[f].toJ().mixedAdd(e[p]),g[2]=e[f].toJ().mixedAdd(e[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=ls(r[f],r[p]);for(u=Math.max(y[0].length,u),c[f]=new Array(u),c[p]=new Array(u),o=0;o<u;o++){var w=0|y[0][o],v=0|y[1][o];c[f][o]=m[3*(w+1)+(v+1)],c[p][o]=0,h[f]=g}}else c[f]=as(r[f],l[f],this._bitLength),c[p]=as(r[p],l[p],this._bitLength),u=Math.max(c[f].length,u),u=Math.max(c[p].length,u)}var b=this.jpoint(null,null,null),E=this._wnafT4;for(s=u;s>=0;s--){for(var _=0;s>=0;){var A=!0;for(o=0;o<n;o++)E[o]=0|c[o][s],0!==E[o]&&(A=!1);if(!A)break;_++,s--}if(s>=0&&_++,b=b.dblp(_),s<0)break;for(o=0;o<n;o++){var S=E[o];0!==S&&(S>0?a=h[o][S-1>>1]:S<0&&(a=h[o][-S-1>>1].neg()),b="affine"===a.type?b.mixedAdd(a):b.add(a))}}for(s=0;s<n;s++)h[s]=null;return i?b:b.toP()},cs.BasePoint=ds,ds.prototype.eq=function(){throw new Error("Not implemented")},ds.prototype.validate=function(){return this.curve.validate(this)},cs.prototype.decodePoint=function(t,e){t=os.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?hs(t[t.length-1]%2==0):7===t[0]&&hs(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},ds.prototype.encodeCompressed=function(t){return this.encode(t,!0)},ds.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},ds.prototype.encode=function(t,e){return os.encode(this._encode(e),t)},ds.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},ds.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},ds.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var s=0;s<t;s++)n=n.dbl();r.push(n)}return{step:t,points:r}},ds.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},ds.prototype._getBeta=function(){return null},ds.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var fs=rs((function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),ps=os.assert;function gs(t){us.call(this,"short",t),this.a=new v(t.a,16).toRed(this.red),this.b=new v(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}fs(gs,us);var ms=gs;function ys(t,e,r,n){us.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new v(e,16),this.y=new v(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function ws(t,e,r,n){us.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new v(0)):(this.x=new v(e,16),this.y=new v(r,16),this.z=new v(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}gs.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new v(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new v(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?r=i[0]:(r=i[1],ps(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new v(t.a,16),b:new v(t.b,16)}})):this._getEndoBasis(r)}}},gs.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:v.mont(t),r=new v(2).toRed(e).redInvm(),n=r.redNeg(),i=new v(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},gs.prototype._getEndoBasis=function(t){for(var e,r,n,i,s,o,a,l,h,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=t,d=this.n.clone(),f=new v(1),p=new v(0),g=new v(0),m=new v(1),y=0;0!==u.cmpn(0);){var w=d.div(u);l=d.sub(w.mul(u)),h=g.sub(w.mul(f));var b=m.sub(w.mul(p));if(!n&&l.cmp(c)<0)e=a.neg(),r=f,n=l.neg(),i=h;else if(n&&2==++y)break;a=l,d=u,u=l,g=f,f=h,m=p,p=b}s=l.neg(),o=h;var E=n.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(E)>=0&&(s=e,o=r),n.negative&&(n=n.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:n,b:i},{a:s,b:o}]},gs.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),s=r.b.neg().mul(t).divRound(this.n),o=i.mul(r.a),a=s.mul(n.a),l=i.mul(r.b),h=s.mul(n.b);return{k1:t.sub(o).sub(a),k2:l.add(h).neg()}},gs.prototype.pointFromX=function(t,e){(t=new v(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},gs.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},gs.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(e[s]),a=t[s],l=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),l=l.neg(!0)),n[2*s]=a,n[2*s+1]=l,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var h=this._wnafMulAdd(1,n,i,2*s,r),c=0;c<2*s;c++)n[c]=null,i[c]=null;return h},fs(ys,us.BasePoint),gs.prototype.point=function(t,e,r){return new ys(this,t,e,r)},gs.prototype.pointFromJSON=function(t,e){return ys.fromJSON(this,t,e)},ys.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},ys.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},ys.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var s=e[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},ys.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},ys.prototype.isInfinity=function(){return this.inf},ys.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},ys.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},ys.prototype.getX=function(){return this.x.fromRed()},ys.prototype.getY=function(){return this.y.fromRed()},ys.prototype.mul=function(t){return t=new v(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},ys.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},ys.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},ys.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},ys.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},ys.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},fs(ws,us.BasePoint),gs.prototype.jpoint=function(t,e,r){return new ws(this,t,e,r)},ws.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},ws.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},ws.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),s=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),l=s.redSub(o);if(0===a.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),c=h.redMul(a),u=n.redMul(h),d=l.redSqr().redIAdd(c).redISub(u).redISub(u),f=l.redMul(u.redISub(d)).redISub(s.redMul(c)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(d,f,p)},ws.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,s=t.y.redMul(e).redMul(this.z),o=r.redSub(n),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=o.redSqr(),h=l.redMul(o),c=r.redMul(l),u=a.redSqr().redIAdd(h).redISub(c).redISub(c),d=a.redMul(c.redISub(u)).redISub(i.redMul(h)),f=this.z.redMul(o);return this.curve.jpoint(u,d,f)},ws.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,l=a.redSqr().redSqr(),h=o.redAdd(o);for(e=0;e<t;e++){var c=s.redSqr(),u=h.redSqr(),d=u.redSqr(),f=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(l)),p=s.redMul(u),g=f.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=f.redMul(m);y=y.redIAdd(y).redISub(d);var w=h.redMul(a);e+1<t&&(l=l.redMul(d)),s=g,a=w,h=y}return this.curve.jpoint(s,h.redMul(i),a)},ws.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},ws.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),l=a.redSqr().redISub(o).redISub(o),h=s.redIAdd(s);h=(h=h.redIAdd(h)).redIAdd(h),t=l,e=a.redMul(o.redISub(l)).redISub(h),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),u=this.y.redSqr(),d=u.redSqr(),f=this.x.redAdd(u).redSqr().redISub(c).redISub(d);f=f.redIAdd(f);var p=c.redAdd(c).redIAdd(c),g=p.redSqr(),m=d.redIAdd(d);m=(m=m.redIAdd(m)).redIAdd(m),t=g.redISub(f).redISub(f),e=p.redMul(f.redISub(t)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},ws.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=a.redSqr().redISub(o).redISub(o);t=l;var h=s.redIAdd(s);h=(h=h.redIAdd(h)).redIAdd(h),e=a.redMul(o.redISub(l)).redISub(h),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),u=this.y.redSqr(),d=this.x.redMul(u),f=this.x.redSub(c).redMul(this.x.redAdd(c));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),g=(p=p.redIAdd(p)).redAdd(p);t=f.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(u).redISub(c);var m=u.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),e=f.redMul(p.redISub(t)).redISub(m)}return this.curve.jpoint(t,e,r)},ws.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=e.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(i)),l=e.redAdd(e),h=(l=l.redIAdd(l)).redMul(o),c=a.redSqr().redISub(h.redAdd(h)),u=h.redISub(c),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(u).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(c,f,p)},ws.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),s=i.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),l=n.redIAdd(n);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var h=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(l),c=e.redMul(h);c=(c=c.redIAdd(c)).redIAdd(c);var u=this.x.redMul(a).redISub(c);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.y.redMul(h.redMul(l.redISub(h)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(u,d,f)},ws.prototype.mul=function(t,e){return t=new v(t,e),this.curve._wnafMul(this,t)},ws.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},ws.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},ws.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},ws.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var vs=rs((function(t,e){var r=e;r.base=us,r.short=ms,r.mont=null,r.edwards=null})),bs=rs((function(t,e){var r,n=e,i=os.assert;function s(t){"short"===t.type?this.curve=new vs.short(t):"edwards"===t.type?this.curve=new vs.edwards(t):this.curve=new vs.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var r=new s(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:es.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:es.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:es.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:es.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:es.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:es.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:es.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(t){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:es.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Es(t){if(!(this instanceof Es))return new Es(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=ss.toArray(t.entropy,t.entropyEnc||"hex"),r=ss.toArray(t.nonce,t.nonceEnc||"hex"),n=ss.toArray(t.pers,t.persEnc||"hex");ns(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var _s=Es;Es.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Es.prototype._hmac=function(){return new es.hmac(this.hash,this.K)},Es.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},Es.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=ss.toArray(t,e),r=ss.toArray(r,n),ns(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},Es.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=ss.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,t);return this._update(r),this._reseed++,ss.encode(s,e)};var As=os.assert;function Ss(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var xs=Ss;Ss.fromPublic=function(t,e,r){return e instanceof Ss?e:new Ss(t,{pub:e,pubEnc:r})},Ss.fromPrivate=function(t,e,r){return e instanceof Ss?e:new Ss(t,{priv:e,privEnc:r})},Ss.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ss.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Ss.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},Ss.prototype._importPrivate=function(t,e){this.priv=new v(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Ss.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?As(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||As(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},Ss.prototype.derive=function(t){return t.validate()||As(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Ss.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},Ss.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Ss.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var ks=os.assert;function Cs(t,e){if(t instanceof Cs)return t;this._importDER(t,e)||(ks(t.r&&t.s,"Signature without r or s"),this.r=new v(t.r,16),this.s=new v(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Ps=Cs;function Ts(){this.place=0}function Ns(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return!(i<=127)&&(e.place=o,i)}function Is(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function Ms(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}Cs.prototype._importDER=function(t,e){t=os.toArray(t,e);var r=new Ts;if(48!==t[r.place++])return!1;var n=Ns(t,r);if(!1===n)return!1;if(n+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var i=Ns(t,r);if(!1===i)return!1;var s=t.slice(r.place,i+r.place);if(r.place+=i,2!==t[r.place++])return!1;var o=Ns(t,r);if(!1===o)return!1;if(t.length!==o+r.place)return!1;var a=t.slice(r.place,o+r.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new v(s),this.s=new v(a),this.recoveryParam=null,!0},Cs.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=Is(e),r=Is(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Ms(n,e.length),(n=n.concat(e)).push(2),Ms(n,r.length);var i=n.concat(r),s=[48];return Ms(s,i.length),s=s.concat(i),os.encode(s,t)};var Os=function(){throw new Error("unsupported")},Rs=os.assert;function Bs(t){if(!(this instanceof Bs))return new Bs(t);"string"==typeof t&&(Rs(Object.prototype.hasOwnProperty.call(bs,t),"Unknown curve "+t),t=bs[t]),t instanceof bs.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Ls=Bs;Bs.prototype.keyPair=function(t){return new xs(this,t)},Bs.prototype.keyFromPrivate=function(t,e){return xs.fromPrivate(this,t,e)},Bs.prototype.keyFromPublic=function(t,e){return xs.fromPublic(this,t,e)},Bs.prototype.genKeyPair=function(t){t||(t={});for(var e=new _s({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||Os(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new v(2));;){var i=new v(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Bs.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},Bs.prototype.sign=function(t,e,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new v(t,16));for(var i=this.n.byteLength(),s=e.getPrivate().toArray("be",i),o=t.toArray("be",i),a=new _s({hash:this.hash,entropy:s,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"}),l=this.n.sub(new v(1)),h=0;;h++){var c=n.k?n.k(h):new v(a.generate(this.n.byteLength()));if(!((c=this._truncateToN(c,!0)).cmpn(1)<=0||c.cmp(l)>=0)){var u=this.g.mul(c);if(!u.isInfinity()){var d=u.getX(),f=d.umod(this.n);if(0!==f.cmpn(0)){var p=c.invm(this.n).mul(f.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var g=(u.getY().isOdd()?1:0)|(0!==d.cmp(f)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),g^=1),new Ps({r:f,s:p,recoveryParam:g})}}}}}},Bs.prototype.verify=function(t,e,r,n){t=this._truncateToN(new v(t,16)),r=this.keyFromPublic(r,n);var i=(e=new Ps(e,"hex")).r,s=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,a=s.invm(this.n),l=a.mul(t).umod(this.n),h=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(l,r.getPublic(),h)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(l,r.getPublic(),h)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},Bs.prototype.recoverPubKey=function(t,e,r,n){Rs((3&r)===r,"The recovery param is more than two bits"),e=new Ps(e,n);var i=this.n,s=new v(t),o=e.r,a=e.s,l=1&r,h=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");o=h?this.curve.pointFromX(o.add(this.curve.n),l):this.curve.pointFromX(o,l);var c=e.r.invm(i),u=i.sub(s).mul(c).umod(i),d=a.mul(c).umod(i);return this.g.mulAdd(u,o,d)},Bs.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new Ps(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch(t){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Us=rs((function(t,e){var r=e;r.version="6.5.4",r.utils=os,r.rand=function(){throw new Error("unsupported")},r.curve=vs,r.curves=bs,r.ec=Ls,r.eddsa=null})),Ds=Us.ec;const Fs=new T("signing-key/5.5.0");let js=null;function qs(){return js||(js=new Ds("secp256k1")),js}class Ws{constructor(t){xt(this,"curve","secp256k1"),xt(this,"privateKey",G(t));const e=qs().keyFromPrivate(U(this.privateKey));xt(this,"publicKey","0x"+e.getPublic(!1,"hex")),xt(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),xt(this,"_isSigningKey",!0)}_addPoint(t){const e=qs().keyFromPublic(U(this.publicKey)),r=qs().keyFromPublic(U(t));return"0x"+e.pub.add(r.pub).encodeCompressed("hex")}signDigest(t){const e=qs().keyFromPrivate(U(this.privateKey)),r=U(t);32!==r.length&&Fs.throwArgumentError("bad digest length","digest",t);const n=e.sign(r,{canonical:!0});return Z({recoveryParam:n.recoveryParam,r:J("0x"+n.r.toString(16),32),s:J("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const e=qs().keyFromPrivate(U(this.privateKey)),r=qs().keyFromPublic(U(Hs(t)));return J("0x"+e.derive(r.getPublic()).toString(16),32)}static isSigningKey(t){return!(!t||!t._isSigningKey)}}function Gs(t,e){const r=Z(e),n={r:U(r.r),s:U(r.s)};return"0x"+qs().recoverPubKey(U(t),n,r.recoveryParam).encode("hex",!1)}function Hs(t,e){const r=U(t);if(32===r.length){const t=new Ws(r);return e?"0x"+qs().keyFromPrivate(r).getPublic(!0,"hex"):t.publicKey}return 33===r.length?e?G(r):"0x"+qs().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?e?"0x"+qs().keyFromPublic(r).getPublic(!0,"hex"):G(r):Fs.throwArgumentError("invalid public or private key","key","[REDACTED]")}var zs=Object.freeze({__proto__:null,SigningKey:Ws,recoverPublicKey:Gs,computePublicKey:Hs});const Vs=new T("transactions/5.5.0");var Ks;function $s(t){return"0x"===t?null:Te(t)}function Js(t){return"0x"===t?ze:st.from(t)}!function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"}(Ks||(Ks={}));const Zs=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Xs={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Ys(t){return Te(z(fe(z(Hs(t),1)),12))}function Qs(t,e){return Ys(Gs(U(t),e))}function to(t,e){const r=F(st.from(t).toHexString());return r.length>32&&Vs.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function eo(t,e){return{address:Te(t),storageKeys:(e||[]).map(((e,r)=>(32!==H(e)&&Vs.throwArgumentError("invalid access list storageKey",`accessList[${t}:${r}]`,e),e.toLowerCase())))}}function ro(t){if(Array.isArray(t))return t.map(((t,e)=>Array.isArray(t)?(t.length>2&&Vs.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${e}]`,t),eo(t[0],t[1])):eo(t.address,t.storageKeys)));const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return eo(e,Object.keys(r).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}function no(t){return ro(t).map((t=>[t.address,t.storageKeys]))}function io(t,e){if(null!=t.gasPrice){const e=st.from(t.gasPrice),r=st.from(t.maxFeePerGas||0);e.eq(r)||Vs.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:e,maxFeePerGas:r})}const r=[to(t.chainId||0,"chainId"),to(t.nonce||0,"nonce"),to(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),to(t.maxFeePerGas||0,"maxFeePerGas"),to(t.gasLimit||0,"gasLimit"),null!=t.to?Te(t.to):"0x",to(t.value||0,"value"),t.data||"0x",no(t.accessList||[])];if(e){const t=Z(e);r.push(to(t.recoveryParam,"recoveryParam")),r.push(F(t.r)),r.push(F(t.s))}return V(["0x02",ve(r)])}function so(t,e){const r=[to(t.chainId||0,"chainId"),to(t.nonce||0,"nonce"),to(t.gasPrice||0,"gasPrice"),to(t.gasLimit||0,"gasLimit"),null!=t.to?Te(t.to):"0x",to(t.value||0,"value"),t.data||"0x",no(t.accessList||[])];if(e){const t=Z(e);r.push(to(t.recoveryParam,"recoveryParam")),r.push(F(t.r)),r.push(F(t.s))}return V(["0x01",ve(r)])}function oo(t,e){if(null==t.type||0===t.type)return null!=t.accessList&&Vs.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),function(t,e){Pt(t,Xs);const r=[];Zs.forEach((function(e){let n=t[e.name]||[];const i={};e.numeric&&(i.hexPad="left"),n=U(G(n,i)),e.length&&n.length!==e.length&&n.length>0&&Vs.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,n),e.maxLength&&(n=F(n),n.length>e.maxLength&&Vs.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,n)),r.push(G(n))}));let n=0;if(null!=t.chainId?(n=t.chainId,"number"!=typeof n&&Vs.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!R(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),0!==n&&(r.push(G(n)),r.push("0x"),r.push("0x")),!e)return ve(r);const i=Z(e);let s=27+i.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),s+=2*n+8,i.v>28&&i.v!==s&&Vs.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&Vs.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(G(s)),r.push(F(U(i.r))),r.push(F(U(i.s))),ve(r)}(t,e);switch(t.type){case 1:return so(t,e);case 2:return io(t,e)}return Vs.throwError(`unsupported transaction type: ${t.type}`,T.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function ao(t,e,r){try{const r=Js(e[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");t.v=r}catch(t){Vs.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=J(e[1],32),t.s=J(e[2],32);try{const e=fe(r(t));t.from=Qs(e,{r:t.r,s:t.s,recoveryParam:t.v})}catch(t){console.log(t)}}function lo(t){const e=U(t);if(e[0]>127)return function(t){const e=_e(t);9!==e.length&&6!==e.length&&Vs.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:Js(e[0]).toNumber(),gasPrice:Js(e[1]),gasLimit:Js(e[2]),to:$s(e[3]),value:Js(e[4]),data:e[5],chainId:0};if(6===e.length)return r;try{r.v=st.from(e[6]).toNumber()}catch(t){return console.log(t),r}if(r.r=J(e[7],32),r.s=J(e[8],32),st.from(r.r).isZero()&&st.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);0!==r.chainId&&(i.push(G(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const s=fe(ve(i));try{r.from=Qs(s,{r:G(r.r),s:G(r.s),recoveryParam:n})}catch(t){console.log(t)}r.hash=fe(t)}return r.type=null,r}(e);switch(e[0]){case 1:return function(t){const e=_e(t.slice(1));8!==e.length&&11!==e.length&&Vs.throwArgumentError("invalid component count for transaction type: 1","payload",G(t));const r={type:1,chainId:Js(e[0]).toNumber(),nonce:Js(e[1]).toNumber(),gasPrice:Js(e[2]),gasLimit:Js(e[3]),to:$s(e[4]),value:Js(e[5]),data:e[6],accessList:ro(e[7])};return 8===e.length||(r.hash=fe(t),ao(r,e.slice(8),so)),r}(e);case 2:return function(t){const e=_e(t.slice(1));9!==e.length&&12!==e.length&&Vs.throwArgumentError("invalid component count for transaction type: 2","payload",G(t));const r=Js(e[2]),n=Js(e[3]),i={type:2,chainId:Js(e[0]).toNumber(),nonce:Js(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Js(e[4]),to:$s(e[5]),value:Js(e[6]),data:e[7],accessList:ro(e[8])};return 9===e.length||(i.hash=fe(t),ao(i,e.slice(9),io)),i}(e)}return Vs.throwError(`unsupported transaction type: ${e[0]}`,T.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}var ho=Object.freeze({__proto__:null,get TransactionTypes(){return Ks},computeAddress:Ys,recoverAddress:Qs,accessListify:ro,serialize:oo,parse:lo});var co=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const uo=new T("contracts/5.5.0");function fo(t,e){return co(this,void 0,void 0,(function*(){const r=yield e;"string"!=typeof r&&uo.throwArgumentError("invalid address or ENS name","name",r);try{return Te(r)}catch(t){}t||uo.throwError("a provider or signer is needed to resolve ENS names",T.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return null==n&&uo.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n}))}function po(t,e,r){return co(this,void 0,void 0,(function*(){return Array.isArray(r)?yield Promise.all(r.map(((r,n)=>po(t,Array.isArray(e)?e[n]:e[r.name],r)))):"address"===r.type?yield fo(t,e):"tuple"===r.type?yield po(t,e,r.components):"array"===r.baseType?Array.isArray(e)?yield Promise.all(e.map((e=>po(t,e,r.arrayChildren)))):Promise.reject(uo.makeError("invalid value for array",T.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e}))}function go(t,e,r){return co(this,void 0,void 0,(function*(){let n={};r.length===e.inputs.length+1&&"object"==typeof r[r.length-1]&&(n=Tt(r.pop())),uo.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=Ct({override:fo(t.signer,n.from),signer:t.signer.getAddress()}).then((t=>co(this,void 0,void 0,(function*(){return Te(t.signer)!==t.override&&uo.throwError("Contract with a Signer cannot override from",T.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),t.override})))):n.from=t.signer.getAddress():n.from&&(n.from=fo(t.provider,n.from));const i=yield Ct({args:po(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:Ct(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(null!=a.nonce&&(o.nonce=st.from(a.nonce).toNumber()),null!=a.gasLimit&&(o.gasLimit=st.from(a.gasLimit)),null!=a.gasPrice&&(o.gasPrice=st.from(a.gasPrice)),null!=a.maxFeePerGas&&(o.maxFeePerGas=st.from(a.maxFeePerGas)),null!=a.maxPriorityFeePerGas&&(o.maxPriorityFeePerGas=st.from(a.maxPriorityFeePerGas)),null!=a.from&&(o.from=a.from),null!=a.type&&(o.type=a.type),null!=a.accessList&&(o.accessList=ro(a.accessList)),null==o.gasLimit&&null!=e.gas){let t=21e3;const r=U(s);for(let e=0;e<r.length;e++)t+=4,r[e]&&(t+=64);o.gasLimit=st.from(e.gas).add(t)}if(a.value){const t=st.from(a.value);t.isZero()||e.payable||uo.throwError("non-payable method cannot override value",T.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=t}a.customData&&(o.customData=Tt(a.customData)),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData;const l=Object.keys(n).filter((t=>null!=n[t]));return l.length&&uo.throwError(`cannot override ${l.map((t=>JSON.stringify(t))).join(",")}`,T.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o}))}function mo(t,e,r){const n=t.signer||t.provider;return function(...i){return co(this,void 0,void 0,(function*(){let s;if(i.length===e.inputs.length+1&&"object"==typeof i[i.length-1]){const t=Tt(i.pop());null!=t.blockTag&&(s=yield t.blockTag),delete t.blockTag,i.push(t)}null!=t.deployTransaction&&(yield t._deployed(s));const o=yield go(t,e,i),a=yield n.call(o,s);try{let n=t.interface.decodeFunctionResult(e,a);return r&&1===e.outputs.length&&(n=n[0]),n}catch(e){throw e.code===T.errors.CALL_EXCEPTION&&(e.address=t.address,e.args=i,e.transaction=o),e}}))}}function yo(t,e){return function(...r){return co(this,void 0,void 0,(function*(){t.signer||uo.throwError("sending a transaction requires a signer",T.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=t.deployTransaction&&(yield t._deployed());const n=yield go(t,e,r),i=yield t.signer.sendTransaction(n);return function(t,e){const r=e.wait.bind(e);e.wait=e=>r(e).then((e=>(e.events=e.logs.map((r=>{let n=Ot(r),i=null;try{i=t.interface.parseLog(r)}catch(t){}return i&&(n.args=i.args,n.decode=(e,r)=>t.interface.decodeEventLog(i.eventFragment,e,r),n.event=i.name,n.eventSignature=i.signature),n.removeListener=()=>t.provider,n.getBlock=()=>t.provider.getBlock(e.blockHash),n.getTransaction=()=>t.provider.getTransaction(e.transactionHash),n.getTransactionReceipt=()=>Promise.resolve(e),n})),e)))}(t,i),i}))}}function wo(t,e,r){return e.constant?mo(t,e,r):yo(t,e)}function vo(t){return!t.address||null!=t.topics&&0!==t.topics.length?(t.address||"*")+"@"+(t.topics?t.topics.map((t=>Array.isArray(t)?t.join("|"):t)).join(":"):""):"*"}class bo{constructor(t,e){xt(this,"tag",t),xt(this,"filter",e),this._listeners=[]}addListener(t,e){this._listeners.push({listener:t,once:e})}removeListener(t){let e=!1;this._listeners=this._listeners.filter((r=>!(!e&&r.listener===t)||(e=!0,!1)))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((t=>t.listener))}listenerCount(){return this._listeners.length}run(t){const e=this.listenerCount();return this._listeners=this._listeners.filter((e=>{const r=t.slice();return setTimeout((()=>{e.listener.apply(this,r)}),0),!e.once})),e}prepareEvent(t){}getEmit(t){return[t]}}class Eo extends bo{constructor(){super("error",null)}}class _o extends bo{constructor(t,e,r,n){const i={address:t};let s=e.getEventTopic(r);n?(s!==n[0]&&uo.throwArgumentError("topic mismatch","topics",n),i.topics=n.slice()):i.topics=[s],super(vo(i),i),xt(this,"address",t),xt(this,"interface",e),xt(this,"fragment",r)}prepareEvent(t){super.prepareEvent(t),t.event=this.fragment.name,t.eventSignature=this.fragment.format(),t.decode=(t,e)=>this.interface.decodeEventLog(this.fragment,t,e);try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(e){t.args=null,t.decodeError=e}}getEmit(t){const e=ae(t.args);if(e.length)throw e[0].error;const r=(t.args||[]).slice();return r.push(t),r}}class Ao extends bo{constructor(t,e){super("*",{address:t}),xt(this,"address",t),xt(this,"interface",e)}prepareEvent(t){super.prepareEvent(t);try{const e=this.interface.parseLog(t);t.event=e.name,t.eventSignature=e.signature,t.decode=(t,r)=>this.interface.decodeEventLog(e.eventFragment,t,r),t.args=e.args}catch(t){}}}class So{constructor(t,e,r){uo.checkNew(new.target,xo),xt(this,"interface",kt(new.target,"getInterface")(e)),null==r?(xt(this,"provider",null),xt(this,"signer",null)):mn.isSigner(r)?(xt(this,"provider",r.provider||null),xt(this,"signer",r)):un.isProvider(r)?(xt(this,"provider",r),xt(this,"signer",null)):uo.throwArgumentError("invalid signer or provider","signerOrProvider",r),xt(this,"callStatic",{}),xt(this,"estimateGas",{}),xt(this,"functions",{}),xt(this,"populateTransaction",{}),xt(this,"filters",{});{const t={};Object.keys(this.interface.events).forEach((e=>{const r=this.interface.events[e];xt(this.filters,e,((...t)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,t)}))),t[r.name]||(t[r.name]=[]),t[r.name].push(e)})),Object.keys(t).forEach((e=>{const r=t[e];1===r.length?xt(this.filters,e,this.filters[r[0]]):uo.warn(`Duplicate definition of ${e} (${r.join(", ")})`)}))}if(xt(this,"_runningEvents",{}),xt(this,"_wrappedEmits",{}),null==t&&uo.throwArgumentError("invalid contract address or ENS name","addressOrName",t),xt(this,"address",t),this.provider)xt(this,"resolvedAddress",fo(this.provider,t));else try{xt(this,"resolvedAddress",Promise.resolve(Te(t)))}catch(t){uo.throwError("provider is required to use ENS name as contract address",T.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}const n={},i={};Object.keys(this.interface.functions).forEach((t=>{const e=this.interface.functions[t];if(i[t])uo.warn(`Duplicate ABI entry for ${JSON.stringify(t)}`);else{i[t]=!0;{const r=e.name;n[`%${r}`]||(n[`%${r}`]=[]),n[`%${r}`].push(t)}null==this[t]&&xt(this,t,wo(this,e,!0)),null==this.functions[t]&&xt(this.functions,t,wo(this,e,!1)),null==this.callStatic[t]&&xt(this.callStatic,t,mo(this,e,!0)),null==this.populateTransaction[t]&&xt(this.populateTransaction,t,function(t,e){return function(...r){return go(t,e,r)}}(this,e)),null==this.estimateGas[t]&&xt(this.estimateGas,t,function(t,e){const r=t.signer||t.provider;return function(...n){return co(this,void 0,void 0,(function*(){r||uo.throwError("estimate require a provider or signer",T.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield go(t,e,n);return yield r.estimateGas(i)}))}}(this,e))}})),Object.keys(n).forEach((t=>{const e=n[t];if(e.length>1)return;t=t.substring(1);const r=e[0];try{null==this[t]&&xt(this,t,this[r])}catch(t){}null==this.functions[t]&&xt(this.functions,t,this.functions[r]),null==this.callStatic[t]&&xt(this.callStatic,t,this.callStatic[r]),null==this.populateTransaction[t]&&xt(this.populateTransaction,t,this.populateTransaction[r]),null==this.estimateGas[t]&&xt(this.estimateGas,t,this.estimateGas[r])}))}static getContractAddress(t){return Ne(t)}static getInterface(t){return on.isInterface(t)?t:new on(t)}deployed(){return this._deployed()}_deployed(t){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((()=>this)):this._deployedPromise=this.provider.getCode(this.address,t).then((t=>("0x"===t&&uo.throwError("contract not deployed",T.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this)))),this._deployedPromise}fallback(t){this.signer||uo.throwError("sending a transactions require a signer",T.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const e=Tt(t||{});return["from","to"].forEach((function(t){null!=e[t]&&uo.throwError("cannot override "+t,T.errors.UNSUPPORTED_OPERATION,{operation:t})})),e.to=this.resolvedAddress,this.deployed().then((()=>this.signer.sendTransaction(e)))}connect(t){"string"==typeof t&&(t=new yn(t,this.provider));const e=new this.constructor(this.address,this.interface,t);return this.deployTransaction&&xt(e,"deployTransaction",this.deployTransaction),e}attach(t){return new this.constructor(t,this.interface,this.signer||this.provider)}static isIndexed(t){return rn.isIndexed(t)}_normalizeRunningEvent(t){return this._runningEvents[t.tag]?this._runningEvents[t.tag]:t}_getRunningEvent(t){if("string"==typeof t){if("error"===t)return this._normalizeRunningEvent(new Eo);if("event"===t)return this._normalizeRunningEvent(new bo("event",null));if("*"===t)return this._normalizeRunningEvent(new Ao(this.address,this.interface));const e=this.interface.getEvent(t);return this._normalizeRunningEvent(new _o(this.address,this.interface,e))}if(t.topics&&t.topics.length>0){try{const e=t.topics[0];if("string"!=typeof e)throw new Error("invalid topic");const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new _o(this.address,this.interface,r,t.topics))}catch(t){}const e={address:this.address,topics:t.topics};return this._normalizeRunningEvent(new bo(vo(e),e))}return this._normalizeRunningEvent(new Ao(this.address,this.interface))}_checkRunningEvents(t){if(0===t.listenerCount()){delete this._runningEvents[t.tag];const e=this._wrappedEmits[t.tag];e&&t.filter&&(this.provider.off(t.filter,e),delete this._wrappedEmits[t.tag])}}_wrapEvent(t,e,r){const n=Ot(e);return n.removeListener=()=>{r&&(t.removeListener(r),this._checkRunningEvents(t))},n.getBlock=()=>this.provider.getBlock(e.blockHash),n.getTransaction=()=>this.provider.getTransaction(e.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(e.transactionHash),t.prepareEvent(n),n}_addEventListener(t,e,r){if(this.provider||uo.throwError("events require a provider or a signer with a provider",T.errors.UNSUPPORTED_OPERATION,{operation:"once"}),t.addListener(e,r),this._runningEvents[t.tag]=t,!this._wrappedEmits[t.tag]){const r=r=>{let n=this._wrapEvent(t,r,e);if(null==n.decodeError)try{const e=t.getEmit(n);this.emit(t.filter,...e)}catch(t){n.decodeError=t.error}null!=t.filter&&this.emit("event",n),null!=n.decodeError&&this.emit("error",n.decodeError,n)};this._wrappedEmits[t.tag]=r,null!=t.filter&&this.provider.on(t.filter,r)}}queryFilter(t,e,r){const n=this._getRunningEvent(t),i=Tt(n.filter);return"string"==typeof e&&q(e,32)?(null!=r&&uo.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),i.blockHash=e):(i.fromBlock=null!=e?e:0,i.toBlock=null!=r?r:"latest"),this.provider.getLogs(i).then((t=>t.map((t=>this._wrapEvent(n,t,null)))))}on(t,e){return this._addEventListener(this._getRunningEvent(t),e,!1),this}once(t,e){return this._addEventListener(this._getRunningEvent(t),e,!0),this}emit(t,...e){if(!this.provider)return!1;const r=this._getRunningEvent(t),n=r.run(e)>0;return this._checkRunningEvents(r),n}listenerCount(t){return this.provider?null==t?Object.keys(this._runningEvents).reduce(((t,e)=>t+this._runningEvents[e].listenerCount()),0):this._getRunningEvent(t).listenerCount():0}listeners(t){if(!this.provider)return[];if(null==t){const t=[];for(let e in this._runningEvents)this._runningEvents[e].listeners().forEach((e=>{t.push(e)}));return t}return this._getRunningEvent(t).listeners()}removeAllListeners(t){if(!this.provider)return this;if(null==t){for(const t in this._runningEvents){const e=this._runningEvents[t];e.removeAllListeners(),this._checkRunningEvents(e)}return this}const e=this._getRunningEvent(t);return e.removeAllListeners(),this._checkRunningEvents(e),this}off(t,e){if(!this.provider)return this;const r=this._getRunningEvent(t);return r.removeListener(e),this._checkRunningEvents(r),this}removeListener(t,e){return this.off(t,e)}}class xo extends So{}class ko{constructor(t){xt(this,"alphabet",t),xt(this,"base",t.length),xt(this,"_alphabetMap",{}),xt(this,"_leader",t.charAt(0));for(let e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}encode(t){let e=U(t);if(0===e.length)return"";let r=[0];for(let t=0;t<e.length;++t){let n=e[t];for(let t=0;t<r.length;++t)n+=r[t]<<8,r[t]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let t=0;0===e[t]&&t<e.length-1;++t)n+=this._leader;for(let t=r.length-1;t>=0;--t)n+=this.alphabet[r[t]];return n}decode(t){if("string"!=typeof t)throw new TypeError("Expected String");let e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(let r=0;r<t.length;r++){let n=this._alphabetMap[t[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let t=0;t<e.length;++t)i+=e[t]*this.base,e[t]=255&i,i>>=8;for(;i>0;)e.push(255&i),i>>=8}for(let r=0;t[r]===this._leader&&r<t.length-1;++r)e.push(0);return U(new Uint8Array(e.reverse()))}}const Co=new ko("abcdefghijklmnopqrstuvwxyz234567"),Po=new ko("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var To,No=Object.freeze({__proto__:null,BaseX:ko,Base32:Co,Base58:Po});!function(t){t.sha256="sha256",t.sha512="sha512"}(To||(To={}));const Io=new T("sha2/5.5.0");function Mo(t){return"0x"+es.ripemd160().update(U(t)).digest("hex")}function Oo(t){return"0x"+es.sha256().update(U(t)).digest("hex")}function Ro(t,e,r){return To[t]||Io.throwError("unsupported algorithm "+t,T.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+es.hmac(es[t],U(e)).update(U(r)).digest("hex")}var Bo=Object.freeze({__proto__:null,computeHmac:Ro,ripemd160:Mo,sha256:Oo,sha512:function(t){return"0x"+es.sha512().update(U(t)).digest("hex")},get SupportedAlgorithm(){return To}});function Lo(t,e,r,n,i){let s;t=U(t),e=U(e);let o=1;const a=new Uint8Array(n),l=new Uint8Array(e.length+4);let h,c;l.set(e);for(let u=1;u<=o;u++){l[e.length]=u>>24&255,l[e.length+1]=u>>16&255,l[e.length+2]=u>>8&255,l[e.length+3]=255&u;let d=U(Ro(i,t,l));s||(s=d.length,c=new Uint8Array(s),o=Math.ceil(n/s),h=n-(o-1)*s),c.set(d);for(let e=1;e<r;e++){d=U(Ro(i,t,d));for(let t=0;t<s;t++)c[t]^=d[t]}const f=(u-1)*s,p=u===o?h:s;a.set(U(c).slice(0,p),f)}return G(a)}const Uo=new T("wordlists/5.5.0");class Do{constructor(t){Uo.checkAbstract(new.target,Do),xt(this,"locale",t)}split(t){return t.toLowerCase().split(/ +/g)}join(t){return t.join(" ")}static check(t){const e=[];for(let r=0;r<2048;r++){const n=t.getWord(r);if(r!==t.getWordIndex(n))return"0x";e.push(n)}return Cr(e.join("\n")+"\n")}static register(t,e){}}let Fo=null;function jo(t){if(null==Fo&&(Fo="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==Do.check(t)))throw Fo=null,new Error("BIP39 Wordlist for en (English) FAILED")}const qo=new class extends Do{constructor(){super("en")}getWord(t){return jo(this),Fo[t]}getWordIndex(t){return jo(this),Fo.indexOf(t)}};Do.register(qo);const Wo={en:qo},Go=new T("hdnode/5.5.0"),Ho=st.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),zo=nr("Bitcoin seed"),Vo=2147483648;function Ko(t){return(1<<t)-1<<8-t}function $o(t){return J(G(t),32)}function Jo(t){return Po.encode(D([t,z(Oo(Oo(t)),0,4)]))}function Zo(t){if(null==t)return Wo.en;if("string"==typeof t){const e=Wo[t];return null==e&&Go.throwArgumentError("unknown locale","wordlist",t),e}return t}const Xo={},Yo="m/44'/60'/0'/0/0";class Qo{constructor(t,e,r,n,i,s,o,a){if(Go.checkNew(new.target,Qo),t!==Xo)throw new Error("HDNode constructor cannot be called directly");if(e){const t=new Ws(e);xt(this,"privateKey",t.privateKey),xt(this,"publicKey",t.compressedPublicKey)}else xt(this,"privateKey",null),xt(this,"publicKey",G(r));xt(this,"parentFingerprint",n),xt(this,"fingerprint",z(Mo(Oo(this.publicKey)),0,4)),xt(this,"address",Ys(this.publicKey)),xt(this,"chainCode",i),xt(this,"index",s),xt(this,"depth",o),null==a?(xt(this,"mnemonic",null),xt(this,"path",null)):"string"==typeof a?(xt(this,"mnemonic",null),xt(this,"path",a)):(xt(this,"mnemonic",a),xt(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Jo(D([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",G(this.depth),this.parentFingerprint,J(G(this.index),4),this.chainCode,null!=this.privateKey?D(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Qo(Xo,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(t){if(t>4294967295)throw new Error("invalid index - "+String(t));let e=this.path;e&&(e+="/"+(2147483647&t));const r=new Uint8Array(37);if(t&Vo){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(U(this.privateKey),1),e&&(e+="'")}else r.set(U(this.publicKey));for(let e=24;e>=0;e-=8)r[33+(e>>3)]=t>>24-e&255;const n=U(Ro(To.sha512,this.chainCode,r)),i=n.slice(0,32),s=n.slice(32);let o=null,a=null;if(this.privateKey)o=$o(st.from(i).add(this.privateKey).mod(Ho));else{a=new Ws(G(i))._addPoint(this.publicKey)}let l=e;const h=this.mnemonic;return h&&(l=Object.freeze({phrase:h.phrase,path:e,locale:h.locale||"en"})),new Qo(Xo,o,a,this.fingerprint,$o(s),t,this.depth+1,l)}derivePath(t){const e=t.split("/");if(0===e.length||"m"===e[0]&&0!==this.depth)throw new Error("invalid path - "+t);"m"===e[0]&&e.shift();let r=this;for(let t=0;t<e.length;t++){const n=e[t];if(n.match(/^[0-9]+'$/)){const t=parseInt(n.substring(0,n.length-1));if(t>=Vo)throw new Error("invalid path index - "+n);r=r._derive(Vo+t)}else{if(!n.match(/^[0-9]+$/))throw new Error("invalid path component - "+n);{const t=parseInt(n);if(t>=Vo)throw new Error("invalid path index - "+n);r=r._derive(t)}}}return r}static _fromSeed(t,e){const r=U(t);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=U(Ro(To.sha512,zo,r));return new Qo(Xo,$o(n.slice(0,32)),null,"0x00000000",$o(n.slice(32)),0,0,e)}static fromMnemonic(t,e,r){return t=ra(ea(t,r=Zo(r)),r),Qo._fromSeed(ta(t,e),{phrase:t,path:"m",locale:r.locale})}static fromSeed(t){return Qo._fromSeed(t,null)}static fromExtendedKey(t){const e=Po.decode(t);82===e.length&&Jo(e.slice(0,78))===t||Go.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=e[4],n=G(e.slice(5,9)),i=parseInt(G(e.slice(9,13)).substring(2),16),s=G(e.slice(13,45)),o=e.slice(45,78);switch(G(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Qo(Xo,null,G(o),n,s,i,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==o[0])break;return new Qo(Xo,G(o.slice(1)),null,n,s,i,r,null)}return Go.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function ta(t,e){e||(e="");const r=nr("mnemonic"+e,Ye.NFKD);return Lo(nr(t,Ye.NFKD),r,2048,64,"sha512")}function ea(t,e){e=Zo(e),Go.checkNormalize();const r=e.split(t);if(r.length%3!=0)throw new Error("invalid mnemonic");const n=U(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let t=0;t<r.length;t++){let s=e.getWordIndex(r[t].normalize("NFKD"));if(-1===s)throw new Error("invalid mnemonic");for(let t=0;t<11;t++)s&1<<10-t&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,o=Ko(r.length/3);if((U(Oo(n.slice(0,s/8)))[0]&o)!==(n[n.length-1]&o))throw new Error("invalid checksum");return G(n.slice(0,s/8))}function ra(t,e){if(e=Zo(e),(t=U(t)).length%4!=0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let e=0;e<t.length;e++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[e],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[e]>>8-n,r.push(t[e]&(1<<8-n)-1),n+=3);const i=t.length/4,s=U(Oo(t))[0]&Ko(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,e.join(r.map((t=>e.getWord(t))))}var na=Object.freeze({__proto__:null,defaultPath:Yo,HDNode:Qo,mnemonicToSeed:ta,mnemonicToEntropy:ea,entropyToMnemonic:ra,isValidMnemonic:function(t,e){try{return ea(t,e),!0}catch(t){}return!1},getAccountPath:function(t){return("number"!=typeof t||t<0||t>=Vo||t%1)&&Go.throwArgumentError("invalid account index","index",t),`m/44'/60'/${t}'/0/0`}});const ia=new T("random/5.5.1");const sa="undefined"!=typeof self?self:window;let oa=sa.crypto||sa.msCrypto;function aa(t){(t<=0||t>1024||t%1||t!=t)&&ia.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return oa.getRandomValues(e),U(e)}oa&&oa.getRandomValues||(ia.warn("WARNING: Missing strong random number source"),oa={getRandomValues:function(t){return ia.throwError("no secure random source avaialble",T.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var la=Object.freeze({__proto__:null,randomBytes:aa,shuffled:function(t){for(let e=(t=t.slice()).length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}}),ha=d((function(t,e){!function(e){function r(t){return parseInt(t)===t}function n(t){if(!r(t.length))return!1;for(var e=0;e<t.length;e++)if(!r(t[e])||t[e]<0||t[e]>255)return!1;return!0}function i(t,e){if(t.buffer&&ArrayBuffer.isView(t)&&"Uint8Array"===t.name)return e&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(r(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function s(t){return new Uint8Array(t)}function o(t,e,r,n,i){null==n&&null==i||(t=t.slice?t.slice(n,i):Array.prototype.slice.call(t,n,i)),e.set(t,r)}var a,l={toBytes:function(t){var e=[],r=0;for(t=encodeURI(t);r<t.length;){var n=t.charCodeAt(r++);37===n?(e.push(parseInt(t.substr(r,2),16)),r+=2):e.push(n)}return i(e)},fromBytes:function(t){for(var e=[],r=0;r<t.length;){var n=t[r];n<128?(e.push(String.fromCharCode(n)),r++):n>191&&n<224?(e.push(String.fromCharCode((31&n)<<6|63&t[r+1])),r+=2):(e.push(String.fromCharCode((15&n)<<12|(63&t[r+1])<<6|63&t[r+2])),r+=3)}return e.join("")}},h=(a="0123456789abcdef",{toBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},fromBytes:function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];e.push(a[(240&n)>>4]+a[15&n])}return e.join("")}}),c={16:10,24:12,32:14},u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],d=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],g=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],y=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],w=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],v=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],b=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],E=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],_=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],A=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],S=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],x=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function k(t){for(var e=[],r=0;r<t.length;r+=4)e.push(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]);return e}var C=function(t){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(t,!0)}),this._prepare()};C.prototype._prepare=function(){var t=c[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(t+1),i=this.key.length/4,s=k(this.key);for(e=0;e<i;e++)r=e>>2,this._Ke[r][e%4]=s[e],this._Kd[t-r][e%4]=s[e];for(var o,a=0,l=i;l<n;){if(o=s[i-1],s[0]^=d[o>>16&255]<<24^d[o>>8&255]<<16^d[255&o]<<8^d[o>>24&255]^u[a]<<24,a+=1,8!=i)for(e=1;e<i;e++)s[e]^=s[e-1];else{for(e=1;e<i/2;e++)s[e]^=s[e-1];o=s[i/2-1],s[i/2]^=d[255&o]^d[o>>8&255]<<8^d[o>>16&255]<<16^d[o>>24&255]<<24;for(e=i/2+1;e<i;e++)s[e]^=s[e-1]}for(e=0;e<i&&l<n;)h=l>>2,f=l%4,this._Ke[h][f]=s[e],this._Kd[t-h][f]=s[e++],l++}for(var h=1;h<t;h++)for(var f=0;f<4;f++)o=this._Kd[h][f],this._Kd[h][f]=_[o>>24&255]^A[o>>16&255]^S[o>>8&255]^x[255&o]},C.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,r=[0,0,0,0],n=k(t),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var o=1;o<e;o++){for(i=0;i<4;i++)r[i]=p[n[i]>>24&255]^g[n[(i+1)%4]>>16&255]^m[n[(i+2)%4]>>8&255]^y[255&n[(i+3)%4]]^this._Ke[o][i];n=r.slice()}var a,l=s(16);for(i=0;i<4;i++)a=this._Ke[e][i],l[4*i]=255&(d[n[i]>>24&255]^a>>24),l[4*i+1]=255&(d[n[(i+1)%4]>>16&255]^a>>16),l[4*i+2]=255&(d[n[(i+2)%4]>>8&255]^a>>8),l[4*i+3]=255&(d[255&n[(i+3)%4]]^a);return l},C.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,r=[0,0,0,0],n=k(t),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var o=1;o<e;o++){for(i=0;i<4;i++)r[i]=w[n[i]>>24&255]^v[n[(i+3)%4]>>16&255]^b[n[(i+2)%4]>>8&255]^E[255&n[(i+1)%4]]^this._Kd[o][i];n=r.slice()}var a,l=s(16);for(i=0;i<4;i++)a=this._Kd[e][i],l[4*i]=255&(f[n[i]>>24&255]^a>>24),l[4*i+1]=255&(f[n[(i+3)%4]>>16&255]^a>>16),l[4*i+2]=255&(f[n[(i+2)%4]>>8&255]^a>>8),l[4*i+3]=255&(f[255&n[(i+1)%4]]^a);return l};var P=function(t){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new C(t)};P.prototype.encrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=s(t.length),r=s(16),n=0;n<t.length;n+=16)o(t,r,0,n,n+16),o(r=this._aes.encrypt(r),e,n);return e},P.prototype.decrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=s(t.length),r=s(16),n=0;n<t.length;n+=16)o(t,r,0,n,n+16),o(r=this._aes.decrypt(r),e,n);return e};var T=function(t,e){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=s(16);this._lastCipherblock=i(e,!0),this._aes=new C(t)};T.prototype.encrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=s(t.length),r=s(16),n=0;n<t.length;n+=16){o(t,r,0,n,n+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),o(this._lastCipherblock,e,n)}return e},T.prototype.decrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=s(t.length),r=s(16),n=0;n<t.length;n+=16){o(t,r,0,n,n+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)e[n+a]=r[a]^this._lastCipherblock[a];o(t,this._lastCipherblock,0,n,n+16)}return e};var N=function(t,e,r){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=s(16);r||(r=1),this.segmentSize=r,this._shiftRegister=i(e,!0),this._aes=new C(t)};N.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,r=i(t,!0),n=0;n<r.length;n+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)r[n+s]^=e[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},N.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,r=i(t,!0),n=0;n<r.length;n+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)r[n+s]^=e[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var I=function(t,e){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=s(16);this._lastPrecipher=i(e,!0),this._lastPrecipherIndex=16,this._aes=new C(t)};I.prototype.encrypt=function(t){for(var e=i(t,!0),r=0;r<e.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},I.prototype.decrypt=I.prototype.encrypt;var M=function(t){if(!(this instanceof M))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=s(16),this.setValue(t)):this.setBytes(t)};M.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");for(var e=15;e>=0;--e)this._counter[e]=t%256,t>>=8},M.prototype.setBytes=function(t){if(16!=(t=i(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},M.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var O=function(t,e){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof M||(e=new M(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new C(t)};O.prototype.encrypt=function(t){for(var e=i(t,!0),r=0;r<e.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[r]^=this._remainingCounter[this._remainingCounterIndex++];return e},O.prototype.decrypt=O.prototype.encrypt;var R={AES:C,Counter:M,ModeOfOperation:{ecb:P,cbc:T,cfb:N,ofb:I,ctr:O},utils:{hex:h,utf8:l},padding:{pkcs7:{pad:function(t){var e=16-(t=i(t,!0)).length%16,r=s(t.length+e);o(t,r);for(var n=t.length;n<r.length;n++)r[n]=e;return r},strip:function(t){if((t=i(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var r=t.length-e,n=0;n<e;n++)if(t[r+n]!==e)throw new Error("PKCS#7 invalid padding byte");var a=s(r);return o(t,a,0,0,r),a}}},_arrayTest:{coerceArray:i,createArray:s,copyArray:o}};t.exports=R}()}));const ca="json-wallets/5.5.0";function ua(t){return"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),U(t)}function da(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function fa(t){return"string"==typeof t?nr(t,Ye.NFKC):U(t)}function pa(t,e){let r=t;const n=e.toLowerCase().split("/");for(let t=0;t<n.length;t++){let e=null;for(const i in r)if(i.toLowerCase()===n[t]){e=r[i];break}if(null===e)return null;r=e}return r}function ga(t){const e=U(t);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const r=G(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const ma=new T(ca);class ya extends Rt{isCrowdsaleAccount(t){return!(!t||!t._isCrowdsaleAccount)}}function wa(t,e){const r=JSON.parse(t);e=fa(e);const n=Te(pa(r,"ethaddr")),i=ua(pa(r,"encseed"));i&&i.length%16==0||ma.throwArgumentError("invalid encseed","json",t);const s=U(Lo(e,e,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),a=i.slice(16),l=new ha.ModeOfOperation.cbc(s,o),h=ha.padding.pkcs7.strip(U(l.decrypt(a)));let c="";for(let t=0;t<h.length;t++)c+=String.fromCharCode(h[t]);const u=fe(nr(c));return new ya({_isCrowdsaleAccount:!0,address:n,privateKey:u})}function va(t){let e=null;try{e=JSON.parse(t)}catch(t){return!1}return e.encseed&&e.ethaddr}function ba(t){let e=null;try{e=JSON.parse(t)}catch(t){return!1}return!(!e.version||parseInt(e.version)!==e.version||3!==parseInt(e.version))}var Ea=d((function(t,e){!function(e){const r=2147483647;function n(t){const e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,s=2773480762,o=1359893119,a=2600822924,l=528734635,h=1541459225;const c=new Uint32Array(64);function u(t){let u=0,d=t.length;for(;d>=64;){let f,p,g,m,y,w=r,v=n,b=i,E=s,_=o,A=a,S=l,x=h;for(p=0;p<16;p++)g=u+4*p,c[p]=(255&t[g])<<24|(255&t[g+1])<<16|(255&t[g+2])<<8|255&t[g+3];for(p=16;p<64;p++)f=c[p-2],m=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,f=c[p-15],y=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,c[p]=(m+c[p-7]|0)+(y+c[p-16]|0)|0;for(p=0;p<64;p++)m=(((_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7))+(_&A^~_&S)|0)+(x+(e[p]+c[p]|0)|0)|0,y=((w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10))+(w&v^w&b^v&b)|0,x=S,S=A,A=_,_=E+m|0,E=b,b=v,v=w,w=m+y|0;r=r+w|0,n=n+v|0,i=i+b|0,s=s+E|0,o=o+_|0,a=a+A|0,l=l+S|0,h=h+x|0,u+=64,d-=64}}u(t);let d,f=t.length%64,p=t.length/536870912|0,g=t.length<<3,m=f<56?56:120,y=t.slice(t.length-f,t.length);for(y.push(128),d=f+1;d<m;d++)y.push(0);return y.push(p>>>24&255),y.push(p>>>16&255),y.push(p>>>8&255),y.push(p>>>0&255),y.push(g>>>24&255),y.push(g>>>16&255),y.push(g>>>8&255),y.push(g>>>0&255),u(y),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,l>>>24&255,l>>>16&255,l>>>8&255,l>>>0&255,h>>>24&255,h>>>16&255,h>>>8&255,h>>>0&255]}function i(t,e,r){t=t.length<=64?t:n(t);const i=64+e.length+4,s=new Array(i),o=new Array(64);let a,l=[];for(a=0;a<64;a++)s[a]=54;for(a=0;a<t.length;a++)s[a]^=t[a];for(a=0;a<e.length;a++)s[64+a]=e[a];for(a=i-4;a<i;a++)s[a]=0;for(a=0;a<64;a++)o[a]=92;for(a=0;a<t.length;a++)o[a]^=t[a];function h(){for(let t=i-1;t>=i-4;t--){if(s[t]++,s[t]<=255)return;s[t]=0}}for(;r>=32;)h(),l=l.concat(n(o.concat(n(s)))),r-=32;return r>0&&(h(),l=l.concat(n(o.concat(n(s))).slice(0,r))),l}function s(t,e,r,n,i){let s;for(h(t,16*(2*r-1),i,0,16),s=0;s<2*r;s++)l(t,16*s,i,16),a(i,n),h(i,0,t,e+16*s,16);for(s=0;s<r;s++)h(t,e+2*s*16,t,16*s,16);for(s=0;s<r;s++)h(t,e+16*(2*s+1),t,16*(s+r),16)}function o(t,e){return t<<e|t>>>32-e}function a(t,e){h(t,0,e,0,16);for(let t=8;t>0;t-=2)e[4]^=o(e[0]+e[12],7),e[8]^=o(e[4]+e[0],9),e[12]^=o(e[8]+e[4],13),e[0]^=o(e[12]+e[8],18),e[9]^=o(e[5]+e[1],7),e[13]^=o(e[9]+e[5],9),e[1]^=o(e[13]+e[9],13),e[5]^=o(e[1]+e[13],18),e[14]^=o(e[10]+e[6],7),e[2]^=o(e[14]+e[10],9),e[6]^=o(e[2]+e[14],13),e[10]^=o(e[6]+e[2],18),e[3]^=o(e[15]+e[11],7),e[7]^=o(e[3]+e[15],9),e[11]^=o(e[7]+e[3],13),e[15]^=o(e[11]+e[7],18),e[1]^=o(e[0]+e[3],7),e[2]^=o(e[1]+e[0],9),e[3]^=o(e[2]+e[1],13),e[0]^=o(e[3]+e[2],18),e[6]^=o(e[5]+e[4],7),e[7]^=o(e[6]+e[5],9),e[4]^=o(e[7]+e[6],13),e[5]^=o(e[4]+e[7],18),e[11]^=o(e[10]+e[9],7),e[8]^=o(e[11]+e[10],9),e[9]^=o(e[8]+e[11],13),e[10]^=o(e[9]+e[8],18),e[12]^=o(e[15]+e[14],7),e[13]^=o(e[12]+e[15],9),e[14]^=o(e[13]+e[12],13),e[15]^=o(e[14]+e[13],18);for(let r=0;r<16;++r)t[r]+=e[r]}function l(t,e,r,n){for(let i=0;i<n;i++)r[i]^=t[e+i]}function h(t,e,r,n,i){for(;i--;)r[n++]=t[e++]}function c(t){if(!t||"number"!=typeof t.length)return!1;for(let e=0;e<t.length;e++){const r=t[e];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function u(t,e){if("number"!=typeof t||t%1)throw new Error("invalid "+e);return t}function d(t,e,n,o,a,d,f){if(n=u(n,"N"),o=u(o,"r"),a=u(a,"p"),d=u(d,"dkLen"),0===n||0!=(n&n-1))throw new Error("N must be power of 2");if(n>r/128/o)throw new Error("N too large");if(o>r/128/a)throw new Error("r too large");if(!c(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!c(e))throw new Error("salt must be an array or buffer");e=Array.prototype.slice.call(e);let p=i(t,e,128*a*o);const g=new Uint32Array(32*a*o);for(let t=0;t<g.length;t++){const e=4*t;g[t]=(255&p[e+3])<<24|(255&p[e+2])<<16|(255&p[e+1])<<8|(255&p[e+0])<<0}const m=new Uint32Array(64*o),y=new Uint32Array(32*o*n),w=32*o,v=new Uint32Array(16),b=new Uint32Array(16),E=a*n*2;let _,A,S=0,x=null,k=!1,C=0,P=0;const T=f?parseInt(1e3/o):4294967295,N="undefined"!=typeof setImmediate?setImmediate:setTimeout,I=function(){if(k)return f(new Error("cancelled"),S/E);let e;switch(C){case 0:A=32*P*o,h(g,A,m,0,w),C=1,_=0;case 1:e=n-_,e>T&&(e=T);for(let t=0;t<e;t++)h(m,0,y,(_+t)*w,w),s(m,w,o,v,b);if(_+=e,S+=e,f){const t=parseInt(1e3*S/E);if(t!==x){if(k=f(null,S/E),k)break;x=t}}if(_<n)break;_=0,C=2;case 2:e=n-_,e>T&&(e=T);for(let t=0;t<e;t++){const t=m[16*(2*o-1)]&n-1;l(y,t*w,m,w),s(m,w,o,v,b)}if(_+=e,S+=e,f){const t=parseInt(1e3*S/E);if(t!==x){if(k=f(null,S/E),k)break;x=t}}if(_<n)break;if(h(m,0,g,A,w),P++,P<a){C=0;break}p=[];for(let t=0;t<g.length;t++)p.push(g[t]>>0&255),p.push(g[t]>>8&255),p.push(g[t]>>16&255),p.push(g[t]>>24&255);const r=i(t,p,d);return f&&f(null,1,r),r}f&&N(I)};if(!f)for(;;){const t=I();if(null!=t)return t}I()}const f={scrypt:function(t,e,r,n,i,s,o){return new Promise((function(a,l){let h=0;o&&o(0),d(t,e,r,n,i,s,(function(t,e,r){if(t)l(t);else if(r)o&&1!==h&&o(1),a(new Uint8Array(r));else if(o&&e!==h)return h=e,o(e)}))}))},syncScrypt:function(t,e,r,n,i,s){return new Uint8Array(d(t,e,r,n,i,s))}};t.exports=f}()})),_a=Ea,Aa=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const Sa=new T(ca);function xa(t){return null!=t&&t.mnemonic&&t.mnemonic.phrase}class ka extends Rt{isKeystoreAccount(t){return!(!t||!t._isKeystoreAccount)}}function Ca(t,e){const r=ua(pa(t,"crypto/ciphertext"));if(G(fe(D([e.slice(16,32),r]))).substring(2)!==pa(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const n=function(t,e,r){if("aes-128-ctr"===pa(t,"crypto/cipher")){const n=ua(pa(t,"crypto/cipherparams/iv")),i=new ha.Counter(n);return U(new ha.ModeOfOperation.ctr(e,i).decrypt(r))}return null}(t,e.slice(0,16),r);n||Sa.throwError("unsupported cipher",T.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=e.slice(32,64),s=Ys(n);if(t.address){let e=t.address.toLowerCase();if("0x"!==e.substring(0,2)&&(e="0x"+e),Te(e)!==s)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:s,privateKey:G(n)};if("0.1"===pa(t,"x-ethers/version")){const e=ua(pa(t,"x-ethers/mnemonicCiphertext")),r=ua(pa(t,"x-ethers/mnemonicCounter")),n=new ha.Counter(r),s=new ha.ModeOfOperation.ctr(i,n),a=pa(t,"x-ethers/path")||Yo,l=pa(t,"x-ethers/locale")||"en",h=U(s.decrypt(e));try{const t=ra(h,l),e=Qo.fromMnemonic(t,null,l).derivePath(a);if(e.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=e.mnemonic}catch(t){if(t.code!==T.errors.INVALID_ARGUMENT||"wordlist"!==t.argument)throw t}}return new ka(o)}function Pa(t,e,r,n,i){return U(Lo(t,e,r,n,i))}function Ta(t,e,r,n,i){return Promise.resolve(Pa(t,e,r,n,i))}function Na(t,e,r,n,i){const s=fa(e),o=pa(t,"crypto/kdf");if(o&&"string"==typeof o){const e=function(t,e){return Sa.throwArgumentError("invalid key-derivation function parameters",t,e)};if("scrypt"===o.toLowerCase()){const r=ua(pa(t,"crypto/kdfparams/salt")),a=parseInt(pa(t,"crypto/kdfparams/n")),l=parseInt(pa(t,"crypto/kdfparams/r")),h=parseInt(pa(t,"crypto/kdfparams/p"));a&&l&&h||e("kdf",o),0!=(a&a-1)&&e("N",a);const c=parseInt(pa(t,"crypto/kdfparams/dklen"));return 32!==c&&e("dklen",c),n(s,r,a,l,h,64,i)}if("pbkdf2"===o.toLowerCase()){const n=ua(pa(t,"crypto/kdfparams/salt"));let i=null;const o=pa(t,"crypto/kdfparams/prf");"hmac-sha256"===o?i="sha256":"hmac-sha512"===o?i="sha512":e("prf",o);const a=parseInt(pa(t,"crypto/kdfparams/c")),l=parseInt(pa(t,"crypto/kdfparams/dklen"));return 32!==l&&e("dklen",l),r(s,n,a,l,i)}}return Sa.throwArgumentError("unsupported key-derivation function","kdf",o)}function Ia(t,e){const r=JSON.parse(t);return Ca(r,Na(r,e,Pa,_a.syncScrypt))}function Ma(t,e,r){return Aa(this,void 0,void 0,(function*(){const n=JSON.parse(t);return Ca(n,yield Na(n,e,Ta,_a.scrypt,r))}))}function Oa(t,e,r,n){try{if(Te(t.address)!==Ys(t.privateKey))throw new Error("address/privateKey mismatch");if(xa(t)){const e=t.mnemonic;if(Qo.fromMnemonic(e.phrase,null,e.locale).derivePath(e.path||Yo).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(t){return Promise.reject(t)}"function"!=typeof r||n||(n=r,r={}),r||(r={});const i=U(t.privateKey),s=fa(e);let o=null,a=null,l=null;if(xa(t)){const e=t.mnemonic;o=U(ea(e.phrase,e.locale||"en")),a=e.path||Yo,l=e.locale||"en"}let h=r.client;h||(h="ethers.js");let c=null;c=r.salt?U(r.salt):aa(32);let u=null;if(r.iv){if(u=U(r.iv),16!==u.length)throw new Error("invalid iv")}else u=aa(16);let d=null;if(r.uuid){if(d=U(r.uuid),16!==d.length)throw new Error("invalid uuid")}else d=aa(16);let f=1<<17,p=8,g=1;return r.scrypt&&(r.scrypt.N&&(f=r.scrypt.N),r.scrypt.r&&(p=r.scrypt.r),r.scrypt.p&&(g=r.scrypt.p)),_a.scrypt(s,c,f,p,g,64,n).then((e=>{const r=(e=U(e)).slice(0,16),n=e.slice(16,32),s=e.slice(32,64),m=new ha.Counter(u),y=U(new ha.ModeOfOperation.ctr(r,m).encrypt(i)),w=fe(D([n,y])),v={address:t.address.substring(2).toLowerCase(),id:ga(d),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:G(u).substring(2)},ciphertext:G(y).substring(2),kdf:"scrypt",kdfparams:{salt:G(c).substring(2),n:f,dklen:32,p:g,r:p},mac:w.substring(2)}};if(o){const t=aa(16),e=new ha.Counter(t),r=U(new ha.ModeOfOperation.ctr(s,e).encrypt(o)),n=new Date,i=n.getUTCFullYear()+"-"+da(n.getUTCMonth()+1,2)+"-"+da(n.getUTCDate(),2)+"T"+da(n.getUTCHours(),2)+"-"+da(n.getUTCMinutes(),2)+"-"+da(n.getUTCSeconds(),2)+".0Z";v["x-ethers"]={client:h,gethFilename:"UTC--"+i+"--"+v.address,mnemonicCounter:G(t).substring(2),mnemonicCiphertext:G(r).substring(2),path:a,locale:l,version:"0.1"}}return JSON.stringify(v)}))}function Ra(t,e,r){if(va(t)){r&&r(0);const n=wa(t,e);return r&&r(1),Promise.resolve(n)}return ba(t)?Ma(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function Ba(t,e){if(va(t))return wa(t,e);if(ba(t))return Ia(t,e);throw new Error("invalid JSON wallet")}var La=Object.freeze({__proto__:null,decryptCrowdsale:wa,decryptKeystore:Ma,decryptKeystoreSync:Ia,encryptKeystore:Oa,isCrowdsaleWallet:va,isKeystoreWallet:ba,getJsonWalletAddress:function(t){if(va(t))try{return Te(JSON.parse(t).ethaddr)}catch(t){return null}if(ba(t))try{return Te(JSON.parse(t).address)}catch(t){return null}return null},decryptJsonWallet:Ra,decryptJsonWalletSync:Ba});var Ua=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const Da=new T("wallet/5.5.0");class Fa extends mn{constructor(t,e){if(Da.checkNew(new.target,Fa),super(),function(t){return null!=t&&q(t.privateKey,32)&&null!=t.address}(t)){const e=new Ws(t.privateKey);if(xt(this,"_signingKey",(()=>e)),xt(this,"address",Ys(this.publicKey)),this.address!==Te(t.address)&&Da.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(t){const e=t.mnemonic;return e&&e.phrase}(t)){const e=t.mnemonic;xt(this,"_mnemonic",(()=>({phrase:e.phrase,path:e.path||Yo,locale:e.locale||"en"})));const r=this.mnemonic;Ys(Qo.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path).privateKey)!==this.address&&Da.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else xt(this,"_mnemonic",(()=>null))}else{if(Ws.isSigningKey(t))"secp256k1"!==t.curve&&Da.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),xt(this,"_signingKey",(()=>t));else{"string"==typeof t&&t.match(/^[0-9a-f]*$/i)&&64===t.length&&(t="0x"+t);const e=new Ws(t);xt(this,"_signingKey",(()=>e))}xt(this,"_mnemonic",(()=>null)),xt(this,"address",Ys(this.publicKey))}e&&!un.isProvider(e)&&Da.throwArgumentError("invalid provider","provider",e),xt(this,"provider",e||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(t){return new Fa(this,t)}signTransaction(t){return Ct(t).then((e=>{null!=e.from&&(Te(e.from)!==this.address&&Da.throwArgumentError("transaction from address mismatch","transaction.from",t.from),delete e.from);const r=this._signingKey().signDigest(fe(oo(e)));return oo(e,r)}))}signMessage(t){return Ua(this,void 0,void 0,(function*(){return X(this._signingKey().signDigest(Rr(t)))}))}_signTypedData(t,e,r){return Ua(this,void 0,void 0,(function*(){const n=yield Zr.resolveNames(t,e,r,(t=>(null==this.provider&&Da.throwError("cannot resolve ENS names without a provider",T.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:t}),this.provider.resolveName(t))));return X(this._signingKey().signDigest(Zr.hash(n.domain,e,n.value)))}))}encrypt(t,e,r){if("function"!=typeof e||r||(r=e,e={}),r&&"function"!=typeof r)throw new Error("invalid callback");return e||(e={}),Oa(this,t,e,r)}static createRandom(t){let e=aa(16);t||(t={}),t.extraEntropy&&(e=U(z(fe(D([e,t.extraEntropy])),0,16)));const r=ra(e,t.locale);return Fa.fromMnemonic(r,t.path,t.locale)}static fromEncryptedJson(t,e,r){return Ra(t,e,r).then((t=>new Fa(t)))}static fromEncryptedJsonSync(t,e){return new Fa(Ba(t,e))}static fromMnemonic(t,e,r){return e||(e=Yo),new Fa(Qo.fromMnemonic(t,null,r).derivePath(e))}}function ja(t,e){return Qs(Rr(t),e)}var qa=Object.freeze({__proto__:null,Wallet:Fa,verifyMessage:ja,verifyTypedData:function(t,e,r,n){return Qs(Zr.hash(t,e,r),n)}});const Wa=new T("networks/5.5.2");function Ga(t){const e=function(e,r){null==r&&(r={});const n=[];if(e.InfuraProvider)try{n.push(new e.InfuraProvider(t,r.infura))}catch(t){}if(e.EtherscanProvider)try{n.push(new e.EtherscanProvider(t,r.etherscan))}catch(t){}if(e.AlchemyProvider)try{n.push(new e.AlchemyProvider(t,r.alchemy))}catch(t){}if(e.PocketProvider){const r=["goerli","ropsten","rinkeby"];try{const i=new e.PocketProvider(t);i.network&&-1===r.indexOf(i.network.name)&&n.push(i)}catch(t){}}if(e.CloudflareProvider)try{n.push(new e.CloudflareProvider(t))}catch(t){}if(0===n.length)return null;if(e.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===t&&(i=2),new e.FallbackProvider(n,i)}return n[0]};return e.renetwork=function(t){return Ga(t)},e}function Ha(t,e){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(t,e):null};return r.renetwork=function(e){return Ha(t,e)},r}const za={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Ga("homestead")},Va={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Ga("ropsten")},Ka={chainId:63,name:"classicMordor",_defaultProvider:Ha("https://www.ethercluster.com/mordor","classicMordor")},$a={unspecified:{chainId:0,name:"unspecified"},homestead:za,mainnet:za,morden:{chainId:2,name:"morden"},ropsten:Va,testnet:Va,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Ga("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Ga("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Ga("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},classic:{chainId:61,name:"classic",_defaultProvider:Ha("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Ka,classicTestnet:Ka,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Ha("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism"},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Ja(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return U(e)}function Za(t){t=U(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}var Xa=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};function Ya(t,e){return Xa(this,void 0,void 0,(function*(){null==e&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};!0!==e.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client");const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach(((t,e)=>{s[e.toLowerCase()]=t})):n.headers.keys().forEach((t=>{s[t.toLowerCase()]=n.headers.get(t)})),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:U(new Uint8Array(i))}}))}var Qa=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const tl=new T("web/5.5.1");function el(t){return new Promise((e=>{setTimeout(e,t)}))}function rl(t,e){if(null==t)return null;if("string"==typeof t)return t;if(R(t)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return or(t)}catch(t){}return G(t)}return t}function nl(t,e,r){const n="object"==typeof t&&null!=t.throttleLimit?t.throttleLimit:12;tl.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"==typeof t?t.throttleCallback:null,s="object"==typeof t&&"number"==typeof t.throttleSlotInterval?t.throttleSlotInterval:100;tl.assertArgument(s>0&&s%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o={};let a=null;const l={method:"GET"};let h=!1,c=12e4;if("string"==typeof t)a=t;else if("object"==typeof t){if(null!=t&&null!=t.url||tl.throwArgumentError("missing URL","connection.url",t),a=t.url,"number"==typeof t.timeout&&t.timeout>0&&(c=t.timeout),t.headers)for(const e in t.headers)o[e.toLowerCase()]={key:e,value:String(t.headers[e])},["if-none-match","if-modified-since"].indexOf(e.toLowerCase())>=0&&(h=!0);if(l.allowGzip=!!t.allowGzip,null!=t.user&&null!=t.password){"https:"!==a.substring(0,6)&&!0!==t.allowInsecureAuthentication&&tl.throwError("basic authentication requires a secure https url",T.errors.INVALID_ARGUMENT,{argument:"url",url:a,user:t.user,password:"[REDACTED]"});const e=t.user+":"+t.password;o.authorization={key:"Authorization",value:"Basic "+Za(nr(e))}}}const u=new RegExp("^data:([a-z0-9-]+/[a-z0-9-]+);base64,(.*)$","i"),d=a?a.match(u):null;if(d)try{const t={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]},body:Ja(d[2])};let e=t.body;return r&&(e=r(t.body,t)),Promise.resolve(e)}catch(t){tl.throwError("processing response error",T.errors.SERVER_ERROR,{body:rl(d[1],d[2]),error:t,requestBody:null,requestMethod:"GET",url:a})}e&&(l.method="POST",l.body=e,null==o["content-type"]&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==o["content-length"]&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const f={};Object.keys(o).forEach((t=>{const e=o[t];f[e.key]=e.value})),l.headers=f;const p=function(){let t=null;return{promise:new Promise((function(e,r){c&&(t=setTimeout((()=>{null!=t&&(t=null,r(tl.makeError("timeout",T.errors.TIMEOUT,{requestBody:rl(l.body,f["content-type"]),requestMethod:l.method,timeout:c,url:a})))}),c))})),cancel:function(){null!=t&&(clearTimeout(t),t=null)}}}(),g=function(){return Qa(this,void 0,void 0,(function*(){for(let t=0;t<n;t++){let e=null;try{if(e=yield Ya(a,l),t<n)if(301===e.statusCode||302===e.statusCode){const t=e.headers.location||"";if("GET"===l.method&&t.match(/^https:/)){a=e.headers.location;continue}}else if(429===e.statusCode){let r=!0;if(i&&(r=yield i(t,a)),r){let r=0;const n=e.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):s*parseInt(String(Math.random()*Math.pow(2,t))),yield el(r);continue}}}catch(t){e=t.response,null==e&&(p.cancel(),tl.throwError("missing response",T.errors.SERVER_ERROR,{requestBody:rl(l.body,f["content-type"]),requestMethod:l.method,serverError:t,url:a}))}let o=e.body;if(h&&304===e.statusCode?o=null:(e.statusCode<200||e.statusCode>=300)&&(p.cancel(),tl.throwError("bad response",T.errors.SERVER_ERROR,{status:e.statusCode,headers:e.headers,body:rl(o,e.headers?e.headers["content-type"]:null),requestBody:rl(l.body,f["content-type"]),requestMethod:l.method,url:a})),r)try{const t=yield r(o,e);return p.cancel(),t}catch(r){if(r.throttleRetry&&t<n){let e=!0;if(i&&(e=yield i(t,a)),e){const e=s*parseInt(String(Math.random()*Math.pow(2,t)));yield el(e);continue}}p.cancel(),tl.throwError("processing response error",T.errors.SERVER_ERROR,{body:rl(o,e.headers?e.headers["content-type"]:null),error:r,requestBody:rl(l.body,f["content-type"]),requestMethod:l.method,url:a})}return p.cancel(),o}return tl.throwError("failed response",T.errors.SERVER_ERROR,{requestBody:rl(l.body,f["content-type"]),requestMethod:l.method,url:a})}))}();return Promise.race([p.promise,g])}function il(t,e,r){let n=null;if(null!=e){n=nr(e);const r="string"==typeof t?{url:t}:Tt(t);if(r.headers){0!==Object.keys(r.headers).filter((t=>"content-type"===t.toLowerCase())).length||(r.headers=Tt(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};t=r}return nl(t,n,((t,e)=>{let n=null;if(null!=t)try{n=JSON.parse(or(t))}catch(e){tl.throwError("invalid JSON",T.errors.SERVER_ERROR,{body:t,error:e})}return r&&(n=r(n,e)),n}))}function sl(t,e){return e||(e={}),null==(e=Tt(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(r,n){let i=null,s=!1;const o=()=>!s&&(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout((()=>{o()&&n(new Error("timeout"))}),e.timeout));const a=e.retryLimit;let l=0;!function i(){return t().then((function(t){if(void 0!==t)o()&&r(t);else if(e.oncePoll)e.oncePoll.once("poll",i);else if(e.onceBlock)e.onceBlock.once("block",i);else if(!s){if(l++,l>a)return void(o()&&n(new Error("retry limit reached")));let t=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));t<e.floor&&(t=e.floor),t>e.ceiling&&(t=e.ceiling),setTimeout(i,t)}return null}),(function(t){o()&&n(t)}))}()}))}for(var ol=Object.freeze({__proto__:null,_fetchData:nl,fetchJson:il,poll:sl}),al="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ll={},hl=0;hl<al.length;hl++){var cl=al.charAt(hl);if(void 0!==ll[cl])throw new TypeError(cl+" is ambiguous");ll[cl]=hl}function ul(t){var e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function dl(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=ul(e)^n>>5}for(e=ul(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=ul(e)^31&i}return e}function fl(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;var i=(t=r).lastIndexOf("1");if(-1===i)return"No separator character for "+t;if(0===i)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var a=dl(s);if("string"==typeof a)return a;for(var l=[],h=0;h<o.length;++h){var c=o.charAt(h),u=ll[c];if(void 0===u)return"Unknown character "+c;a=ul(a)^u,h+6>=o.length||l.push(u)}return 1!==a?"Invalid checksum for "+t:{prefix:s,words:l}}function pl(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],l=0;l<t.length;++l)for(i=i<<e|t[l],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}var gl={decodeUnsafe:function(){var t=fl.apply(null,arguments);if("object"==typeof t)return t},decode:function(t){var e=fl.apply(null,arguments);if("object"==typeof e)return e;throw new Error(e)},encode:function(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");var n=dl(t=t.toLowerCase());if("string"==typeof n)throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5!=0)throw new Error("Non 5-bit word");n=ul(n)^o,i+=al.charAt(o)}for(s=0;s<6;++s)n=ul(n);for(n^=1,s=0;s<6;++s){i+=al.charAt(n>>5*(5-s)&31)}return i},toWordsUnsafe:function(t){var e=pl(t,8,5,!0);if(Array.isArray(e))return e},toWords:function(t){var e=pl(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)},fromWordsUnsafe:function(t){var e=pl(t,5,8,!1);if(Array.isArray(e))return e},fromWords:function(t){var e=pl(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}};const ml="providers/5.5.2",yl=new T(ml);class wl{constructor(){yl.checkNew(new.target,wl),this.formats=this.getDefaultFormats()}getDefaultFormats(){const t={},e=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),s=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),l=this.type.bind(this);return t.transaction={hash:s,type:l,accessList:wl.allowNull(this.accessList.bind(this),null),blockHash:wl.allowNull(s,null),blockNumber:wl.allowNull(a,null),transactionIndex:wl.allowNull(a,null),confirmations:wl.allowNull(a,null),from:e,gasPrice:wl.allowNull(r),maxPriorityFeePerGas:wl.allowNull(r),maxFeePerGas:wl.allowNull(r),gasLimit:r,to:wl.allowNull(e,null),value:r,nonce:a,data:i,r:wl.allowNull(this.uint256),s:wl.allowNull(this.uint256),v:wl.allowNull(a),creates:wl.allowNull(e,null),raw:wl.allowNull(i)},t.transactionRequest={from:wl.allowNull(e),nonce:wl.allowNull(a),gasLimit:wl.allowNull(r),gasPrice:wl.allowNull(r),maxPriorityFeePerGas:wl.allowNull(r),maxFeePerGas:wl.allowNull(r),to:wl.allowNull(e),value:wl.allowNull(r),data:wl.allowNull((t=>this.data(t,!0))),type:wl.allowNull(a),accessList:wl.allowNull(this.accessList.bind(this),null)},t.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:s,address:e,topics:wl.arrayOf(s),data:i,logIndex:a,blockHash:s},t.receipt={to:wl.allowNull(this.address,null),from:wl.allowNull(this.address,null),contractAddress:wl.allowNull(e,null),transactionIndex:a,root:wl.allowNull(o),gasUsed:r,logsBloom:wl.allowNull(i),blockHash:s,transactionHash:s,logs:wl.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:wl.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:wl.allowNull(r),status:wl.allowNull(a),type:l},t.block={hash:s,parentHash:s,number:a,timestamp:a,nonce:wl.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:e,extraData:i,transactions:wl.allowNull(wl.arrayOf(s)),baseFeePerGas:wl.allowNull(r)},t.blockWithTransactions=Tt(t.block),t.blockWithTransactions.transactions=wl.allowNull(wl.arrayOf(this.transactionResponse.bind(this))),t.filter={fromBlock:wl.allowNull(n,void 0),toBlock:wl.allowNull(n,void 0),blockHash:wl.allowNull(s,void 0),address:wl.allowNull(e,void 0),topics:wl.allowNull(this.topics.bind(this),void 0)},t.filterLog={blockNumber:wl.allowNull(a),blockHash:wl.allowNull(s),transactionIndex:a,removed:wl.allowNull(this.boolean.bind(this)),address:e,data:wl.allowFalsish(i,"0x"),topics:wl.arrayOf(s),transactionHash:s,logIndex:a},t}accessList(t){return ro(t||[])}number(t){return"0x"===t?0:st.from(t).toNumber()}type(t){return"0x"===t||null==t?0:st.from(t).toNumber()}bigNumber(t){return st.from(t)}boolean(t){if("boolean"==typeof t)return t;if("string"==typeof t){if("true"===(t=t.toLowerCase()))return!0;if("false"===t)return!1}throw new Error("invalid boolean - "+t)}hex(t,e){return"string"==typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),q(t))?t.toLowerCase():yl.throwArgumentError("invalid hash","value",t)}data(t,e){const r=this.hex(t,e);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+t);return r}address(t){return Te(t)}callAddress(t){if(!q(t,32))return null;const e=Te(z(t,12));return e===Ge?null:e}contractAddress(t){return Ne(t)}blockTag(t){if(null==t)return"latest";if("earliest"===t)return"0x0";if("latest"===t||"pending"===t)return t;if("number"==typeof t||q(t))return K(t);throw new Error("invalid blockTag")}hash(t,e){const r=this.hex(t,e);return 32!==H(r)?yl.throwArgumentError("invalid hash","value",t):r}difficulty(t){if(null==t)return null;const e=st.from(t);try{return e.toNumber()}catch(t){}return null}uint256(t){if(!q(t))throw new Error("invalid uint256");return J(t,32)}_block(t,e){null!=t.author&&null==t.miner&&(t.miner=t.author);const r=null!=t._difficulty?t._difficulty:t.difficulty,n=wl.check(e,t);return n._difficulty=null==r?null:st.from(r),n}block(t){return this._block(t,this.formats.block)}blockWithTransactions(t){return this._block(t,this.formats.blockWithTransactions)}transactionRequest(t){return wl.check(this.formats.transactionRequest,t)}transactionResponse(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&st.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1!==t.type&&2!==t.type||null!=t.accessList||(t.accessList=[]);const e=wl.check(this.formats.transaction,t);if(null!=t.chainId){let r=t.chainId;q(r)&&(r=st.from(r).toNumber()),e.chainId=r}else{let r=t.networkId;null==r&&null==e.v&&(r=t.chainId),q(r)&&(r=st.from(r).toNumber()),"number"!=typeof r&&null!=e.v&&(r=(e.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),e.chainId=r}return e.blockHash&&"x"===e.blockHash.replace(/0/g,"")&&(e.blockHash=null),e}transaction(t){return lo(t)}receiptLog(t){return wl.check(this.formats.receiptLog,t)}receipt(t){const e=wl.check(this.formats.receipt,t);if(null!=e.root)if(e.root.length<=4){const t=st.from(e.root).toNumber();0===t||1===t?(null!=e.status&&e.status!==t&&yl.throwArgumentError("alt-root-status/status mismatch","value",{root:e.root,status:e.status}),e.status=t,delete e.root):yl.throwArgumentError("invalid alt-root-status","value.root",e.root)}else 66!==e.root.length&&yl.throwArgumentError("invalid root hash","value.root",e.root);return null!=e.status&&(e.byzantium=!0),e}topics(t){return Array.isArray(t)?t.map((t=>this.topics(t))):null!=t?this.hash(t,!0):null}filter(t){return wl.check(this.formats.filter,t)}filterLog(t){return wl.check(this.formats.filterLog,t)}static check(t,e){const r={};for(const n in t)try{const i=t[n](e[n]);void 0!==i&&(r[n]=i)}catch(t){throw t.checkKey=n,t.checkValue=e[n],t}return r}static allowNull(t,e){return function(r){return null==r?e:t(r)}}static allowFalsish(t,e){return function(r){return r?t(r):e}}static arrayOf(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");const r=[];return e.forEach((function(e){r.push(t(e))})),r}}}var vl=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const bl=new T(ml);function El(t){return null==t?"null":(32!==H(t)&&bl.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function _l(t){for(t=t.slice();t.length>0&&null==t[t.length-1];)t.pop();return t.map((t=>{if(Array.isArray(t)){const e={};t.forEach((t=>{e[El(t)]=!0}));const r=Object.keys(e);return r.sort(),r.join("|")}return El(t)})).join("&")}function Al(t){if("string"==typeof t){if(32===H(t=t.toLowerCase()))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter:*:"+_l(t);if(cn.isForkEvent(t))throw bl.warn("not implemented"),new Error("not implemented");if(t&&"object"==typeof t)return"filter:"+(t.address||"*")+":"+_l(t.topics||[])}throw new Error("invalid event - "+t)}function Sl(){return(new Date).getTime()}function xl(t){return new Promise((e=>{setTimeout(e,t)}))}const kl=["block","network","pending","poll"];class Cl{constructor(t,e,r){xt(this,"tag",t),xt(this,"listener",e),xt(this,"once",r)}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");return"tx"!==t[0]?null:t[1]}get filter(){const t=this.tag.split(":");if("filter"!==t[0])return null;const e=t[1],r=""===(n=t[2])?[]:n.split(/&/g).map((t=>{if(""===t)return[];const e=t.split("|").map((t=>"null"===t?null:t));return 1===e.length?e[0]:e}));var n;const i={};return r.length>0&&(i.topics=r),e&&"*"!==e&&(i.address=e),i}pollable(){return this.tag.indexOf(":")>=0||kl.indexOf(this.tag)>=0}}const Pl={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Tl(t){return J(st.from(t).toHexString(),32)}function Nl(t){return Po.encode(D([t,z(Oo(Oo(t)),0,4)]))}const Il=new RegExp("^(ipfs)://(.*)$","i"),Ml=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Il,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Ol(t){try{return or(Rl(t))}catch(t){}return null}function Rl(t){if("0x"===t)return null;const e=st.from(z(t,0,32)).toNumber(),r=st.from(z(t,e,e+32)).toNumber();return z(t,e+32,e+32+r)}function Bl(t){return`https://gateway.ipfs.io/ipfs/${t.substring(7)}`}class Ll{constructor(t,e,r,n){xt(this,"provider",t),xt(this,"name",r),xt(this,"address",t.formatter.address(e)),xt(this,"_resolvedAddress",n)}_fetchBytes(t,e){return vl(this,void 0,void 0,(function*(){const r={to:this.address,data:V([t,Mr(this.name),e||"0x"])};try{return Rl(yield this.provider.call(r))}catch(t){return t.code,T.errors.CALL_EXCEPTION,null}}))}_getAddress(t,e){const r=Pl[String(t)];if(null==r&&bl.throwError(`unsupported coin type: ${t}`,T.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`}),"eth"===r.ilk)return this.provider.formatter.address(e);const n=U(e);if(null!=r.p2pkh){const t=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return Nl(D([[r.p2pkh],"0x"+t[2]]))}}if(null!=r.p2sh){const t=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return Nl(D([[r.p2sh],"0x"+t[2]]))}}if(null!=r.prefix){const t=n[1];let e=n[0];if(0===e?20!==t&&32!==t&&(e=-1):e=-1,e>=0&&n.length===2+t&&t>=1&&t<=75){const t=gl.toWords(n.slice(2));return t.unshift(e),gl.encode(r.prefix,t)}}return null}getAddress(t){return vl(this,void 0,void 0,(function*(){if(null==t&&(t=60),60===t)try{const t={to:this.address,data:"0x3b3b57de"+Mr(this.name).substring(2)},e=yield this.provider.call(t);return"0x"===e||e===Je?null:this.provider.formatter.callAddress(e)}catch(t){if(t.code===T.errors.CALL_EXCEPTION)return null;throw t}const e=yield this._fetchBytes("0xf1cb7e06",Tl(t));if(null==e||"0x"===e)return null;const r=this._getAddress(t,e);return null==r&&bl.throwError("invalid or unsupported coin data",T.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`,coinType:t,data:e}),r}))}getAvatar(){return vl(this,void 0,void 0,(function*(){const t=[{type:"name",content:this.name}];try{const e=yield this.getText("avatar");if(null==e)return null;for(let r=0;r<Ml.length;r++){const n=e.match(Ml[r]);if(null==n)continue;const i=n[1].toLowerCase();switch(i){case"https":return t.push({type:"url",content:e}),{linkage:t,url:e};case"data":return t.push({type:"data",content:e}),{linkage:t,url:e};case"ipfs":return t.push({type:"ipfs",content:e}),{linkage:t,url:Bl(e)};case"erc721":case"erc1155":{const r="erc721"===i?"0xc87b56dd":"0x0e89341c";t.push({type:i,content:e});const s=this._resolvedAddress||(yield this.getAddress()),o=(n[2]||"").split("/");if(2!==o.length)return null;const a=yield this.provider.formatter.address(o[0]),l=J(st.from(o[1]).toHexString(),32);if("erc721"===i){const e=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:V(["0x6352211e",l])}));if(s!==e)return null;t.push({type:"owner",content:e})}else if("erc1155"===i){const e=st.from(yield this.provider.call({to:a,data:V(["0x00fdd58e",J(s,32),l])}));if(e.isZero())return null;t.push({type:"balance",content:e.toString()})}const h={to:this.provider.formatter.address(o[0]),data:V([r,l])};let c=Ol(yield this.provider.call(h));if(null==c)return null;t.push({type:"metadata-url",content:c}),"erc1155"===i&&(c=c.replace("{id}",l.substring(2)),t.push({type:"metadata-url-expanded",content:c}));const u=yield il(c);if(!u)return null;t.push({type:"metadata",content:JSON.stringify(u)});let d=u.image;if("string"!=typeof d)return null;if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(Il))return null;t.push({type:"url-ipfs",content:d}),d=Bl(d)}return t.push({type:"url",content:d}),{linkage:t,url:d}}}}}catch(t){}return null}))}getContentHash(){return vl(this,void 0,void 0,(function*(){const t=yield this._fetchBytes("0xbc1c58d1");if(null==t||"0x"===t)return null;const e=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t=parseInt(e[3],16);if(e[4].length===2*t)return"ipfs://"+Po.encode("0x"+e[1])}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);return r&&64===r[1].length?"bzz://"+r[1]:bl.throwError("invalid or unsupported content hash data",T.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t})}))}getText(t){return vl(this,void 0,void 0,(function*(){let e=nr(t);e=D([Tl(64),Tl(e.length),e]),e.length%32!=0&&(e=D([e,J("0x",32-t.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",G(e));return null==r||"0x"===r?null:or(r)}))}}let Ul=null,Dl=1;class Fl extends un{constructor(t){if(bl.checkNew(new.target,un),super(),this._events=[],this._emitted={block:-2},this.formatter=new.target.getFormatter(),xt(this,"anyNetwork","any"===t),this.anyNetwork&&(t=this.detectNetwork()),t instanceof Promise)this._networkPromise=t,t.catch((t=>{})),this._ready().catch((t=>{}));else{const e=kt(new.target,"getNetwork")(t);e?(xt(this,"_network",e),this.emit("network",e,null)):bl.throwArgumentError("invalid network","network",t)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return vl(this,void 0,void 0,(function*(){if(null==this._network){let t=null;if(this._networkPromise)try{t=yield this._networkPromise}catch(t){}null==t&&(t=yield this.detectNetwork()),t||bl.throwError("no network detected",T.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=t:xt(this,"_network",t),this.emit("network",t,null))}return this._network}))}get ready(){return sl((()=>this._ready().then((t=>t),(t=>{if(t.code!==T.errors.NETWORK_ERROR||"noNetwork"!==t.event)throw t}))))}static getFormatter(){return null==Ul&&(Ul=new wl),Ul}static getNetwork(t){return function(t){if(null==t)return null;if("number"==typeof t){for(const e in $a){const r=$a[e];if(r.chainId===t)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"==typeof t){const e=$a[t];return null==e?null:{name:e.name,chainId:e.chainId,ensAddress:e.ensAddress,_defaultProvider:e._defaultProvider||null}}const e=$a[t.name];if(!e)return"number"!=typeof t.chainId&&Wa.throwArgumentError("invalid network chainId","network",t),t;0!==t.chainId&&t.chainId!==e.chainId&&Wa.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return null==r&&e._defaultProvider&&(r=function(t){return t&&"function"==typeof t.renetwork}(e._defaultProvider)?e._defaultProvider.renetwork(t):e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}(null==t?"homestead":t)}_getInternalBlockNumber(t){return vl(this,void 0,void 0,(function*(){if(yield this._ready(),t>0)for(;this._internalBlockNumber;){const e=this._internalBlockNumber;try{const r=yield e;if(Sl()-r.respTime<=t)return r.blockNumber;break}catch(t){if(this._internalBlockNumber===e)break}}const e=Sl(),r=Ct({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((t=>null),(t=>t))}).then((({blockNumber:t,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=Sl();return(t=st.from(t).toNumber())<this._maxInternalBlockNumber&&(t=this._maxInternalBlockNumber),this._maxInternalBlockNumber=t,this._setFastBlockNumber(t),{blockNumber:t,reqTime:e,respTime:i}}));return this._internalBlockNumber=r,r.catch((t=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)})),(yield r).blockNumber}))}poll(){return vl(this,void 0,void 0,(function*(){const t=Dl++,e=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(t){return void this.emit("error",t)}if(this._setFastBlockNumber(r),this.emit("poll",t,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)bl.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",bl.makeError("network block skew detected",T.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let t=this._emitted.block+1;t<=r;t++)this.emit("block",t);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((t=>{if("block"===t)return;const e=this._emitted[t];"pending"!==e&&r-e>12&&delete this._emitted[t]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((t=>{switch(t.type){case"tx":{const r=t.hash;let n=this.getTransactionReceipt(r).then((t=>t&&null!=t.blockNumber?(this._emitted["t:"+r]=t.blockNumber,this.emit(r,t),null):null)).catch((t=>{this.emit("error",t)}));e.push(n);break}case"filter":{const n=t.filter;n.fromBlock=this._lastBlockNumber+1,n.toBlock=r;const i=this.getLogs(n).then((t=>{0!==t.length&&t.forEach((t=>{this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)}))})).catch((t=>{this.emit("error",t)}));e.push(i);break}}})),this._lastBlockNumber=r,Promise.all(e).then((()=>{this.emit("didPoll",t)})).catch((t=>{this.emit("error",t)}))}else this.emit("didPoll",t)}))}resetEventsBlock(t){this._lastBlockNumber=t-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return vl(this,void 0,void 0,(function*(){return bl.throwError("provider does not support network detection",T.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return vl(this,void 0,void 0,(function*(){const t=yield this._ready(),e=yield this.detectNetwork();if(t.chainId!==e.chainId){if(this.anyNetwork)return this._network=e,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",e,t),yield xl(0),this._network;const r=bl.makeError("underlying network changed",T.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:e});throw this.emit("error",r),r}return t}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((t=>{this._setFastBlockNumber(t)}),(t=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(t){t&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!t&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(t){if("number"!=typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const t=Sl();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((t=>((null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=Sl(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))}waitForTransaction(t,e,r){return vl(this,void 0,void 0,(function*(){return this._waitForTransaction(t,null==e?1:e,r||0,null)}))}_waitForTransaction(t,e,r,n){return vl(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(t);return(i?i.confirmations:0)>=e?i:new Promise(((i,s)=>{const o=[];let a=!1;const l=function(){return!!a||(a=!0,o.forEach((t=>{t()})),!1)},h=t=>{t.confirmations<e||l()||i(t)};if(this.on(t,h),o.push((()=>{this.removeListener(t,h)})),n){let r=n.startBlock,i=null;const h=o=>vl(this,void 0,void 0,(function*(){a||(yield xl(1e3),this.getTransactionCount(n.from).then((c=>vl(this,void 0,void 0,(function*(){if(!a){if(c<=n.nonce)r=o;else{{const e=yield this.getTransaction(t);if(e&&null!=e.blockNumber)return}for(null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));i<=o;){if(a)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const o=r.transactions[i];if(o.hash===t)return;if(o.from===n.from&&o.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(o.hash,e);if(l())return;let i="replaced";return o.data===n.data&&o.to===n.to&&o.value.eq(n.value)?i="repriced":"0x"===o.data&&o.from===o.to&&o.value.isZero()&&(i="cancelled"),void s(bl.makeError("transaction was replaced",T.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(o),hash:t,receipt:r}))}}i++}}a||this.once("block",h)}}))),(t=>{a||this.once("block",h)})))}));if(a)return;this.once("block",h),o.push((()=>{this.removeListener("block",h)}))}if("number"==typeof r&&r>0){const t=setTimeout((()=>{l()||s(bl.makeError("timeout exceeded",T.errors.TIMEOUT,{timeout:r}))}),r);t.unref&&t.unref(),o.push((()=>{clearTimeout(t)}))}}))}))}getBlockNumber(){return vl(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return vl(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield this.perform("getGasPrice",{});try{return st.from(t)}catch(e){return bl.throwError("bad result from backend",T.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e})}}))}getBalance(t,e){return vl(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield Ct({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getBalance",r);try{return st.from(n)}catch(t){return bl.throwError("bad result from backend",T.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:t})}}))}getTransactionCount(t,e){return vl(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield Ct({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getTransactionCount",r);try{return st.from(n).toNumber()}catch(t){return bl.throwError("bad result from backend",T.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:t})}}))}getCode(t,e){return vl(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield Ct({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getCode",r);try{return G(n)}catch(t){return bl.throwError("bad result from backend",T.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:t})}}))}getStorageAt(t,e,r){return vl(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield Ct({address:this._getAddress(t),blockTag:this._getBlockTag(r),position:Promise.resolve(e).then((t=>K(t)))}),i=yield this.perform("getStorageAt",n);try{return G(i)}catch(t){return bl.throwError("bad result from backend",T.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:t})}}))}_wrapTransaction(t,e,r){if(null!=e&&32!==H(e))throw new Error("invalid response - sendTransaction");const n=t;return null!=e&&t.hash!==e&&bl.throwError("Transaction hash mismatch from Provider.sendTransaction.",T.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),n.wait=(e,n)=>vl(this,void 0,void 0,(function*(){let i;null==e&&(e=1),null==n&&(n=0),0!==e&&null!=r&&(i={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:r});const s=yield this._waitForTransaction(t.hash,e,n,i);return null==s&&0===e?null:(this._emitted["t:"+t.hash]=s.blockNumber,0===s.status&&bl.throwError("transaction failed",T.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:s}),s)})),n}sendTransaction(t){return vl(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Promise.resolve(t).then((t=>G(t))),r=this.formatter.transaction(t);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const t=yield this.perform("sendTransaction",{signedTransaction:e});return this._wrapTransaction(r,t,n)}catch(t){throw t.transaction=r,t.transactionHash=r.hash,t}}))}_getTransactionRequest(t){return vl(this,void 0,void 0,(function*(){const e=yield t,r={};return["from","to"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?this._getAddress(t):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?st.from(t):null)))})),["type"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>null!=t?t:null)))})),e.accessList&&(r.accessList=this.formatter.accessList(e.accessList)),["data"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?G(t):null)))})),this.formatter.transactionRequest(yield Ct(r))}))}_getFilter(t){return vl(this,void 0,void 0,(function*(){t=yield t;const e={};return null!=t.address&&(e.address=this._getAddress(t.address)),["blockHash","topics"].forEach((r=>{null!=t[r]&&(e[r]=t[r])})),["fromBlock","toBlock"].forEach((r=>{null!=t[r]&&(e[r]=this._getBlockTag(t[r]))})),this.formatter.filter(yield Ct(e))}))}call(t,e){return vl(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield Ct({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("call",r);try{return G(n)}catch(t){return bl.throwError("bad result from backend",T.errors.SERVER_ERROR,{method:"call",params:r,result:n,error:t})}}))}estimateGas(t){return vl(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Ct({transaction:this._getTransactionRequest(t)}),r=yield this.perform("estimateGas",e);try{return st.from(r)}catch(t){return bl.throwError("bad result from backend",T.errors.SERVER_ERROR,{method:"estimateGas",params:e,result:r,error:t})}}))}_getAddress(t){return vl(this,void 0,void 0,(function*(){"string"!=typeof(t=yield t)&&bl.throwArgumentError("invalid address or ENS name","name",t);const e=yield this.resolveName(t);return null==e&&bl.throwError("ENS name not configured",T.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(t)})`}),e}))}_getBlock(t,e){return vl(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;let r=-128;const n={includeTransactions:!!e};if(q(t,32))n.blockHash=t;else try{n.blockTag=yield this._getBlockTag(t),q(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(e){bl.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t)}return sl((()=>vl(this,void 0,void 0,(function*(){const t=yield this.perform("getBlock",n);if(null==t)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(e){let e=null;for(let r=0;r<t.transactions.length;r++){const n=t.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==e&&(e=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let t=e-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}}const r=this.formatter.blockWithTransactions(t);return r.transactions=r.transactions.map((t=>this._wrapTransaction(t))),r}return this.formatter.block(t)}))),{oncePoll:this})}))}getBlock(t){return this._getBlock(t,!1)}getBlockWithTransactions(t){return this._getBlock(t,!0)}getTransaction(t){return vl(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return sl((()=>vl(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(t){return vl(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return sl((()=>vl(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return n}))),{oncePoll:this})}))}getLogs(t){return vl(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Ct({filter:this._getFilter(t)}),r=yield this.perform("getLogs",e);return r.forEach((t=>{null==t.removed&&(t.removed=!1)})),wl.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return vl(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(t){return vl(this,void 0,void 0,(function*(){if("number"==typeof(t=yield t)&&t<0){t%1&&bl.throwArgumentError("invalid BlockTag","blockTag",t);let e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return e+=t,e<0&&(e=0),this.formatter.blockTag(e)}return this.formatter.blockTag(t)}))}getResolver(t){return vl(this,void 0,void 0,(function*(){try{const e=yield this._getResolver(t);return null==e?null:new Ll(this,e,t)}catch(t){if(t.code===T.errors.CALL_EXCEPTION)return null;throw t}}))}_getResolver(t){return vl(this,void 0,void 0,(function*(){const e=yield this.getNetwork();e.ensAddress||bl.throwError("network does not support ENS",T.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:e.name});const r={to:e.ensAddress,data:"0x0178b8bf"+Mr(t).substring(2)};try{return this.formatter.callAddress(yield this.call(r))}catch(t){if(t.code===T.errors.CALL_EXCEPTION)return null;throw t}}))}resolveName(t){return vl(this,void 0,void 0,(function*(){t=yield t;try{return Promise.resolve(this.formatter.address(t))}catch(e){if(q(t))throw e}"string"!=typeof t&&bl.throwArgumentError("invalid ENS name","name",t);const e=yield this.getResolver(t);return e?yield e.getAddress():null}))}lookupAddress(t){return vl(this,void 0,void 0,(function*(){t=yield t;const e=(t=this.formatter.address(t)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(e);if(!r)return null;let n=U(yield this.call({to:r,data:"0x691f3431"+Mr(e).substring(2)}));if(n.length<32||!st.from(n.slice(0,32)).eq(32))return null;if(n=n.slice(32),n.length<32)return null;const i=st.from(n.slice(0,32)).toNumber();if(n=n.slice(32),i>n.length)return null;const s=or(n.slice(0,i));return(yield this.resolveName(s))!=t?null:s}))}getAvatar(t){return vl(this,void 0,void 0,(function*(){let e=null;if(q(t)){const r=this.formatter.address(t),n=r.substring(2).toLowerCase()+".addr.reverse",i=yield this._getResolver(n);if(!i)return null;e=new Ll(this,i,"_",r)}else if(e=yield this.getResolver(t),!e)return null;const r=yield e.getAvatar();return null==r?null:r.url}))}perform(t,e){return bl.throwError(t+" not implemented",T.errors.NOT_IMPLEMENTED,{operation:t})}_startEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_stopEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_addEventListener(t,e,r){const n=new Cl(Al(t),e,r);return this._events.push(n),this._startEvent(n),this}on(t,e){return this._addEventListener(t,e,!1)}once(t,e){return this._addEventListener(t,e,!0)}emit(t,...e){let r=!1,n=[],i=Al(t);return this._events=this._events.filter((t=>t.tag!==i||(setTimeout((()=>{t.listener.apply(this,e)}),0),r=!0,!t.once||(n.push(t),!1)))),n.forEach((t=>{this._stopEvent(t)})),r}listenerCount(t){if(!t)return this._events.length;let e=Al(t);return this._events.filter((t=>t.tag===e)).length}listeners(t){if(null==t)return this._events.map((t=>t.listener));let e=Al(t);return this._events.filter((t=>t.tag===e)).map((t=>t.listener))}off(t,e){if(null==e)return this.removeAllListeners(t);const r=[];let n=!1,i=Al(t);return this._events=this._events.filter((t=>t.tag!==i||t.listener!=e||(!!n||(n=!0,r.push(t),!1)))),r.forEach((t=>{this._stopEvent(t)})),this}removeAllListeners(t){let e=[];if(null==t)e=this._events,this._events=[];else{const r=Al(t);this._events=this._events.filter((t=>t.tag!==r||(e.push(t),!1)))}return e.forEach((t=>{this._stopEvent(t)})),this}}var jl=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const ql=new T(ml),Wl=["call","estimateGas"];function Gl(t,e,r){if("call"===t&&e.code===T.errors.SERVER_ERROR){const t=e.error;if(t&&t.message.match("reverted")&&q(t.data))return t.data;ql.throwError("missing revert data in call exception",T.errors.CALL_EXCEPTION,{error:e,data:"0x"})}let n=e.message;e.code===T.errors.SERVER_ERROR&&e.error&&"string"==typeof e.error.message?n=e.error.message:"string"==typeof e.body?n=e.body:"string"==typeof e.responseText&&(n=e.responseText),n=(n||"").toLowerCase();const i=r.transaction||r.signedTransaction;throw n.match(/insufficient funds|base fee exceeds gas limit/)&&ql.throwError("insufficient funds for intrinsic transaction cost",T.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:i}),n.match(/nonce too low/)&&ql.throwError("nonce has already been used",T.errors.NONCE_EXPIRED,{error:e,method:t,transaction:i}),n.match(/replacement transaction underpriced/)&&ql.throwError("replacement fee too low",T.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:i}),n.match(/only replay-protected/)&&ql.throwError("legacy pre-eip-155 transactions not supported",T.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:i}),Wl.indexOf(t)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&ql.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",T.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:i}),e}function Hl(t){return new Promise((function(e){setTimeout(e,t)}))}function zl(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Vl(t){return t?t.toLowerCase():t}const Kl={};class $l extends mn{constructor(t,e,r){if(ql.checkNew(new.target,$l),super(),t!==Kl)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");xt(this,"provider",e),null==r&&(r=0),"string"==typeof r?(xt(this,"_address",this.provider.formatter.address(r)),xt(this,"_index",null)):"number"==typeof r?(xt(this,"_index",r),xt(this,"_address",null)):ql.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(t){return ql.throwError("cannot alter JSON-RPC Signer connection",T.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Jl(Kl,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((t=>(t.length<=this._index&&ql.throwError("unknown account #"+this._index,T.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(t[this._index]))))}sendUncheckedTransaction(t){t=Tt(t);const e=this.getAddress().then((t=>(t&&(t=t.toLowerCase()),t)));if(null==t.gasLimit){const r=Tt(t);r.from=e,t.gasLimit=this.provider.estimateGas(r)}return null!=t.to&&(t.to=Promise.resolve(t.to).then((t=>jl(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.provider.resolveName(t);return null==e&&ql.throwArgumentError("provided ENS name resolves to null","tx.to",t),e}))))),Ct({tx:Ct(t),sender:e}).then((({tx:e,sender:r})=>{null!=e.from?e.from.toLowerCase()!==r&&ql.throwArgumentError("from address mismatch","transaction",t):e.from=r;const n=this.provider.constructor.hexlifyTransaction(e,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((t=>t),(t=>Gl("sendTransaction",t,n)))}))}signTransaction(t){return ql.throwError("signing transactions is unsupported",T.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(t){return jl(this,void 0,void 0,(function*(){const e=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(t);try{return yield sl((()=>jl(this,void 0,void 0,(function*(){const t=yield this.provider.getTransaction(r);if(null!==t)return this.provider._wrapTransaction(t,r,e)}))),{oncePoll:this.provider})}catch(t){throw t.transactionHash=r,t}}))}signMessage(t){return jl(this,void 0,void 0,(function*(){const e="string"==typeof t?nr(t):t,r=yield this.getAddress();return yield this.provider.send("personal_sign",[G(e),r.toLowerCase()])}))}_legacySignMessage(t){return jl(this,void 0,void 0,(function*(){const e="string"==typeof t?nr(t):t,r=yield this.getAddress();return yield this.provider.send("eth_sign",[r.toLowerCase(),G(e)])}))}_signTypedData(t,e,r){return jl(this,void 0,void 0,(function*(){const n=yield Zr.resolveNames(t,e,r,(t=>this.provider.resolveName(t))),i=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(Zr.getPayload(n.domain,e,n.value))])}))}unlock(t){return jl(this,void 0,void 0,(function*(){const e=this.provider,r=yield this.getAddress();return e.send("personal_unlockAccount",[r.toLowerCase(),t,null])}))}}class Jl extends $l{sendTransaction(t){return this.sendUncheckedTransaction(t).then((t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:e=>this.provider.waitForTransaction(t,e)})))}}const Zl={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Xl extends Fl{constructor(t,e){ql.checkNew(new.target,Xl);let r=e;null==r&&(r=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then((e=>{t(e)}),(t=>{e(t)}))}),0)}))),super(r),t||(t=kt(this.constructor,"defaultUrl")()),xt(this,"connection","string"==typeof t?Object.freeze({url:t}):Object.freeze(Tt(t))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return jl(this,void 0,void 0,(function*(){yield Hl(0);let t=null;try{t=yield this.send("eth_chainId",[])}catch(e){try{t=yield this.send("net_version",[])}catch(t){}}if(null!=t){const e=kt(this.constructor,"getNetwork");try{return e(st.from(t).toNumber())}catch(e){return ql.throwError("could not detect network",T.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}}return ql.throwError("could not detect network",T.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(t){return new $l(Kl,this,t)}getUncheckedSigner(t){return this.getSigner(t).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((t=>t.map((t=>this.formatter.address(t)))))}send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Ot(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(n&&this._cache[t])return this._cache[t];const i=il(this.connection,JSON.stringify(r),zl).then((t=>(this.emit("debug",{action:"response",request:r,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",error:t,request:r,provider:this}),t}));return n&&(this._cache[t]=i,setTimeout((()=>{this._cache[t]=null}),0)),i}prepareRequest(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Vl(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Vl(e.address),e.blockTag]];case"getCode":return["eth_getCode",[Vl(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Vl(e.address),e.position,e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":return e.blockTag?["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]:e.blockHash?["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":return["eth_call",[kt(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0}),e.blockTag]];case"estimateGas":return["eth_estimateGas",[kt(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0})]];case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=Vl(e.filter.address)),["eth_getLogs",[e.filter]]}return null}perform(t,e){return jl(this,void 0,void 0,(function*(){if("call"===t||"estimateGas"===t){const t=e.transaction;if(t&&null!=t.type&&st.from(t.type).isZero()&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((e=Tt(e)).transaction=Tt(t),delete e.transaction.type)}}const r=this.prepareRequest(t,e);null==r&&ql.throwError(t+" not implemented",T.errors.NOT_IMPLEMENTED,{operation:t});try{return yield this.send(r[0],r[1])}catch(r){return Gl(t,r,e)}}))}_startEvent(t){"pending"===t.tag&&this._startPending(),super._startEvent(t)}_startPending(){if(null!=this._pendingFilter)return;const t=this,e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e,e.then((function(r){return function n(){t.send("eth_getFilterChanges",[r]).then((function(r){if(t._pendingFilter!=e)return null;let n=Promise.resolve();return r.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",n=n.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),n.then((function(){return Hl(1e3)}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){n()}),0),null;t.send("eth_uninstallFilter",[r])})).catch((t=>{}))}(),r})).catch((t=>{}))}_stopEvent(t){"pending"===t.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(t)}static hexlifyTransaction(t,e){const r=Tt(Zl);if(e)for(const t in e)e[t]&&(r[t]=!0);Pt(t,r);const n={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(null==t[e])return;const r=K(t[e]);"gasLimit"===e&&(e="gas"),n[e]=r})),["from","to","data"].forEach((function(e){null!=t[e]&&(n[e]=G(t[e]))})),t.accessList&&(n.accessList=ro(t.accessList)),n}}const Yl=new T(ml);let Ql=1;function th(t,e){const r="Web3LegacyFetcher";return function(t,n){const i={method:t,params:n,id:Ql++,jsonrpc:"2.0"};return new Promise(((t,n)=>{this.emit("debug",{action:"request",fetcher:r,request:Ot(i),provider:this}),e(i,((e,s)=>{if(e)return this.emit("debug",{action:"response",fetcher:r,error:e,request:i,provider:this}),n(e);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:s,provider:this}),s.error){const t=new Error(s.error.message);return t.code=s.error.code,t.data=s.error.data,n(t)}t(s.result)}))}))}}class eh extends Xl{constructor(t,e){Yl.checkNew(new.target,eh),null==t&&Yl.throwArgumentError("missing provider","provider",t);let r=null,n=null,i=null;"function"==typeof t?(r="unknown:",n=t):(r=t.host||t.path||"",!r&&t.isMetaMask&&(r="metamask"),i=t,t.request?(""===r&&(r="eip-1193:"),n=function(t){return function(e,r){null==r&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Ot(n),provider:this}),t.request(n).then((t=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:t,provider:this}),t}))}}(t)):t.sendAsync?n=th(0,t.sendAsync.bind(t)):t.send?n=th(0,t.send.bind(t)):Yl.throwArgumentError("unsupported provider","provider",t),r||(r="unknown:")),super(r,e),xt(this,"jsonRpcFetchFunc",n),xt(this,"provider",i)}send(t,e){return this.jsonRpcFetchFunc(t,e)}}new T(ml);var rh=Object.freeze({__proto__:null,decode:function(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return U(e)},encode:function(t){t=U(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}});const nh=new RegExp("^bytes([0-9]+)$"),ih=new RegExp("^(u?int)([0-9]*)$"),sh=new RegExp("^(.*)\\[([0-9]*)\\]$"),oh=new T("solidity/5.5.0");function ah(t,e,r){switch(t){case"address":return r?j(e,32):U(e);case"string":return nr(e);case"bytes":return U(e);case"bool":return e=e?"0x01":"0x00",r?j(e,32):U(e)}let n=t.match(ih);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!=0||0===i||i>256)&&oh.throwArgumentError("invalid number type","type",t),r&&(i=256),j(e=st.from(e).toTwos(i),i/8)}if(n=t.match(nh),n){const i=parseInt(n[1]);return(String(i)!==n[1]||0===i||i>32)&&oh.throwArgumentError("invalid bytes type","type",t),U(e).byteLength!==i&&oh.throwArgumentError(`invalid value for ${t}`,"value",e),r?U((e+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):e}if(n=t.match(sh),n&&Array.isArray(e)){const r=n[1];parseInt(n[2]||String(e.length))!=e.length&&oh.throwArgumentError(`invalid array length for ${t}`,"value",e);const i=[];return e.forEach((function(t){i.push(ah(r,t,!0))})),D(i)}return oh.throwArgumentError("invalid type","type",t)}function lh(t,e){t.length!=e.length&&oh.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach((function(t,n){r.push(ah(t,e[n]))})),G(D(r))}var hh=Object.freeze({__proto__:null,pack:lh,keccak256:function(t,e){return fe(lh(t,e))},sha256:function(t,e){return Oo(lh(t,e))}});const ch=new T("units/5.5.0"),uh=["wei","kwei","mwei","gwei","szabo","finney","ether"];function dh(t,e){if("string"==typeof e){const t=uh.indexOf(e);-1!==t&&(e=3*t)}return yt(t,null!=e?e:18)}function fh(t,e){if("string"!=typeof t&&ch.throwArgumentError("value must be a string","value",t),"string"==typeof e){const t=uh.indexOf(e);-1!==t&&(e=3*t)}return wt(t,null!=e?e:18)}var ph=Object.freeze({__proto__:null,commify:function(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||"."===t||"-."===t)&&ch.throwArgumentError("invalid value","value",t);let r=e[0],n="";for("-"===r.substring(0,1)&&(n="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");let i="";for(2===e.length&&(i="."+(e[1]||"0"));i.length>2&&"0"===i[i.length-1];)i=i.substring(0,i.length-1);const s=[];for(;r.length;){if(r.length<=3){s.unshift(r);break}{const t=r.length-3;s.unshift(r.substring(t)),r=r.substring(0,t)}}return n+s.join(",")+i},formatUnits:dh,parseUnits:fh,formatEther:function(t){return dh(t,18)},parseEther:function(t){return fh(t,18)}});new T("ethers/5.5.3");const gh="function"==typeof atob,mh="function"==typeof btoa,yh="function"==typeof Buffer,wh="function"==typeof TextDecoder?new TextDecoder:void 0,vh="function"==typeof TextEncoder?new TextEncoder:void 0,bh=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Eh=(t=>{let e={};return t.forEach(((t,r)=>e[t]=r)),e})(bh),_h=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ah=String.fromCharCode.bind(String),Sh="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(t,e=(t=>t))=>new Uint8Array(Array.prototype.slice.call(t,0).map(e)),xh=t=>t.replace(/=/g,"").replace(/[+\/]/g,(t=>"+"==t?"-":"_")),kh=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),Ch=t=>{let e,r,n,i,s="";const o=t.length%3;for(let o=0;o<t.length;){if((r=t.charCodeAt(o++))>255||(n=t.charCodeAt(o++))>255||(i=t.charCodeAt(o++))>255)throw new TypeError("invalid character found");e=r<<16|n<<8|i,s+=bh[e>>18&63]+bh[e>>12&63]+bh[e>>6&63]+bh[63&e]}return o?s.slice(0,o-3)+"===".substring(o):s},Ph=mh?t=>btoa(t):yh?t=>Buffer.from(t,"binary").toString("base64"):Ch,Th=yh?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let r=0,n=t.length;r<n;r+=4096)e.push(Ah.apply(null,t.subarray(r,r+4096)));return Ph(e.join(""))},Nh=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?Ah(192|e>>>6)+Ah(128|63&e):Ah(224|e>>>12&15)+Ah(128|e>>>6&63)+Ah(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return Ah(240|e>>>18&7)+Ah(128|e>>>12&63)+Ah(128|e>>>6&63)+Ah(128|63&e)},Ih=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Mh=t=>t.replace(Ih,Nh),Oh=yh?t=>Buffer.from(t,"utf8").toString("base64"):vh?t=>Th(vh.encode(t)):t=>Ph(Mh(t)),Rh=(t,e=!1)=>e?xh(Oh(t)):Oh(t),Bh=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Lh=t=>{switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return Ah(55296+(e>>>10))+Ah(56320+(1023&e));case 3:return Ah((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return Ah((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Uh=t=>t.replace(Bh,Lh),Dh=t=>{if(t=t.replace(/\s+/g,""),!_h.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,r,n,i="";for(let s=0;s<t.length;)e=Eh[t.charAt(s++)]<<18|Eh[t.charAt(s++)]<<12|(r=Eh[t.charAt(s++)])<<6|(n=Eh[t.charAt(s++)]),i+=64===r?Ah(e>>16&255):64===n?Ah(e>>16&255,e>>8&255):Ah(e>>16&255,e>>8&255,255&e);return i},Fh=gh?t=>atob(kh(t)):yh?t=>Buffer.from(t,"base64").toString("binary"):Dh,jh=yh?t=>Sh(Buffer.from(t,"base64")):t=>Sh(Fh(t),(t=>t.charCodeAt(0))),qh=yh?t=>Buffer.from(t,"base64").toString("utf8"):wh?t=>wh.decode(jh(t)):t=>Uh(Fh(t)),Wh=t=>kh(t.replace(/[-_]/g,(t=>"-"==t?"+":"/"))),Gh=t=>qh(Wh(t)),Hh=Rh,zh=Gh;
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
var Vh=function(){return Vh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Vh.apply(this,arguments)};function Kh(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(o,a)}l((n=n.apply(t,e||[])).next())}))}function $h(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var Jh=function(){function t(t){this.prefix=ec,this.address=(null==t?void 0:t.address)?t.address.toLowerCase():"",this.claims=(null==t?void 0:t.claims)?t.claims:{app:"",iat:0,exp:0,v:tc},this.signature=(null==t?void 0:t.signature)?t.signature:"",this.extra=(null==t?void 0:t.extra)?t.extra:""}return t.prototype.setIssuedAtNow=function(){this.claims.iat=Math.round((new Date).getTime()/1e3)},t.prototype.setExpiryIn=function(t){this.claims.exp=Math.round((new Date).getTime()/1e3)+t},t.prototype.validateClaims=function(){return Zh(this.claims)},t.prototype.messageDigest=function(){var t,e=this.validateClaims();if(e.err)throw e.err;return U((t=this.messageTypedData(),Zr.hash(t.domain,t.types,t.message)))},t.prototype.messageTypedData=function(){var t={domain:Vh({},rc),types:{Claims:[]},message:{}};return this.claims.app&&this.claims.app.length>0&&(t.types.Claims.push({name:"app",type:"string"}),t.message.app=this.claims.app),this.claims.iat&&this.claims.iat>0&&(t.types.Claims.push({name:"iat",type:"int64"}),t.message.iat=this.claims.iat),this.claims.exp&&this.claims.exp>0&&(t.types.Claims.push({name:"exp",type:"int64"}),t.message.exp=this.claims.exp),this.claims.n&&this.claims.n>0&&(t.types.Claims.push({name:"n",type:"uint64"}),t.message.n=this.claims.n),this.claims.typ&&this.claims.typ.length>0&&(t.types.Claims.push({name:"typ",type:"string"}),t.message.typ=this.claims.typ),this.claims.ogn&&this.claims.ogn.length>0&&(t.types.Claims.push({name:"ogn",type:"string"}),t.message.ogn=this.claims.ogn),this.claims.v&&this.claims.v.length>0&&(t.types.Claims.push({name:"v",type:"string"}),t.message.v=this.claims.v),t},t}(),Zh=function(t){if(""===t.app)return{ok:!1,err:new Error("claims: app is empty")};var e=Math.round((new Date).getTime()/1e3),r=31536300;return""===t.v?{ok:!1,err:new Error("claims: ethauth version is empty")}:t.iat&&0!==t.iat&&(t.iat>e+300||t.iat<e-r)?{ok:!1,err:new Error("claims: iat is invalid")}:t.exp<e-300||t.exp>e+r?{ok:!1,err:new Error("claims: token has expired")}:{ok:!0}},Xh=function(t,e,r){return Kh(void 0,void 0,void 0,(function(){var t,e;return $h(this,(function(n){return t=r.messageDigest(),"0x"===(e=ja(t,r.signature)).slice(0,2)&&42===e.length&&e.toLowerCase()===r.address.toLowerCase()?[2,{isValid:!0,address:r.address}]:[2,{isValid:!1}]}))}))},Yh=function(t,e,r){return Kh(void 0,void 0,void 0,(function(){var e,n,i;return $h(this,(function(s){switch(s.label){case 0:return t&&void 0!==t?(e=r.messageDigest(),[4,t.getCode(r.address)]):[2,{isValid:!1}];case 1:if("0x"===(n=s.sent())||n.length<=2)throw new Error("ValidateContractAccountProof failed. unable to fetch wallet contract code");return i=["function isValidSignature(bytes32, bytes) public view returns (bytes4)"],[4,new xo(r.address,i,t).isValidSignature(e,U(r.signature))];case 2:return s.sent()===Qh?[2,{isValid:!0,address:r.address}]:[2,{isValid:!1}]}}))}))},Qh="0x1626ba7e",tc="1",ec="eth",rc={name:"ETHAuth",version:tc},nc=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.configJsonRpcProvider=function(e){return Kh(t,void 0,void 0,(function(){var t;return $h(this,(function(r){switch(r.label){case 0:return this.provider=new Xl(e),[4,this.provider.send("net_version",[])];case 1:if(t=r.sent(),this.chainId=parseInt(t),!this.chainId||0===this.chainId||NaN===this.chainId)throw new Error("ethauth: unable to get chainId");return this.ethereumJsonRpcURL=e,[2]}}))}))},this.configValidators=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(0==e.length)throw new Error("validators list is empty");t.validators=e},this.encodeProof=function(e,r){return void 0===r&&(r=!1),Kh(t,void 0,void 0,(function(){var t,n;return $h(this,(function(i){switch(i.label){case 0:if(42!==e.address.length||"0x"!==e.address.slice(0,2))throw new Error("ethauth: invalid address");if(""===e.signature||"0x"!==e.signature.slice(0,2))throw new Error("ethauth: invalid signature");if(e.extra&&"0x"!==e.extra.slice(0,2))throw new Error("ethauth: invalid extra encoding, expecting hex data");return[4,this.validateProof(e,r)];case 1:if(!i.sent())throw new Error("ethauth: proof is invalid");return t=JSON.stringify(e.claims),n=ec+"."+e.address.toLowerCase()+"."+Hh(t,!0)+"."+e.signature,e.extra&&e.extra.length>0&&(n+="."+e.extra),[2,n]}}))}))},this.decodeProof=function(e,r){return void 0===r&&(r=!1),Kh(t,void 0,void 0,(function(){var t,n,i,s,o,a,l,h,c;return $h(this,(function(u){switch(u.label){case 0:if((t=e.split(".")).length<4||t.length>5)throw new Error("ethauth: invalid proof string");if(n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],n!==ec)throw new Error("ethauth: not an ethauth proof");return l=zh(s),h=JSON.parse(l),c=new Jh({address:i,claims:h,signature:o,extra:a}),[4,this.validateProof(c,r)];case 1:if(!u.sent())throw new Error("ethauth: proof is invalid");return[2,c]}}))}))},this.validateProof=function(e,r){return void 0===r&&(r=!1),Kh(t,void 0,void 0,(function(){var t;return $h(this,(function(n){switch(n.label){case 0:if((t=this.validateProofClaims(e)).err)throw new Error("ethauth: proof claims are invalid ".concat(t.err));return!0===r?[3,2]:[4,this.validateProofSignature(e)];case 1:if(!0!==n.sent())throw new Error("ethauth: proof signature is invalid");n.label=2;case 2:return[2,!0]}}))}))},this.validateProofSignature=function(e){return Kh(t,void 0,void 0,(function(){var t,r,n;return $h(this,(function(i){switch(i.label){case 0:t=[],n=0,i.label=1;case 1:if(!(n<this.validators.length))return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,(0,this.validators[n])(this.provider,this.chainId,e)];case 3:return!0===(r=i.sent().isValid)?[2,!0]:(t.push(r),[3,5]);case 4:return i.sent(),t.push(!1),[3,5];case 5:return n++,[3,1];case 6:for(n=0;n<t.length;n++)if(t[n])return[2,!0];return[2,!1]}}))}))},this.validateProofClaims=function(t){return t.validateClaims()},0==e.length?this.validators=[Xh,Yh]:this.validators=e};const ic="0x603a600e3d39601a805130553df3363d3d373d3d3d363d30545af43d82803e903d91601857fd5bf3",sc="@sequence.config.imageHashes",oc=t=>`@sequence.config.${t}`;let ac;try{ac=localStorage}catch(t){const e=new Map;ac={getItem:t=>{var r;return null!=(r=e.get(t))?r:null},setItem:(t,r)=>e.set(t,r),removeItem:t=>e.delete(t)}}function lc(t){var e;const r=JSON.parse(null!=(e=ac.getItem(oc(t)))?e:"null");return r?(hc(t),r):void 0}function hc(t){var e;let r=JSON.parse(null!=(e=ac.getItem(sc))?e:"[]");for(r=r.filter((e=>e!==t)),r.push(t);r.length>10;)ac.removeItem(oc(r.shift()));ac.setItem(sc,JSON.stringify(r))}const cc=t=>t.signers.reduce(((t,e)=>st.from(e.weight).add(t)),ze).gte(st.from(t.threshold)),uc=(t,e,r=!1)=>{if("string"==typeof t){const r=fe(lh(["bytes","bytes32"],[ic,J(e.mainModule,32)]));return Te(z(fe(lh(["bytes1","address","bytes32","bytes32"],["0xff",e.factory,t,r])),12))}return t.address&&!r?t.address:uc(dc(t),e)},dc=t=>{const e=(t=fc(t)).signers.reduce(((t,e)=>fe(kr.encode(["bytes32","uint8","address"],[t,e.weight,e.address]))),lh(["uint256"],[t.threshold]));return function(t,e){ac.setItem(oc(t),JSON.stringify(e)),hc(t)}(e,t),e},fc=t=>{t.signers.sort(((t,e)=>gc(t.address,e.address))),t.signers.forEach((t=>t.address=Te(t.address))),t.address&&(t.address=Te(t.address));const e=t.signers.map((t=>t.address));if(e.filter(((t,r)=>e.indexOf(t)!==r)).length>0)throw new Error("invalid wallet config: duplicate signer addresses detected in the config, ${signerDupes}");return t},pc=(t,e)=>dc(t)===dc(e),gc=(t,e)=>{const r=st.from(t),n=st.from(e);return r.lt(n)?-1:r.eq(n)?0:1};function mc(t,e){const r=t=>({weight:st.from(t.weight).toNumber(),address:Te(t.address)}),n=t.signers.map(r),i=e.set?e.set.map(r):[],s=e.del?e.del.map((t=>Te(t.address))):[],o=i.map((t=>t.address)),a=n.filter((t=>-1===s.indexOf(t.address)&&-1===o.indexOf(t.address))).concat(...i);return fc({address:t.address,threshold:e.threshold?st.from(e.threshold).toNumber():t.threshold,signers:a})}function yc(t,e){return fc({threshold:st.from(t).toNumber(),signers:e.map((t=>({weight:st.from(t.weight).toNumber(),address:Te(t.address)})))})}const wc=t=>Hh(JSON.stringify(t),!0),vc=t=>{if(null!=t)return JSON.parse(zh(t))},bc=t=>U(fe("string"==typeof t?nr(t):t)),Ec=(t,e,r)=>lh(["string","uint256","address","bytes32"],["",e,t,r]),_c=(t,e,r)=>fe(Ec(t,e,r)),Ac=()=>!1,Sc=t=>{const e=t.split(".");if(3!==e.length)throw new Error("invalid jwt");return JSON.parse(zh(e[1]))};var xc;!function(t){t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.DISABLED=5]="DISABLED"}(xc||(xc={}));class kc{constructor(t){this.config=t,this.logLevel=void 0,this.configure(t)}configure(t){switch(this.config=n({},this.config,t),this.config.logLevel){case"DEBUG":this.logLevel=xc.DEBUG;break;case"INFO":default:this.logLevel=xc.INFO;break;case"WARN":this.logLevel=xc.WARN;break;case"ERROR":this.logLevel=xc.ERROR;break;case"DISABLED":this.logLevel=xc.DISABLED}void 0===this.config.silence&&(this.config.silence=!1)}debug(t,...e){!0!==this.config.silence&&this.logLevel===xc.DEBUG&&console.log(t,...e)}info(t,...e){!0!==this.config.silence&&this.logLevel<=xc.INFO&&console.log(t,...e)}warn(t,...e){!0!==this.config.silence&&this.logLevel<=xc.WARN&&(console.warn(t,...e),this.config.onwarn&&this.config.onwarn(t,e))}error(t,...e){!0!==this.config.silence&&this.logLevel<=xc.ERROR&&(console.error(t,...e),this.config.onerror&&this.config.onerror(t,e))}}const Cc=new kc({logLevel:"INFO",silence:!0});function Pc(t,e){return function(...r){const n=Array.prototype.slice.call(r);return new Promise((async(r,i)=>{try{n.push(((t,e)=>t?i(t):r(e))),await t.apply(e,n)}catch(t){i(t)}}))}}const Tc=(t=0,e=Number.MAX_SAFE_INTEGER)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t);const Nc=t=>{if(!t||"string"!=typeof t)return"";const e=t.match(/[\d.]+/);return e&&e.length>0?e[0].trim():""},Ic=t=>{if(!t||"string"!=typeof t)return"";const e=t.match(/[\w\s\d]+/);return e&&e.length>0?e[0].trim():""},Mc=t=>{if(!t||"string"!=typeof t)return"";const e=t.match(/[\w\d.\-:\/]+/);return e&&e.length>0?e[0].trim():""},Oc=t=>{const e=n({},t.types);return delete e.EIP712Domain,Zr.hash(t.domain,e,t.message)},Rc=t=>U(Oc(t));var Bc=f(an),Lc=f(Ie),Uc=f(rh),Dc=f(No),Fc=f(Y),jc=f(Xr),qc=f(na),Wc=f(La),Gc=f(pe),Hc=f(N),zc=f(Bo),Vc=f(hh),Kc=f(la),$c=f(Bt),Jc=f(Ae),Zc=f(zs),Xc=f(vr),Yc=f(ho),Qc=f(ph),tu=f(qa),eu=f(ol),ru=d((function(t,e){var r=c&&c.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),n=c&&c.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=c&&c.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.formatBytes32String=e.Utf8ErrorFuncs=e.toUtf8String=e.toUtf8CodePoints=e.toUtf8Bytes=e._toEscapedUtf8String=e.nameprep=e.hexDataSlice=e.hexDataLength=e.hexZeroPad=e.hexValue=e.hexStripZeros=e.hexConcat=e.isHexString=e.hexlify=e.base64=e.base58=e.TransactionDescription=e.LogDescription=e.Interface=e.SigningKey=e.HDNode=e.defaultPath=e.isBytesLike=e.isBytes=e.zeroPad=e.stripZeros=e.concat=e.arrayify=e.shallowCopy=e.resolveProperties=e.getStatic=e.defineReadOnly=e.deepCopy=e.checkProperties=e.poll=e.fetchJson=e._fetchData=e.RLP=e.Logger=e.checkResultErrors=e.FormatTypes=e.ParamType=e.FunctionFragment=e.EventFragment=e.ErrorFragment=e.ConstructorFragment=e.Fragment=e.defaultAbiCoder=e.AbiCoder=void 0,e.Indexed=e.Utf8ErrorReason=e.UnicodeNormalizationForm=e.SupportedAlgorithm=e.mnemonicToSeed=e.isValidMnemonic=e.entropyToMnemonic=e.mnemonicToEntropy=e.getAccountPath=e.verifyTypedData=e.verifyMessage=e.recoverPublicKey=e.computePublicKey=e.recoverAddress=e.computeAddress=e.getJsonWalletAddress=e.TransactionTypes=e.serializeTransaction=e.parseTransaction=e.accessListify=e.joinSignature=e.splitSignature=e.soliditySha256=e.solidityKeccak256=e.solidityPack=e.shuffled=e.randomBytes=e.sha512=e.sha256=e.ripemd160=e.keccak256=e.computeHmac=e.commify=e.parseUnits=e.formatUnits=e.parseEther=e.formatEther=e.isAddress=e.getCreate2Address=e.getContractAddress=e.getIcapAddress=e.getAddress=e._TypedDataEncoder=e.id=e.isValidName=e.namehash=e.hashMessage=e.parseBytes32String=void 0,Object.defineProperty(e,"AbiCoder",{enumerable:!0,get:function(){return Bc.AbiCoder}}),Object.defineProperty(e,"checkResultErrors",{enumerable:!0,get:function(){return Bc.checkResultErrors}}),Object.defineProperty(e,"ConstructorFragment",{enumerable:!0,get:function(){return Bc.ConstructorFragment}}),Object.defineProperty(e,"defaultAbiCoder",{enumerable:!0,get:function(){return Bc.defaultAbiCoder}}),Object.defineProperty(e,"ErrorFragment",{enumerable:!0,get:function(){return Bc.ErrorFragment}}),Object.defineProperty(e,"EventFragment",{enumerable:!0,get:function(){return Bc.EventFragment}}),Object.defineProperty(e,"FormatTypes",{enumerable:!0,get:function(){return Bc.FormatTypes}}),Object.defineProperty(e,"Fragment",{enumerable:!0,get:function(){return Bc.Fragment}}),Object.defineProperty(e,"FunctionFragment",{enumerable:!0,get:function(){return Bc.FunctionFragment}}),Object.defineProperty(e,"Indexed",{enumerable:!0,get:function(){return Bc.Indexed}}),Object.defineProperty(e,"Interface",{enumerable:!0,get:function(){return Bc.Interface}}),Object.defineProperty(e,"LogDescription",{enumerable:!0,get:function(){return Bc.LogDescription}}),Object.defineProperty(e,"ParamType",{enumerable:!0,get:function(){return Bc.ParamType}}),Object.defineProperty(e,"TransactionDescription",{enumerable:!0,get:function(){return Bc.TransactionDescription}}),Object.defineProperty(e,"getAddress",{enumerable:!0,get:function(){return Lc.getAddress}}),Object.defineProperty(e,"getCreate2Address",{enumerable:!0,get:function(){return Lc.getCreate2Address}}),Object.defineProperty(e,"getContractAddress",{enumerable:!0,get:function(){return Lc.getContractAddress}}),Object.defineProperty(e,"getIcapAddress",{enumerable:!0,get:function(){return Lc.getIcapAddress}}),Object.defineProperty(e,"isAddress",{enumerable:!0,get:function(){return Lc.isAddress}});var s=i(Uc);e.base64=s,Object.defineProperty(e,"base58",{enumerable:!0,get:function(){return Dc.Base58}}),Object.defineProperty(e,"arrayify",{enumerable:!0,get:function(){return Fc.arrayify}}),Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return Fc.concat}}),Object.defineProperty(e,"hexConcat",{enumerable:!0,get:function(){return Fc.hexConcat}}),Object.defineProperty(e,"hexDataSlice",{enumerable:!0,get:function(){return Fc.hexDataSlice}}),Object.defineProperty(e,"hexDataLength",{enumerable:!0,get:function(){return Fc.hexDataLength}}),Object.defineProperty(e,"hexlify",{enumerable:!0,get:function(){return Fc.hexlify}}),Object.defineProperty(e,"hexStripZeros",{enumerable:!0,get:function(){return Fc.hexStripZeros}}),Object.defineProperty(e,"hexValue",{enumerable:!0,get:function(){return Fc.hexValue}}),Object.defineProperty(e,"hexZeroPad",{enumerable:!0,get:function(){return Fc.hexZeroPad}}),Object.defineProperty(e,"isBytes",{enumerable:!0,get:function(){return Fc.isBytes}}),Object.defineProperty(e,"isBytesLike",{enumerable:!0,get:function(){return Fc.isBytesLike}}),Object.defineProperty(e,"isHexString",{enumerable:!0,get:function(){return Fc.isHexString}}),Object.defineProperty(e,"joinSignature",{enumerable:!0,get:function(){return Fc.joinSignature}}),Object.defineProperty(e,"zeroPad",{enumerable:!0,get:function(){return Fc.zeroPad}}),Object.defineProperty(e,"splitSignature",{enumerable:!0,get:function(){return Fc.splitSignature}}),Object.defineProperty(e,"stripZeros",{enumerable:!0,get:function(){return Fc.stripZeros}}),Object.defineProperty(e,"_TypedDataEncoder",{enumerable:!0,get:function(){return jc._TypedDataEncoder}}),Object.defineProperty(e,"hashMessage",{enumerable:!0,get:function(){return jc.hashMessage}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return jc.id}}),Object.defineProperty(e,"isValidName",{enumerable:!0,get:function(){return jc.isValidName}}),Object.defineProperty(e,"namehash",{enumerable:!0,get:function(){return jc.namehash}}),Object.defineProperty(e,"defaultPath",{enumerable:!0,get:function(){return qc.defaultPath}}),Object.defineProperty(e,"entropyToMnemonic",{enumerable:!0,get:function(){return qc.entropyToMnemonic}}),Object.defineProperty(e,"getAccountPath",{enumerable:!0,get:function(){return qc.getAccountPath}}),Object.defineProperty(e,"HDNode",{enumerable:!0,get:function(){return qc.HDNode}}),Object.defineProperty(e,"isValidMnemonic",{enumerable:!0,get:function(){return qc.isValidMnemonic}}),Object.defineProperty(e,"mnemonicToEntropy",{enumerable:!0,get:function(){return qc.mnemonicToEntropy}}),Object.defineProperty(e,"mnemonicToSeed",{enumerable:!0,get:function(){return qc.mnemonicToSeed}}),Object.defineProperty(e,"getJsonWalletAddress",{enumerable:!0,get:function(){return Wc.getJsonWalletAddress}}),Object.defineProperty(e,"keccak256",{enumerable:!0,get:function(){return Gc.keccak256}}),Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return Hc.Logger}}),Object.defineProperty(e,"computeHmac",{enumerable:!0,get:function(){return zc.computeHmac}}),Object.defineProperty(e,"ripemd160",{enumerable:!0,get:function(){return zc.ripemd160}}),Object.defineProperty(e,"sha256",{enumerable:!0,get:function(){return zc.sha256}}),Object.defineProperty(e,"sha512",{enumerable:!0,get:function(){return zc.sha512}}),Object.defineProperty(e,"solidityKeccak256",{enumerable:!0,get:function(){return Vc.keccak256}}),Object.defineProperty(e,"solidityPack",{enumerable:!0,get:function(){return Vc.pack}}),Object.defineProperty(e,"soliditySha256",{enumerable:!0,get:function(){return Vc.sha256}}),Object.defineProperty(e,"randomBytes",{enumerable:!0,get:function(){return Kc.randomBytes}}),Object.defineProperty(e,"shuffled",{enumerable:!0,get:function(){return Kc.shuffled}}),Object.defineProperty(e,"checkProperties",{enumerable:!0,get:function(){return $c.checkProperties}}),Object.defineProperty(e,"deepCopy",{enumerable:!0,get:function(){return $c.deepCopy}}),Object.defineProperty(e,"defineReadOnly",{enumerable:!0,get:function(){return $c.defineReadOnly}}),Object.defineProperty(e,"getStatic",{enumerable:!0,get:function(){return $c.getStatic}}),Object.defineProperty(e,"resolveProperties",{enumerable:!0,get:function(){return $c.resolveProperties}}),Object.defineProperty(e,"shallowCopy",{enumerable:!0,get:function(){return $c.shallowCopy}});var o=i(Jc);e.RLP=o,Object.defineProperty(e,"computePublicKey",{enumerable:!0,get:function(){return Zc.computePublicKey}}),Object.defineProperty(e,"recoverPublicKey",{enumerable:!0,get:function(){return Zc.recoverPublicKey}}),Object.defineProperty(e,"SigningKey",{enumerable:!0,get:function(){return Zc.SigningKey}}),Object.defineProperty(e,"formatBytes32String",{enumerable:!0,get:function(){return Xc.formatBytes32String}}),Object.defineProperty(e,"nameprep",{enumerable:!0,get:function(){return Xc.nameprep}}),Object.defineProperty(e,"parseBytes32String",{enumerable:!0,get:function(){return Xc.parseBytes32String}}),Object.defineProperty(e,"_toEscapedUtf8String",{enumerable:!0,get:function(){return Xc._toEscapedUtf8String}}),Object.defineProperty(e,"toUtf8Bytes",{enumerable:!0,get:function(){return Xc.toUtf8Bytes}}),Object.defineProperty(e,"toUtf8CodePoints",{enumerable:!0,get:function(){return Xc.toUtf8CodePoints}}),Object.defineProperty(e,"toUtf8String",{enumerable:!0,get:function(){return Xc.toUtf8String}}),Object.defineProperty(e,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return Xc.Utf8ErrorFuncs}}),Object.defineProperty(e,"accessListify",{enumerable:!0,get:function(){return Yc.accessListify}}),Object.defineProperty(e,"computeAddress",{enumerable:!0,get:function(){return Yc.computeAddress}}),Object.defineProperty(e,"parseTransaction",{enumerable:!0,get:function(){return Yc.parse}}),Object.defineProperty(e,"recoverAddress",{enumerable:!0,get:function(){return Yc.recoverAddress}}),Object.defineProperty(e,"serializeTransaction",{enumerable:!0,get:function(){return Yc.serialize}}),Object.defineProperty(e,"TransactionTypes",{enumerable:!0,get:function(){return Yc.TransactionTypes}}),Object.defineProperty(e,"commify",{enumerable:!0,get:function(){return Qc.commify}}),Object.defineProperty(e,"formatEther",{enumerable:!0,get:function(){return Qc.formatEther}}),Object.defineProperty(e,"parseEther",{enumerable:!0,get:function(){return Qc.parseEther}}),Object.defineProperty(e,"formatUnits",{enumerable:!0,get:function(){return Qc.formatUnits}}),Object.defineProperty(e,"parseUnits",{enumerable:!0,get:function(){return Qc.parseUnits}}),Object.defineProperty(e,"verifyMessage",{enumerable:!0,get:function(){return tu.verifyMessage}}),Object.defineProperty(e,"verifyTypedData",{enumerable:!0,get:function(){return tu.verifyTypedData}}),Object.defineProperty(e,"_fetchData",{enumerable:!0,get:function(){return eu._fetchData}}),Object.defineProperty(e,"fetchJson",{enumerable:!0,get:function(){return eu.fetchJson}}),Object.defineProperty(e,"poll",{enumerable:!0,get:function(){return eu.poll}});var a=zc;Object.defineProperty(e,"SupportedAlgorithm",{enumerable:!0,get:function(){return a.SupportedAlgorithm}});var l=Xc;Object.defineProperty(e,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return l.UnicodeNormalizationForm}}),Object.defineProperty(e,"Utf8ErrorReason",{enumerable:!0,get:function(){return l.Utf8ErrorReason}})}));function nu(t){return null!=t&&(st.isBigNumber(t)||"number"==typeof t&&t%1==0||"string"==typeof t&&!!t.match(/^-?[0-9]+$/)||ru.isHexString(t)||"bigint"==typeof t||ru.isBytes(t))}class iu{constructor(t){var r=this;this.authProvider=t,this.findCurrentConfig=async function(t){const{provider:e,context:i,ignoreIndex:s,requireIndex:o,skipCache:a}=t,l=Te(t.address);if(Cc.info(`[findCurrentConfig] address:${l}, ignoreIndex:${s}, requireIndex:${o}`),o&&s)throw Error("findCurrentConfig: can't ignore index and require index");const h=e.getNetwork(),c=t.knownConfigs?t.knownConfigs:[],{imageHash:u,config:d}=await r.findCurrentImageHash(i,e,l,c,a);if(void 0===u)return{config:void 0};const f=await r.findConfigForImageHash(i,u,d?[d,...c]:c,a),p=(await h).chainId;return{config:f?n({},f,{chainId:p,address:l}):void 0}},this.findLastWalletOfInitialSigner=async function(t){const{signer:i,context:s,ignoreIndex:o,requireIndex:a}=t;if(Cc.info(`[findLastWalletOfInitialSigner] signer:${i}`),a&&o)throw Error("findCurrentConfig: can't ignore index and require index");const l=new xo(s.sequenceUtils,e.sequenceUtils.abi,r.authProvider),h=o?0:(await l.lastSignerUpdate(i)).toNumber();if(a&&0===h)return{wallet:void 0};const c=l.filters.RequiredSigner(null,i),u=await r.findLatestLog(r.authProvider,n({},c,{fromBlock:h,toBlock:0!==h?h:"latest"}));if(void 0===u)return Cc.warn("publishConfig: wallet config last log not found"),{wallet:void 0};return{wallet:l.interface.decodeEventLog("RequiredSigner",u.data,u.topics)._wallet}},this.findConfigForImageHash=async function(t,i,s=[],o=!1){const a=s.find((t=>dc(t)===i));if(a)return a;if(!o){const t=lc(i);if(t)return t}Cc.info(`[findConfigForImageHash] image:${i}`);const l=new xo(t.sequenceUtils,e.sequenceUtils.abi,r.authProvider),h=(await l.lastImageHashUpdate(i)).toNumber(),c=l.filters.RequiredConfig(void 0,i),u=await r.findLatestLog(r.authProvider,n({},c,{fromBlock:h,toBlock:0!==h?h:"latest"}));if(void 0===u)return;const d=l.interface.decodeEventLog("RequiredConfig",u.data,u.topics),f=kr.decode(["tuple(\n        uint256 weight,\n        address signer\n      )[]"],d._signers)[0],p={threshold:st.from(d._threshold).toNumber(),signers:f.map((t=>({address:t.signer,weight:st.from(t.weight).toNumber()})))};return dc(p),p},this.findCurrentImageHash=async function(t,n,i,s=[],o){Cc.info(`[findCurrentImageHash] address:${i}`);const a=new xo(i,e.mainModuleUpgradable.abi,n),l=await a.functions.imageHash.call([]).catch((()=>[]));if(void 0!==l[0])return{imageHash:l[0],config:o?void 0:lc(l[0])};const h=Te(i),c=s.find((e=>uc(e,t,!0)===h));if(c)return{imageHash:dc(c),config:c};const u=new xo(t.sequenceUtils,e.sequenceUtils.abi,r.authProvider),d=await u.knownImageHashes(i);if(d!==Je){if(uc(d,t)!==i)throw Error("findCurrentImageHash: inconsistent RequireUtils results");return{imageHash:d}}const f=u.filters.RequiredConfig(i),p=await r.findFirstLog(r.authProvider,f);if(void 0!==p){const e=u.interface.decodeEventLog("RequiredConfig",p.data,p.topics),r=kr.decode(["tuple(\n          uint256 weight,\n          address signer\n        )[]"],e._signers)[0],n={threshold:st.from(e._threshold).toNumber(),signers:r.map((t=>({address:t.signer,weight:st.from(t.weight).toNumber()})))},s=dc(n);if(uc(s,t)===i)return{imageHash:s,config:n}}return{}},this.findLatestLog=async function(t,e){const i="latest"===e.toBlock?await t.getBlockNumber():e.toBlock,s=e.fromBlock;0===s&&Cc.warn(`findLatestLog: expensive getLogs query fromBlock 0 toBlock ${i}`);try{const r=await t.getLogs(n({},e,{toBlock:i}));return 0===r.length?void 0:r[r.length-1]}catch(o){const a=Math.floor((i-s)/2+s),l=await r.findLatestLog(t,n({},e,{fromBlock:a,toBlock:i}));return void 0!==l?l:r.findLatestLog(t,n({},e,{fromBlock:s,toBlock:a}))}},this.findFirstLog=async function(t,e){const i="latest"!==e.toBlock&&e.toBlock?e.toBlock:await t.getBlockNumber(),s=e.fromBlock?e.fromBlock:0;0===s&&Cc.warn(`findFirstLog: expensive getLogs query fromBlock 0 toBlock ${i}`);try{const r=await t.getLogs(n({},e,{fromBlock:s,toBlock:i}));return 0===r.length?void 0:r[0]}catch(o){const a=Math.floor((i-s)/2+s),l=await r.findFirstLog(t,n({},e,{fromBlock:s,toBlock:a}));return void 0!==l?l:r.findFirstLog(t,n({},e,{fromBlock:a,toBlock:i}))}}}}let su;function ou(t,e){return t.reduce((function(t,r,n){return e(r,n)?t[0].push(r):t[1].push(r),t}),[[],[]])}!function(t){t.ethCall="eth_call",t.ethGetBalance="eth_getBalance",t.ethGetCode="eth_getCode"}(su||(su={}));const au=t=>"number"==typeof t?t:t.chainId?t.chainId:st.from(t).toNumber(),lu=t=>{if(t)return au(t)},hu=t=>t.find((t=>t.isAuthChain)),cu=(t,e=!1,r=!1)=>{if(!t)throw new Error("invalid network config: empty config");const n=[];if(Array.isArray(t)?n.push(...t):n.push(t),0===n.length){if(e)throw new Error("invalid network config: empty config");return!1}const i=n.map((t=>t.chainId)).sort(),s=i.filter(((t,e)=>i.indexOf(t)!==e));if(s.length>0){if(e)throw new Error(`invalid network config: duplicate chainIds ${s}`);return!1}n.forEach((t=>t.name=t.name.toLowerCase()));const o=n.map((t=>t.name)).sort(),a=o.filter(((t,e)=>o.indexOf(t)!==e));if(a.length>0){if(e)throw new Error(`invalid network config: duplicate network names ${a}`);return!1}let l=!1,h=!1;for(let t=0;t<n.length;t++){const i=n[t];if(!(i.rpcUrl&&""!==i.rpcUrl||i.provider)){if(e)throw new Error(`invalid network config for chainId ${i.chainId}: rpcUrl or provider must be provided`);return!1}if(!r&&!i.relayer){if(e)throw new Error(`invalid network config for chainId ${i.chainId}: relayer must be provided`);return!1}if(i.isDefaultChain){if(l){if(e)throw new Error(`invalid network config for chainId ${i.chainId}: DefaultChain is already set by another config`);return!1}l=!0}if(i.isAuthChain){if(h&&e)throw new Error(`invalid network config for chainId ${i.chainId}: AuthChain is already set by another config`);h=!0}}if(!l){if(e)throw new Error("invalid network config: DefaultChain must be set");return!1}if(!h){if(e)throw new Error("invalid network config: AuthChain must be set");return!1}return!0},uu=(t,e=!1)=>(cu(t,!0,e),t),du=(t,e)=>{if(t&&e){if(!t.chainId&&!t.name)throw new Error("failed to update network config: source config is missing chainId or name");if(t.chainId!==e.chainId&&t.name!==e.name)throw new Error("failed to update network config: one of chainId or name must match");t.rpcUrl&&(e.rpcUrl=t.rpcUrl,e.provider=void 0),t.provider&&(e.provider=t.provider),t.relayer&&(e.relayer=t.relayer)}},fu=t=>uu(gu(t)),pu=(t,e)=>{if("string"==typeof e){if(e.startsWith("0x")){const r=st.from(e).toNumber();return t.find((t=>t.chainId===r))}return t.find((t=>t.name===e))}return"number"==typeof e?t.find((t=>t.chainId===e)):e.chainId?t.find((t=>t.chainId===e.chainId)):void 0},gu=t=>{if(!t)return[];const e=t.sort(((t,e)=>t.chainId===e.chainId?0:t.chainId<e.chainId?-1:1)),r=e.findIndex((t=>t.isDefaultChain));r>0&&e.splice(0,0,e.splice(r,1)[0]);const n=e.findIndex((t=>t.isAuthChain&&!0!==t.isDefaultChain));return n>0&&e.splice(1,0,e.splice(n,1)[0]),e},mu=(t,e)=>"string"==typeof t?(e=e||{},t.replace(/\$\{\s*([$#@\-\d\w]+)\s*\}/gim,(function(t,r){let n=e[r];return n="function"==typeof n?n():null==n?"":"object"==typeof n||"symbol"==typeof n?n.toString():n.valueOf(),n}))):"";let yu;!function(t){t[t.MAINNET=1]="MAINNET",t[t.ROPSTEN=3]="ROPSTEN",t[t.RINKEBY=4]="RINKEBY",t[t.GOERLI=5]="GOERLI",t[t.KOVAN=42]="KOVAN",t[t.POLYGON=137]="POLYGON",t[t.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",t[t.BSC=56]="BSC",t[t.BSC_TESTNET=97]="BSC_TESTNET",t[t.OPTIMISM=10]="OPTIMISM",t[t.OPTIMISM_TESTNET=69]="OPTIMISM_TESTNET",t[t.ARBITRUM=42161]="ARBITRUM",t[t.ARBITRUM_TESTNET=421611]="ARBITRUM_TESTNET",t[t.ARBITRUM_NOVA=42170]="ARBITRUM_NOVA",t[t.AVALANCHE=43114]="AVALANCHE",t[t.AVALANCHE_TESTNET=43113]="AVALANCHE_TESTNET",t[t.FANTOM=250]="FANTOM",t[t.FANTOM_TESTNET=4002]="FANTOM_TESTNET",t[t.GNOSIS=100]="GNOSIS",t[t.AURORA=1313161554]="AURORA",t[t.AURORA_TESTNET=1313161556]="AURORA_TESTNET"}(yu||(yu={}));const wu=t=>mu("https://${network}-indexer.sequence.app",{network:t}),vu=t=>mu("https://${network}-relayer.sequence.app",{network:t}),bu=t=>mu("https://nodes.sequence.app/${network}",{network:t}),Eu={[yu.MAINNET]:{chainId:yu.MAINNET,name:"mainnet",title:"Ethereum",blockExplorer:{name:"Etherscan",rootUrl:"https://etherscan.io/"}},[yu.ROPSTEN]:{chainId:yu.ROPSTEN,name:"ropsten",title:"Ropsten",testnet:!0,blockExplorer:{name:"Etherscan (Ropsten)",rootUrl:"https://ropsten.etherscan.io/"}},[yu.RINKEBY]:{chainId:yu.RINKEBY,name:"rinkeby",title:"Rinkeby",testnet:!0,blockExplorer:{name:"Etherscan (Rinkeby)",rootUrl:"https://rinkeby.etherscan.io/"},disabled:!0},[yu.GOERLI]:{chainId:yu.GOERLI,name:"goerli",title:"Goerli",testnet:!0,blockExplorer:{name:"Etherscan (Goerli)",rootUrl:"https://goerli.etherscan.io/"}},[yu.KOVAN]:{chainId:yu.KOVAN,name:"kovan",title:"Kovan",testnet:!0,blockExplorer:{name:"Etherscan (Kovan)",rootUrl:"https://kovan.etherscan.io/"}},[yu.POLYGON]:{chainId:yu.POLYGON,name:"polygon",title:"Polygon",blockExplorer:{name:"Polygonscan",rootUrl:"https://polygonscan.com/"}},[yu.POLYGON_MUMBAI]:{chainId:yu.POLYGON_MUMBAI,name:"mumbai",title:"Polygon Mumbai",testnet:!0,blockExplorer:{name:"Polygonscan (Mumbai)",rootUrl:"https://mumbai.polygonscan.com/"}},[yu.BSC]:{chainId:yu.BSC,name:"bsc",title:"BNB Smart Chain",blockExplorer:{name:"BSCScan",rootUrl:"https://bscscan.com/"}},[yu.BSC_TESTNET]:{chainId:yu.BSC_TESTNET,name:"bsc-testnet",title:"BNB Smart Chain Testnet",testnet:!0,blockExplorer:{name:"BSCScan (Testnet)",rootUrl:"https://testnet.bscscan.com/"}},[yu.OPTIMISM]:{chainId:yu.OPTIMISM,name:"optimism",title:"Optimism",blockExplorer:{name:"Etherscan (Optimism)",rootUrl:"https://optimistic.etherscan.io/"}},[yu.OPTIMISM_TESTNET]:{chainId:yu.OPTIMISM_TESTNET,name:"optimism-testnet",title:"Optimistic Kovan",testnet:!0,blockExplorer:{name:"Etherscan (Optimism Testnet)",rootUrl:"https://kovan-optimistic.etherscan.io/"}},[yu.ARBITRUM]:{chainId:yu.ARBITRUM,name:"arbitrum",title:"Arbitrum One",blockExplorer:{name:"Arbiscan",rootUrl:"https://arbiscan.io/"}},[yu.ARBITRUM_TESTNET]:{chainId:yu.ARBITRUM_TESTNET,name:"arbitrum-testnet",title:"Arbitrum Testnet",testnet:!0,blockExplorer:{name:"Arbiscan (Testnet)",rootUrl:"https://testnet.arbiscan.io/"}},[yu.ARBITRUM_NOVA]:{chainId:yu.ARBITRUM_NOVA,name:"arbitrum-nova",title:"Arbitrum Nova",blockExplorer:{name:"Nova Explorer",rootUrl:"https://nova-explorer.arbitrum.io/"}},[yu.AVALANCHE]:{chainId:yu.AVALANCHE,name:"avalanche",title:"Avalanche",blockExplorer:{name:"Snowtrace",rootUrl:"https://snowtrace.io/"}},[yu.AVALANCHE_TESTNET]:{chainId:yu.AVALANCHE_TESTNET,name:"avalanche-testnet",title:"Avalanche Testnet",testnet:!0,blockExplorer:{name:"Snowtrace (Testnet)",rootUrl:"https://testnet.snowtrace.io/"}},[yu.FANTOM]:{chainId:yu.FANTOM,name:"fantom",title:"Fantom",blockExplorer:{name:"FTMScan",rootUrl:"https://ftmscan.com/"}},[yu.FANTOM_TESTNET]:{chainId:yu.FANTOM_TESTNET,name:"fantom-testnet",title:"Fantom Testnet",testnet:!0,blockExplorer:{name:"FTMScan (Testnet)",rootUrl:"https://testnet.ftmscan.com/"}},[yu.GNOSIS]:{chainId:yu.GNOSIS,name:"gnosis",title:"Gnosis Chain",blockExplorer:{name:"Gnosis Chain Explorer",rootUrl:"https://blockscout.com/xdai/mainnet/"}},[yu.AURORA]:{chainId:yu.AURORA,name:"aurora",title:"Aurora",blockExplorer:{name:"Aurora Explorer",rootUrl:"https://aurorascan.dev/"}},[yu.AURORA_TESTNET]:{chainId:yu.AURORA_TESTNET,name:"aurora-testnet",title:"Aurora Testnet",blockExplorer:{name:"Aurora Explorer (Testnet)",rootUrl:"https://testnet.aurorascan.dev/"}}},_u=fu([n({},Eu[yu.MAINNET],{rpcUrl:bu("mainnet"),relayer:{url:vu("mainnet")},indexerUrl:wu("mainnet")}),n({},Eu[yu.POLYGON],{rpcUrl:bu("polygon"),relayer:{url:vu("polygon")},indexerUrl:wu("polygon"),isDefaultChain:!0,isAuthChain:!0}),n({},Eu[yu.BSC],{rpcUrl:bu("bsc"),indexerUrl:wu("bsc"),relayer:{url:vu("bsc")}}),n({},Eu[yu.AVALANCHE],{rpcUrl:bu("avalanche"),indexerUrl:wu("avalanche"),relayer:{url:vu("avalanche")}}),n({},Eu[yu.ARBITRUM],{rpcUrl:bu("arbitrum"),indexerUrl:wu("arbitrum"),relayer:{url:vu("arbitrum")}}),n({},Eu[yu.ARBITRUM_NOVA],{rpcUrl:bu("arbitrum-nova"),indexerUrl:wu("arbitrum-nova"),relayer:{url:vu("arbitrum-nova")}}),n({},Eu[yu.OPTIMISM],{rpcUrl:bu("optimism"),indexerUrl:wu("optimism"),relayer:{url:vu("optimism")}})]),Au=fu([n({},Eu[yu.RINKEBY],{rpcUrl:bu("rinkeby"),relayer:{url:vu("rinkeby")},indexerUrl:wu("rinkeby")}),n({},Eu[yu.GOERLI],{rpcUrl:bu("goerli"),relayer:{url:vu("goerli")},indexerUrl:wu("goerli")}),n({},Eu[yu.POLYGON_MUMBAI],{rpcUrl:bu("mumbai"),relayer:{url:vu("mumbai")},indexerUrl:wu("mumbai"),isDefaultChain:!0,isAuthChain:!0}),n({},Eu[yu.BSC_TESTNET],{rpcUrl:bu("bsc-testnet"),relayer:{url:vu("bsc-testnet")},indexerUrl:wu("bsc-testnet")})]),Su={factory:"0xf9D09D634Fb818b05149329C1dcCFAeA53639d96",mainModule:"0xd01F11855bCcb95f88D7A48492F66410d4637313",mainModuleUpgradable:"0x7EFE6cE415956c5f80C6530cC6cc81b4808F6118",guestModule:"0x02390F3E6E5FD1C6786CB78FD3027C117a9955A7",sequenceUtils:"0xd130B43062D875a4B7aF3f8fc036Bc6e9D3E1B3E",libs:{requireFreshSigner:"0xE6B9B21C077F382333220a072e4c44280b873907"}},xu="2.0";class ku{constructor(t,e){this.sender=void 0,this.handler=void 0,this.sender=e,t&&this.setMiddleware(t)}setMiddleware(t){this.handler=Cu(t,this.sender.sendAsync)}sendAsync(t,e,r){try{this.handler(t,e,r)}catch(t){e(t,void 0)}}}const Cu=(t,e)=>{if(0===t.length)return e;const r=t=>t.sendAsyncMiddleware?t.sendAsyncMiddleware:t;let n;n=r(t[t.length-1])(e);for(let e=t.length-2;e>=0;e--)n=r(t[e])(n);return n};function Pu(t){return void 0!==t&&void 0!==t.send&&void 0!==t.constructor.defaultUrl&&void 0!==t.detectNetwork&&void 0!==t.getSigner&&void 0!==t.perform}function Tu(t){return void 0!==t&&void 0!==t.sendAsync}let Nu=0;class Iu{constructor(t,e){this.send=void 0,this.request=void 0,this.defaultChainId=void 0,this.sendAsync=(t,e,r)=>{this.send(t.method,t.params,r||this.defaultChainId).then((r=>{e(void 0,{jsonrpc:"2.0",id:t.id,result:r})})).catch((t=>{e(t,void 0)}))},this.defaultChainId=e,Pu(t)?this.send=t.send.bind(t):Tu(t)?this.send=(e,r,n)=>new Promise(((i,s)=>{t.sendAsync({jsonrpc:xu,id:++Nu,method:e,params:r},((t,e)=>{t?s(t):i(e?e.result:void 0)}),n||this.defaultChainId)})):this.send=t,this.request=(t,e)=>this.send(t.method,t.params,e)}}const Mu=t=>e=>(r,n,i)=>{if(!t(r))throw new Error("allowProvider middleware precondition is unmet.");e(r,n,i)};class Ou{constructor(t){this.cachableJsonRpcMethods=["net_version","eth_chainId","eth_accounts","sequence_getWalletContext","sequence_getNetworks"],this.cache=void 0,this.onUpdateCallback=void 0,this.defaultChainId=void 0,this.sendAsyncMiddleware=t=>(e,r,n)=>{if(this.cachableJsonRpcMethods.includes(e.method)){const t=this.cacheKey(e.method,e.params,n||this.defaultChainId),i=this.getCacheValue(t);if(i&&""!==i)return void r(void 0,{jsonrpc:"2.0",id:e.id,result:i})}t(e,((t,n,i)=>{if(this.cachableJsonRpcMethods.includes(e.method)&&n&&n.result){const t=this.cacheKey(e.method,e.params,i||this.defaultChainId);this.setCacheValue(t,n.result)}r(t,n)}),n||this.defaultChainId)},this.cacheKey=(t,e,r)=>{let n="";return n=r?`${r}:${t}:`:`:${t}:`,e&&0!==e.length?n+JSON.stringify(e):n+"[]"},this.getCache=()=>this.cache,this.setCache=t=>{this.cache=t,this.onUpdateCallback&&this.onUpdateCallback()},this.getCacheValue=t=>this.cache[t],this.setCacheValue=(t,e)=>{this.cache[t]=e,this.onUpdateCallback&&this.onUpdateCallback(t,e)},this.clearCache=()=>{this.cache={}},this.cache={},this.defaultChainId=t}onUpdate(t){this.onUpdateCallback=t}}class Ru{constructor(t){this.props=void 0,this.sendAsyncMiddleware=t=>(e,r,n)=>{const{id:i,method:s}=e;switch(s){case"net_version":if(this.props.chainId)return void r(void 0,{jsonrpc:"2.0",id:i,result:`${this.props.chainId}`});break;case"eth_chainId":if(this.props.chainId)return void r(void 0,{jsonrpc:"2.0",id:i,result:G(this.props.chainId)});break;case"eth_accounts":if(this.props.accountAddress)return void r(void 0,{jsonrpc:"2.0",id:i,result:[Te(this.props.accountAddress)]});break;case"sequence_getWalletContext":if(this.props.walletContext)return void r(void 0,{jsonrpc:"2.0",id:i,result:this.props.walletContext})}t(e,r,n)},this.props=t}}const Bu=t=>(e,r,n)=>{t(e,((t,e)=>{if(!t&&e&&e.error)throw"string"==typeof e.error?new Error(e.error):new Error(e.error.message);r(t,e)}),n)},Lu=t=>(e,r,n)=>{const i=n?` chainId:${n}`:"";Cc.info(`[provider request]${i} id:${e.id} method:${e.method} params:`,e.params),t(e,((t,n)=>{t?Cc.warn(`[provider response]${i} id:${e.id} method:${e.method} params:`,e.params,"error:",t):Cc.info(`[provider response]${i} id:${e.id} method:${e.method} params:`,e.params,"response:",n),r(t,n)}),n)},Uu=t=>e=>(r,n,i)=>{const s=t(r),{id:o,method:a}=r;switch(a){case"net_version":return void n(void 0,{jsonrpc:"2.0",id:o,result:`${s}`});case"eth_chainId":return void n(void 0,{jsonrpc:"2.0",id:o,result:G(s)})}e(r,n,i)},Du=["personal_sign","eth_sign","eth_signTypedData","eth_signTypedData_v4","eth_sendTransaction","eth_sendRawTransaction","sequence_getWalletContext","sequence_getWalletConfig","sequence_getWalletState","sequence_getNetworks","sequence_updateConfig","sequence_publishConfig","sequence_gasRefundOptions","sequence_getNonce","sequence_relay","eth_decrypt","eth_getEncryptionPublicKey","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"];class Fu{constructor(t){this.provider=void 0,this.sendAsyncMiddleware=t=>(e,r,n)=>{Du.includes(e.method)?this.provider.sendAsync(e,r,n):t(e,r,n)},this.provider=t}}const ju={batchSize:50,timeWindow:50,contract:Su.sequenceUtils,verbose:!1};class qu{constructor(t){var r=this;if(this.batchableJsonRpcMethods=[su.ethCall,su.ethGetCode,su.ethGetBalance],this.multicallInterface=new on(e.sequenceUtils.abi),this.options=void 0,this.timeout=void 0,this.queue=[],this.scheduleExecution=()=>{this.queue.length>0&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.run,this.options.timeWindow))},this.handle=(t,e,r)=>this.batchableJsonRpcMethods.find((t=>t===e.method))?(this.queue.push({request:e,callback:r,next:t}),this.options.verbose&&console.log("Scheduling call",e.method),void this.scheduleExecution()):(this.options.verbose&&console.log("Forwarded call",e.method),t(e,r)),this.run=async function(){r.options.verbose&&console.log("Processing multicall");const t=Math.min(r.options.batchSize,r.queue.length);if(0===t)return;if(1===t)return r.forward(r.queue[0]),r.queue=[],void(r.options.verbose&&console.log("Skip multicall, single item"));r.options.verbose&&console.log("Resolving",t);var e=r.queue.slice(0,t);r.queue=t===r.queue.length?[]:r.queue.slice(t),r.options.verbose&&console.log("Updated queue",r.queue.length),0!==r.queue.length&&r.scheduleExecution();const n=e[0].next;let i;var[e,s]=ou(e,(t=>{try{if(t.next!==n)return!1;switch(t.request.method){case su.ethCall:if(t.request.params[0].from||t.request.params[0].gasPrice||t.request.params[0].value)return!1;case su.ethGetBalance:case su.ethGetCode:const n=function(t){if(void 0===t)return"latest";switch(t){case"earliest":case"latest":case"pending":return t}return st.from(t)}(t.request.params[1]);if(void 0===i&&(i=n),(e=n)!==(r=i)&&!(st.isBigNumber(e)?st.isBigNumber(r)&&e.eq(r):!st.isBigNumber(r)&&e===r))return!1}return!0}catch(t){return!1}var e,r}));if(0!==s.length&&(r.options.verbose&&console.log("Forwarding incompatible calls",s.length),r.forward(s),0===e.length))return;let o=e.map((t=>{try{switch(t.request.method){case su.ethCall:return{delegateCall:!1,revertOnError:!1,target:t.request.params[0].to,data:t.request.params[0].data,gasLimit:t.request.params[0].gas?t.request.params[0].gas:0,value:0};case su.ethGetCode:return{delegateCall:!1,revertOnError:!1,target:r.options.contract,gasLimit:0,value:0,data:r.multicallInterface.encodeFunctionData(r.multicallInterface.getFunction("callCode"),[t.request.params[0]])};case su.ethGetBalance:return{delegateCall:!1,revertOnError:!1,target:r.options.contract,gasLimit:0,value:0,data:r.multicallInterface.encodeFunctionData(r.multicallInterface.getFunction("callBalanceOf"),[t.request.params[0]])};default:return null}}catch(t){return null}}));var[e,s]=ou(e,((t,e)=>void 0!==o[e]));if(o=o.filter((t=>t)),0!==s.length&&(r.options.verbose&&console.log("Forwarding calls on error",s.length),r.forward(s),0===e.length))return;let a;try{a=r.multicallInterface.encodeFunctionData(r.multicallInterface.getFunction("multiCall"),[o])}catch(t){return void r.forward(e)}const l=Tc(),h=await async function(t,e){try{return await t}catch(t){return e instanceof Function?e(t):e}}(Pc(n)({id:l,jsonrpc:xu,method:su.ethCall,params:[{to:r.options.contract,value:0,data:a},st.isBigNumber(i)?i.toNumber():i]}),(t=>({jsonrpc:xu,id:l,result:void 0,error:t})));if(h.error)return r.forward(e);let c;try{c=r.multicallInterface.decodeFunctionResult(r.multicallInterface.getFunction("multiCall"),h.result)}catch(t){return void r.forward(e)}r.options.verbose&&console.log("Got response for",e.length),e.forEach(((t,e)=>{if(c[0][e])switch(t.request.method){case su.ethCall:t.callback(void 0,{jsonrpc:t.request.jsonrpc,id:t.request.id,result:c[1][e]});break;case su.ethGetCode:t.callback(void 0,{jsonrpc:t.request.jsonrpc,id:t.request.id,result:kr.decode(["bytes"],c[1][e])[0]});break;case su.ethGetBalance:t.callback(void 0,{jsonrpc:t.request.jsonrpc,id:t.request.id,result:kr.decode(["uint256"],c[1][e])[0]})}else r.forward(t)}))},this.options=t?n({},qu.DefaultOptions,t):qu.DefaultOptions,this.options.batchSize<=0)throw new Error(`Invalid batch size of ${this.options.batchSize}`)}forward(t){Array.isArray(t)?t.forEach((t=>t.next(t.request,t.callback))):t.next(t.request,t.callback)}static isMulticall(t){return t&&void 0!==t.handle&&void 0!==t.conf&&qu.isMulticallOptions(t.options)}static isMulticallOptions(t){return void 0!==t&&void 0!==t.batchSize&&void 0!==t.timeWindow&&void 0!==t.contract}}qu.DefaultOptions=n({},ju);const Wu=["getNetwork","getBlockNumber","getGasPrice","getTransactionCount","getStorageAt","sendTransaction","estimateGas","getBlock","getTransaction","getTransactionReceipt","getLogs","emit","litenerCount","addListener","removeListener","waitForTransaction","detectNetwork","getBlockWithTransactions"];class Gu extends Fl{constructor(t,e){var r;super(t.getNetwork()),r=this,this.provider=t,this.multicall=void 0,this.listenerCount=this.provider.listenerCount,this.getResolver=async function(t){const e=r.provider;if(e.getResolver){const n=await e.getResolver(await t);return n?new Ll(r,n.address,n.name):null}return e.getResolver(await t)},this.next=async function(t,e){try{switch(t.method){case su.ethCall:r.callback(t,e,await r.provider.call(t.params[0],t.params[1]));break;case su.ethGetCode:r.callback(t,e,await r.provider.getCode(t.params[0],t.params[1]));break;case su.ethGetBalance:r.callback(t,e,await r.provider.getBalance(t.params[0],t.params[1]))}}catch(n){r.callback(t,e,void 0,n)}},this.multicall=qu.isMulticall(e)?e:new qu(e),Wu.forEach((e=>{void 0!==t[e]&&(this[e]=(...r)=>t[e](...r))}))}callback(t,e,r,n){e(n,{jsonrpc:xu,id:t.id,result:r,error:n})}async call(t,e){return this.rpcCall(su.ethCall,t,e)}async getCode(t,e){return this.rpcCall(su.ethGetCode,t,e)}async getBalance(t,e){return this.rpcCall(su.ethGetBalance,t,e)}async rpcCall(t,...e){const r=Tc();return(await Pc(this.multicall.handle)(this.next,{jsonrpc:xu,id:r,method:t,params:e})).result}}var Hu=Object.freeze({__proto__:null,ProxyMethods:Wu,MulticallProvider:Gu,MulticallExternalProvider:class{constructor(t,e){if(this.provider=t,this.multicall=void 0,this.multicall=qu.isMulticall(e)?e:new qu(e),t.send){const e=async function(e,r){t.send(e,r)};this.send=(t,r)=>{this.multicall.handle(e,t,r)}}if(t.sendAsync){const e=async function(e,r){t.sendAsync(e,r)};this.sendAsync=(t,r)=>{this.multicall.handle(e,t,r)}}}get isMetaMask(){return this.provider.isMetaMask}get isStatus(){return this.provider.isStatus}},multicallMiddleware:t=>e=>{const r=qu.isMulticall(t)?t:new qu(t);return(t,n)=>r.handle(e,t,n)}});function zu(t){return void 0!==t.address&&!Vu(t)}function Vu(t){return Ku(t)||$u(t)||Ju(t)}function Ku(t){const e=t;return void 0!==e.signature&&void 0===e.address}function $u(t){const e=t;return void 0!==e.r&&void 0!==e.s&&void 0!==e.v&&void 0!==e.t}function Ju(t){const e=t;return void 0!==e.address&&void 0!==e.signature}let Zu;!function(t){t[t.EOA=0]="EOA",t[t.Address=1]="Address",t[t.Full=2]="Full"}(Zu||(Zu={}));const Xu=t=>{if("string"!=typeof t)return t;const e=t.replace("0x",""),r=st.from(`0x${e.slice(0,4)}`).toNumber(),n=[];for(let t=4;t<e.length;){const r=st.from(e.slice(t,t+2)).toNumber();t+=2;const i=st.from(`0x${e.slice(t,t+2)}`).toNumber();switch(t+=2,r){case Zu.Address:const r=Te(e.slice(t,t+40));t+=40,n.push({weight:i,address:r});break;case Zu.EOA:const s=U(`0x${e.slice(t,t+132)}`);t+=132;const o=Z(s.slice(0,65)),a=o.r,l=o.s,h=o.v,c=st.from(s[s.length-1]).toNumber();n.push({weight:i,signature:s,r:a,s:l,v:h,t:c});break;case Zu.Full:const u=Te(e.slice(t,t+40));t+=40;const d=st.from(`0x${e.slice(t,t+4)}`).mul(2).toNumber();t+=4;const f=U(`0x${e.slice(t,t+d)}`);t+=d,n.push({weight:i,address:u,signature:f});break;default:throw Error("Signature type not supported")}}return{threshold:r,signers:n}},Yu=t=>{const e=U(t.signature);return n({},t,Z(e.slice(0,65)),{t:st.from(e[e.length-1]).toNumber()})},Qu=(t,e)=>{const r=$u(e)?e:Yu(e);switch(r.t){case 1:return Qs(t,{r:r.r,s:r.s,v:r.v});case 2:return Qs(fe(lh(["string","bytes32"],["Ethereum Signed Message:\n32",t])),{r:r.r,s:r.s,v:r.v});default:throw new Error("Unknown signature")}},td=(...t)=>{const e=t.map((t=>"string"==typeof t?Xu(t):t));return e.reduce(((t,e)=>ed(t,e)))},ed=(t,e)=>({threshold:t.threshold,signers:t.signers.map(((t,r)=>zu(t)?e.signers[r]:t))}),rd=t=>{if("string"==typeof t)return rd(Xu(t));const e=t.signers.map((t=>{if(zu(t))return lh(["uint8","uint8","address"],[Zu.Address,t.weight,t.address]);if($u(t))return lh(["uint8","uint8","bytes32","bytes32","uint8","uint8"],[Zu.EOA,t.weight,t.r,t.s,t.v,t.t]);if(Ju(t)){const e=U(t.signature).length;return lh(["uint8","uint8","address","uint16","bytes"],[Zu.Full,t.weight,t.address,e,t.signature])}if(Ku(t))return lh(["uint8","uint8","bytes"],[Zu.EOA,t.weight,t.signature]);throw Error("Unkwnown signature part type")}));return lh(["uint16",...Array(e.length).fill("bytes")],[t.threshold,...e])};function nd(t,e){if(zu(t))return t.address;if(Ju(t))return t.address;if($u(t)||Ku(t))return Qu(e,t);throw Error("Unkwnown signature part type")}async function id(t,e){const r=new Gu(t),i=await Promise.all(e.signers.map((async(t,e)=>n({},t,{index:e,isEOA:0===U(await r.getCode(t.address)).length}))));let s=i.sort(((t,e)=>t.weight-e.weight)),o=0;s=s.map((t=>o>=e.threshold||t.isEOA?t:(o+=t.weight,n({},t,{willSign:!0})))),o<e.threshold&&(s=s.map((t=>t.willSign||o>=e.threshold?t:(o+=t.weight,n({},t,{willSign:!0})))));const a=U("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a01b02"),l=s.sort(((t,e)=>t.index-e.index));return{threshold:e.threshold,signers:l.map((t=>t.willSign?t.isEOA?{weight:t.weight,signature:a}:{weight:t.weight,address:t.address,signature:rd({threshold:1,signers:[{address:Fa.createRandom().address,weight:1},{weight:1,signature:a}]})+G(3).substring(2)}:{address:t.address,weight:t.weight}))}}let sd,od,ad,ld,hd;!function(t){t.UNKNOWN="UNKNOWN",t.ERC20="ERC20",t.ERC721="ERC721",t.ERC1155="ERC1155",t.SEQUENCE_WALLET="SEQUENCE_WALLET",t.ERC20_BRIDGE="ERC20_BRIDGE",t.ERC721_BRIDGE="ERC721_BRIDGE",t.ERC1155_BRIDGE="ERC1155_BRIDGE"}(sd||(sd={})),function(t){t.UNKNOWN="UNKNOWN",t.BLOCK_ADDED="BLOCK_ADDED",t.BLOCK_REMOVED="BLOCK_REMOVED"}(od||(od={})),function(t){t.UNKNOWN="UNKNOWN",t.TOKEN_TRANSFER="TOKEN_TRANSFER",t.SEQUENCE_TXN="SEQUENCE_TXN"}(ad||(ad={})),function(t){t.UNKNOWN="UNKNOWN",t.SEND="SEND",t.RECEIVE="RECEIVE"}(ld||(ld={})),function(t){t.DESC="DESC",t.ASC="ASC"}(hd||(hd={}));class cd{constructor(t,e){this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Indexer/",this.ping=t=>this.fetch(this.url("Ping"),ud({},t)).then((t=>dd(t).then((t=>({status:t.status}))))),this.version=t=>this.fetch(this.url("Version"),ud({},t)).then((t=>dd(t).then((t=>({version:t.version}))))),this.runtimeStatus=t=>this.fetch(this.url("RuntimeStatus"),ud({},t)).then((t=>dd(t).then((t=>({status:t.status}))))),this.getChainID=t=>this.fetch(this.url("GetChainID"),ud({},t)).then((t=>dd(t).then((t=>({chainID:t.chainID}))))),this.getEtherBalance=(t,e)=>this.fetch(this.url("GetEtherBalance"),ud(t,e)).then((t=>dd(t).then((t=>({balance:t.balance}))))),this.getTokenBalances=(t,e)=>this.fetch(this.url("GetTokenBalances"),ud(t,e)).then((t=>dd(t).then((t=>({page:t.page,balances:t.balances}))))),this.getTokenSupplies=(t,e)=>this.fetch(this.url("GetTokenSupplies"),ud(t,e)).then((t=>dd(t).then((t=>({page:t.page,contractType:t.contractType,tokenIDs:t.tokenIDs}))))),this.getTokenSuppliesMap=(t,e)=>this.fetch(this.url("GetTokenSuppliesMap"),ud(t,e)).then((t=>dd(t).then((t=>({supplies:t.supplies}))))),this.getBalanceUpdates=(t,e)=>this.fetch(this.url("GetBalanceUpdates"),ud(t,e)).then((t=>dd(t).then((t=>({page:t.page,balances:t.balances}))))),this.getTransactionHistory=(t,e)=>this.fetch(this.url("GetTransactionHistory"),ud(t,e)).then((t=>dd(t).then((t=>({page:t.page,transactions:t.transactions}))))),this.syncBalance=(t,e)=>this.fetch(this.url("SyncBalance"),ud(t,e)).then((t=>dd(t).then((t=>({}))))),this.hostname=t,this.fetch=e}url(t){return this.hostname+this.path+t}}const ud=(t={},e={})=>({method:"POST",headers:n({},e,{"Content-Type":"application/json"}),body:JSON.stringify(t||{})}),dd=t=>t.text().then((e=>{let r;try{r=JSON.parse(e)}catch(r){throw{code:"unknown",msg:`expecting JSON, got: ${e}`,status:t.status}}if(!t.ok)throw r;return r}));var fd=d((function(t,e){var r="undefined"!=typeof self?self:c,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in t,o="ArrayBuffer"in t;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function g(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():o&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,r,n=f(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=p(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=h(t),e=c(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=c(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),u(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),u(t)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var r,n,i=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];E.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function A(t,r){return new Promise((function(n,s){var o=new v(t,r);if(o.signal&&o.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new E(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),o.signal&&(o.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",l)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=d,t.Request=v,t.Response=E),e.Headers=d,e.Request=v,e.Response=E,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})),pd=u(fd);let gd;!function(t){t.MAINNET="https://mainnet-indexer.sequence.app",t.POLYGON="https://polygon-indexer.sequence.app",t.POLYGON_MUMBAI="https://mumbai-indexer.sequence.app",t.ARBITRUM="https://arbitrum-indexer.sequence.app",t.ARBITRUM_NOVA="https://arbitrum-nova-indexer.sequence.app",t.OPTIMISM="https://optimism-indexer.sequence.app",t.AVALANCHE="https://avalanche-indexer.sequence.app",t.GNOSIS="https://gnosis-indexer.sequence.app",t.BSC="https://bsc-indexer.sequence.app",t.BSC_TESTNET="https://bsc-testnet-indexer.sequence.app",t.GOERLI="https://goerli-indexer.sequence.app"}(gd||(gd={}));class md extends cd{constructor(t,e){super(t.endsWith("/")?t.slice(0,-1):t,pd),this.jwtAuth=e,this._fetch=(t,e)=>{const r={};return this.jwtAuth&&this.jwtAuth.length>0&&(r.Authorization=`BEARER ${this.jwtAuth}`),e.headers=n({},e.headers,r),pd(t,e)},this.fetch=this._fetch}}let yd,wd,vd;!function(t){t.UNKNOWN="UNKNOWN",t.ERC20="ERC20",t.ERC721="ERC721",t.ERC1155="ERC1155"}(yd||(yd={})),function(t){t.UNKNOWN="UNKNOWN",t.BUY="BUY",t.SELL="SELL"}(wd||(wd={})),function(t){t.DESC="DESC",t.ASC="ASC"}(vd||(vd={}));class bd{constructor(t,e){this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Metadata/",this.ping=t=>this.fetch(this.url("Ping"),Ed({},t)).then((t=>_d(t).then((t=>({status:t.status}))))),this.version=t=>this.fetch(this.url("Version"),Ed({},t)).then((t=>_d(t).then((t=>({version:t.version}))))),this.runtimeStatus=t=>this.fetch(this.url("RuntimeStatus"),Ed({},t)).then((t=>_d(t).then((t=>({status:t.status}))))),this.getTokenMetadata=(t,e)=>this.fetch(this.url("GetTokenMetadata"),Ed(t,e)).then((t=>_d(t).then((t=>({tokenMetadata:t.tokenMetadata}))))),this.getTokenMetadataBatch=(t,e)=>this.fetch(this.url("GetTokenMetadataBatch"),Ed(t,e)).then((t=>_d(t).then((t=>({contractTokenMetadata:t.contractTokenMetadata}))))),this.searchTokenMetadata=(t,e)=>this.fetch(this.url("SearchTokenMetadata"),Ed(t,e)).then((t=>_d(t).then((t=>({page:t.page,tokenMetadata:t.tokenMetadata}))))),this.searchTokenIDs=(t,e)=>this.fetch(this.url("SearchTokenIDs"),Ed(t,e)).then((t=>_d(t).then((t=>({page:t.page,tokenIds:t.tokenIds}))))),this.getContractInfo=(t,e)=>this.fetch(this.url("GetContractInfo"),Ed(t,e)).then((t=>_d(t).then((t=>({contractInfo:t.contractInfo}))))),this.getContractInfoBatch=(t,e)=>this.fetch(this.url("GetContractInfoBatch"),Ed(t,e)).then((t=>_d(t).then((t=>({contractInfoMap:t.contractInfoMap}))))),this.searchContractInfo=(t,e)=>this.fetch(this.url("SearchContractInfo"),Ed(t,e)).then((t=>_d(t).then((t=>({contractInfoList:t.contractInfoList}))))),this.searchContractInfoBatch=(t,e)=>this.fetch(this.url("SearchContractInfoBatch"),Ed(t,e)).then((t=>_d(t).then((t=>({contractInfoByChain:t.contractInfoByChain}))))),this.getNiftyswapTokenQuantity=(t,e)=>this.fetch(this.url("GetNiftyswapTokenQuantity"),Ed(t,e)).then((t=>_d(t).then((t=>({quantity:t.quantity}))))),this.getNiftyswapUnitPrices=(t,e)=>this.fetch(this.url("GetNiftyswapUnitPrices"),Ed(t,e)).then((t=>_d(t).then((t=>({prices:t.prices}))))),this.hostname=t,this.fetch=e}url(t){return this.hostname+this.path+t}}const Ed=(t={},e={})=>({method:"POST",headers:n({},e,{"Content-Type":"application/json"}),body:JSON.stringify(t||{})}),_d=t=>t.text().then((e=>{let r;try{r=JSON.parse(e)}catch(r){throw{code:"unknown",msg:`expecting JSON, got: ${e}`,status:t.status}}if(!t.ok)throw r;return r}));var Ad=d((function(t,e){var r="undefined"!=typeof self?self:c,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in t,o="ArrayBuffer"in t;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function g(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():o&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,r,n=f(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=p(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=h(t),e=c(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=c(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),u(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),u(t)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var r,n,i=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];E.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function A(t,r){return new Promise((function(n,s){var o=new v(t,r);if(o.signal&&o.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new E(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),o.signal&&(o.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",l)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=d,t.Request=v,t.Response=E),e.Headers=d,e.Request=v,e.Response=E,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})),Sd=u(Ad);class xd extends bd{constructor(t="https://metadata.sequence.app"){super(t.endsWith("/")?t.slice(0,-1):t,Sd)}}class kd extends mn{static isSequenceSigner(t){return Cd(t)}}function Cd(t){const e=t;return e&&void 0!==e.updateConfig&&void 0!==e.publishConfig&&void 0!==e.getWalletContext&&void 0!==e.getWalletConfig}class Pd extends Error{}const Td="tuple(\n  bool delegateCall,\n  bool revertOnError,\n  uint256 gasLimit,\n  address target,\n  uint256 value,\n  bytes data\n)[]";function Nd(t,...e){return kr.encode(["uint256",Td],[t,jd(e)])}function Id(...t){const e=Fd(...t);if(void 0===e)throw new Error("Computing hash for transactions without defined nonce");return Md(e,...t)}function Md(t,...e){return fe(Nd(t,...e))}function Od(t,e,...r){return _c(t,e,Id(...r)).replace(/^0x/,"")}async function Rd(t,e,r=!1,n){const i=Bd(e),s=(await Promise.all(e.map((t=>t.nonce)))).filter((t=>void 0!==t)).map((t=>st.from(t))),o=0!==s.length?s.reduce(((t,e)=>t.lt(e)?t:e)):void 0;return Promise.all(i.map((e=>Ld(t,e,r,n,o))))}function Bd(t){if(!Array.isArray(t)){if("auxiliary"in t){const e=t.auxiliary,r=n({},t);return delete r.auxiliary,e?[r,...Bd(e)]:[r]}return[t]}return t.flatMap(Bd)}async function Ld(t,r,n=!1,i,s){if(Ud(r))return r;const o=void 0===r.gasLimit?r.gas:r.gasLimit;if(r.to)return{delegateCall:!1,revertOnError:n,gasLimit:o?await o:i,to:await r.to,value:r.value?await r.value:0,data:await r.data,nonce:s||await r.nonce};{const a=new on(e.mainModule.abi),l=a.encodeFunctionData(a.getFunction("createContract"),[r.data]),h="string"==typeof t?t:t.getAddress();return{delegateCall:!1,revertOnError:n,gasLimit:o?await o:i,to:await h,value:r.value?await r.value:0,data:l,nonce:s||await r.nonce}}}function Ud(t){return void 0!==t.delegateCall||void 0!==t.revertOnError}function Dd(t){return void 0!==t.find((t=>Ud(t)))}function Fd(...t){const e=t.find((t=>void 0!==t.nonce));if(!e)return;const r=st.from(e.nonce);if(t.find((t=>void 0!==t.nonce&&!st.from(t.nonce).eq(r))))throw new Error("Mixed nonces on Sequence transactions");return e?e.nonce:void 0}function jd(t){return t.map((t=>{var e;return{delegateCall:!0===t.delegateCall,revertOnError:!0===t.revertOnError,gasLimit:void 0!==t.gasLimit?t.gasLimit:ze,target:null!=(e=t.to)?e:Ge,value:void 0!==t.value?t.value:ze,data:void 0!==t.data?t.data:[]}}))}function qd(t,e){return t.map((t=>n({},t,{nonce:e})))}function Wd(t,r,n){const i=new on(e.sequenceUtils.abi);if(!t||!t.sequenceUtils)throw new Error("Undefined sequenceUtils");return[{delegateCall:!1,revertOnError:!0,gasLimit:0,to:t.sequenceUtils,value:0,data:i.encodeFunctionData(i.getFunction("requireNonExpired"),[n])},...r]}function Gd(t,r,n){const i=new on(e.sequenceUtils.abi);if(!t||!t.sequenceUtils)throw new Error("Undefined sequenceUtils");return[{delegateCall:!1,revertOnError:!0,gasLimit:0,to:t.sequenceUtils,value:0,data:i.encodeFunctionData(i.getFunction("requireMinNonce"),[n.address,n.space?Hd(n.space,n.nonce):n.nonce])},...r]}function Hd(t,e){const r=st.from(t),n=st.from(e),i=Ke.pow(st.from(96));if(!n.div(i).eq(ze))throw new Error("Space already encoded");return n.add(r.mul(i))}function zd(t){const e=st.from(t),r=Ke.pow(st.from(96));return[e.div(r),e.mod(r)]}function Vd(t){return void 0!==t&&void 0!==t.chainId&&void 0!==t.config&&void 0!==t.context&&void 0!==t.signature&&void 0!==t.transactions&&Array.isArray(t.transactions)&&t.transactions.reduce(((t,e)=>t&&Ud(e)),!0)}async function Kd(t,e,r){let n=[];if(n=Array.isArray(r)?Dd(r)?Bd(r):await Rd(e,r):Ud(r)?Bd([r]):await Rd(e,[r]),r.expiration&&(n=Wd(t,n,r.expiration)),r.afterNonce){const i=r.afterNonce;n=Gd(t,n,i.address?{address:i.address,nonce:i.nonce,space:i.space}:{address:e,nonce:i})}return n}class $d extends mn{signMessage(t,e){return this.signMessageWithData(t)}sendTransaction(t){throw new Error("sendTransaction method is not supported in RemoteSigner")}signTransaction(t){throw new Error("signTransaction method is not supported in RemoteSigner")}connect(t){throw new Error("connect method is not supported in RemoteSigner")}static signMessageWithData(t,e,r,n){return this.isRemoteSigner(t)?t.signMessageWithData(e,r,n):t.signMessage(e)}static isRemoteSigner(t){return void 0!==t.signMessageWithData}}var Jd=d((function(t,e){!function(r){t.exports=function(t){var n=t&&t.Promise||r.Promise,i=t&&t.XMLHttpRequest||r.XMLHttpRequest;return function(){var t=Object.create(r,{fetch:{value:void 0,writable:!0}});return function(e){var r=void 0!==t&&t||"undefined"!=typeof self&&self||void 0!==r&&r,s={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function o(t){return t&&DataView.prototype.isPrototypeOf(t)}if(s.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s.iterable&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return n.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new n((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function g(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function m(t){var e=new FileReader,r=p(e);return e.readAsText(t),r}function y(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function w(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:s.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s.arrayBuffer&&s.blob&&o(t)?(this._bodyArrayBuffer=w(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=w(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return n.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return n.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return n.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?n.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):n.resolve(this._bodyArrayBuffer)):this.blob().then(g)}),this.text=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return m(this._bodyBlob);if(this._bodyArrayBuffer)return n.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return n.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=h(t),e=c(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=c(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),u(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),u(t)},s.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(t){var e=t.toUpperCase();return b.indexOf(e)>-1?e:t}function _(t,e){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=E(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+(new Date).getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function A(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function S(t){var e=new d;return t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e}function x(t,e){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},v.call(_.prototype),v.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var k=[301,302,303,307,308];x.redirect=function(t,e){if(-1===k.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})},e.DOMException=r.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function C(t,o){return new n((function(n,a){var l=new _(t,o);if(l.signal&&l.signal.aborted)return a(new e.DOMException("Aborted","AbortError"));var h=new i;function u(){h.abort()}function f(t){try{return""===t&&r.location.href?r.location.href:t}catch(e){return t}}h.onload=function(){var t={status:h.status,statusText:h.statusText,headers:S(h.getAllResponseHeaders()||"")};t.url="responseURL"in h?h.responseURL:t.headers.get("X-Request-URL");var e="response"in h?h.response:h.responseText;setTimeout((function(){n(new x(e,t))}),0)},h.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},h.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},h.onabort=function(){setTimeout((function(){a(new e.DOMException("Aborted","AbortError"))}),0)},h.open(l.method,f(l.url),!0),"include"===l.credentials?h.withCredentials=!0:"omit"===l.credentials&&(h.withCredentials=!1),"responseType"in h&&(s.blob?h.responseType="blob":s.arrayBuffer&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(h.responseType="arraybuffer")),!o||"object"!=typeof o.headers||o.headers instanceof d?l.headers.forEach((function(t,e){h.setRequestHeader(e,t)})):Object.getOwnPropertyNames(o.headers).forEach((function(t){h.setRequestHeader(t,c(o.headers[t]))})),l.signal&&(l.signal.addEventListener("abort",u),h.onreadystatechange=function(){4===h.readyState&&l.signal.removeEventListener("abort",u)}),h.send(void 0===l._bodyInit?null:l._bodyInit)}))}C.polyfill=!0,r.fetch||(r.fetch=C,r.Headers=d,r.Request=_,r.Response=x),e.Headers=d,e.Request=_,e.Response=x,e.fetch=C,Object.defineProperty(e,"__esModule",{value:!0})}(e),{fetch:t.fetch,Headers:t.Headers,Request:t.Request,Response:t.Response,DOMException:t.DOMException}}()}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:c)})),Zd=u(Jd);const Xd=(t={},e={})=>({method:"POST",headers:n({},e,{"Content-Type":"application/json"}),body:JSON.stringify(t||{})}),Yd=t=>t.text().then((e=>{let r;try{r=JSON.parse(e)}catch(r){throw{code:"unknown",msg:`expecting JSON, got: ${e}`,status:t.status}}if(!t.ok)throw r;return r}));async function Qd(t){return Array.isArray(t)?Promise.all(t.map((t=>Ct(t)))):Ct(t)}class tf extends kd{constructor(t,...e){super(),this.context=void 0,this.config=void 0,this._signers=void 0,this.provider=void 0,this.sender=void 0,this.relayer=void 0,this.chainId=void 0;const{config:r,context:i,strict:s}=t;if(this.context=n({},i||Su),!0===s?this.context.nonStrict=void 0:!1===s&&(this.context.nonStrict=!0),!this.context.nonStrict&&!cc(r))throw new Error("wallet config is not usable (strict mode)");this.config=fc(r),this._signers=e.map((t=>mn.isSigner(t)?t:new Fa(t))),this.imageHash}useConfig(t,e){return new tf({config:t,context:this.context,strict:e},...this._signers).setProvider(this.provider).setRelayer(this.relayer)}useSigners(...t){return new tf({config:this.config,context:this.context},...t).setProvider(this.provider).setRelayer(this.relayer)}connect(t,e){if(Pu(t))return new tf({config:this.config,context:this.context},...this._signers).setProvider(t).setRelayer(e);throw new Error("Wallet provider argument is expected to be a JsonRpcProvider")}setProvider(t){if(void 0===t)return this;if(un.isProvider(t))this.provider=t,this.sender=new Iu(t);else{const e=new Xl(t);this.provider=e,this.sender=new Iu(e)}return this.chainId=void 0,this}setRelayer(t){return void 0===t||(this.relayer=t),this}async getProvider(t){return t&&await this.getChainIdNumber(t),this.provider}async getRelayer(t){return t&&await this.getChainIdNumber(t),this.relayer}async getWalletContext(){return this.context}async getWalletConfig(t){t=await this.getChainIdNumber(t);return[n({},this.config,{chainId:t})]}async getWalletState(t){const[e,r,n]=await Promise.all([this.getAddress(),this.getChainId(),this.isDeployed()]);return[{context:this.context,config:this.config,address:e,chainId:r,deployed:n,imageHash:this.imageHash,lastImageHash:n?await Sf(this):void 0}]}get connected(){return void 0!==this.sender}get address(){return uc(this.config,this.context)}get imageHash(){return dc(this.config)}async getAddress(){return this.address}async getSigners(){return this._signers&&0!==this._signers.length?Promise.all(this._signers.map((t=>t.getAddress().then((t=>Te(t)))))):[]}async getChainId(){if(this.chainId)return this.chainId;if(!this.provider)throw new Error("provider is not set, first connect a provider");return this.chainId=(await this.provider.getNetwork()).chainId,this.chainId}async getNetworks(){return[{chainId:await this.getChainId(),name:"",rpcUrl:""}]}async getNonce(t,e){return this.relayer.getNonce(this.config,this.context,e,t)}async getTransactionCount(t){const e=await this.getNonce(t,0),[r,n]=zd(e);return st.from(n).toNumber()}async sendTransaction(t,e,r,n,i,s){const o=await this.signTransactions(t,e,r);if(i){i(o,Od(uc(o.config,o.context),o.chainId,...o.transactions))}return this.relayer.relay(o,n,s)}async sendTransactionBatch(t,e,r=!0,n,i,s){return this.sendTransaction(t,e,r,n,i,s)}async signTransactions(t,e,r){const n=await this.getChainIdNumber(e),i=await Qd(t);if(!this.provider)throw new Error("missing provider");if(!this.relayer)throw new Error("missing relayer");let s=await Kd(this.context,this.address,i);if(s.some((t=>void 0===t.gasLimit))){const t=await this.relayer.simulate(this.address,...s);for(const e in s)void 0===s[e].gasLimit&&(s[e].gasLimit=t[e].gasLimit)}const o=Fd(...s),a=o||await this.getNonce();s=qd(s,a);const l=Md(a,...s);return{digest:l,chainId:n,context:this.context,config:this.config,transactions:s,nonce:a,signature:await this.sign(l,!0,e,r)}}async sendSignedTransactions(t,e,r){if(!this.relayer)throw new Error("relayer is not set, first connect a relayer");return await this.getChainIdNumber(e),this.relayer.relay(t,r)}async signMessage(t,e,r,n=!1){const i="string"!=typeof t||t.startsWith("0x")?t:nr(t);return this.sign(i,n,e,r)}async signTypedData(t,e,r,n,i){const s=await this.getChainIdNumber(n),o=t.chainId?st.from(t.chainId).toNumber():void 0;if(o&&o!==s)throw new Error(`signTypedData: domain.chainId (${t.chainId}) is expected to be ${s}`);const a=Rc({domain:t,types:e,message:r});return this.sign(a,!0,s,i)}async _signTypedData(t,e,r,n,i){return this.signTypedData(t,e,r,n,i)}async subDigest(t,e){const r=await this.getChainIdNumber(e);return U(_c(this.address,r,t))}async sign(t,e=!0,r,i){var s=this;const o=await this.getChainIdNumber(r),a=e?t:fe(t),l=await this.subDigest(a,r),h=async function(t,e){const r=await Promise.all(t.map((t=>t.getAddress()))),a=await Promise.all(s.config.signers.map((async function(a){try{const h=t[r.indexOf(a.address)];if(!h)return a;if(Cd(h)){if(h===s)throw Error("Can't sign transactions for self");return n({},a,{signature:await h.signMessage(l,o,i,!0)+"03"})}if($d.isRemoteSigner(h)){const t=await h.signMessageWithData(l,e,o);try{if(Qu(l,{weight:a.weight,signature:t})===a.address)return{weight:a.weight,signature:t}}catch(t){}return n({},a,{signature:t})}return{weight:a.weight,signature:await h.signMessage(l)+"02"}}catch(t){if(i)throw t;return console.warn(`Skipped signer ${a.address}`),a}})));return{threshold:s.config.threshold,signers:a}},c=this._signers.filter((t=>!$d.isRemoteSigner(t))),u=await h(c,this.packMsgAndSig(a,[],o));if(u.signers.filter(Vu).reduce(((t,e)=>t+e.weight),0)>=this.config.threshold)return rd(u);const d=this._signers.filter((t=>$d.isRemoteSigner(t))),f=await h(d,this.packMsgAndSig(a,rd(u),o));return rd(td(u,f))}async signWeight(){return(await this.getSigners()).reduce(((t,e)=>{const r=this.config.signers.find((t=>t.address===e));return r?t.add(r.weight):t}),ze)}async isDeployed(t){await this.getChainIdNumber(t);const e=await this.provider.getCode(this.address);return!!e&&"0x"!==e}async updateConfig(t,e,r=!1,i,s,o,a){t||(t=this.config);const[l,h]=await Promise.all([this.buildUpdateConfigTransaction(t,r,i),null!=e?e:this.getNonce()]);return[n({address:this.address},t),await this.sendTransaction(qd(l,h),void 0,void 0,s,o,a)]}async publishConfig(t,e,r=[],n,i,s){return this.sendTransaction(this.config.address?this.buildPublishConfigTransaction(this.config,t,e):await this.buildPublishSignersTransaction(t,e,r),void 0,void 0,n,i,s)}async buildUpdateConfigTransaction(t,r=!1,n){var i=this;if(!this.context.nonStrict&&!cc(t))throw new Error("wallet config is not usable (strict mode)");const s=await async function(){try{const t=await i.provider.getStorageAt(i.address,kr.encode(["address"],[i.address]));return 0===gc(t,i.context.mainModuleUpgradable)}catch(t){return!1}}(),o=new on(e.mainModule.abi),a=2*(1e5+1800*t.signers.length),l=s?[]:[{delegateCall:!1,revertOnError:!0,gasLimit:ze,to:this.address,value:ze,data:o.encodeFunctionData(o.getFunction("updateImplementation"),[this.context.mainModuleUpgradable])}],h=new on(e.mainModuleUpgradable.abi),c=[...l,{delegateCall:!1,revertOnError:!0,gasLimit:ze,to:this.address,value:ze,data:h.encodeFunctionData(h.getFunction("updateImageHash"),[dc(t)])},...r?await this.buildPublishConfigTransaction(t,n):[]];return 1===c.length?c:[{delegateCall:!1,revertOnError:!1,gasLimit:a,to:this.address,value:ze,data:o.encodeFunctionData(o.getFunction("selfExecute"),[jd(c)])}]}buildPublishConfigTransaction(t,r=!0,n){const i=new on(e.sequenceUtils.abi);return[{delegateCall:!1,revertOnError:!0,gasLimit:ze,to:this.context.sequenceUtils,value:ze,nonce:n,data:i.encodeFunctionData(i.getFunction("publishConfig"),[this.address,t.threshold,fc(t).signers.map((t=>({weight:t.weight,signer:t.address}))),r])}]}async buildPublishSignersTransaction(t=!0,r,n=[]){var i;const s=new on(e.sequenceUtils.abi),o=new on(e.requireFreshSigner.abi),a=aa(32),l=await this.signMessage(a,this.chainId,!1),h=Xu(l),c=rd({threshold:h.threshold,signers:h.signers.map(((t,e)=>{if(Ju(t)){const t=this.config.signers[e];return{weight:t.weight,address:t.address}}return t}))}),u=null==(i=this.context.libs)?void 0:i.requireFreshSigner;if(n.length>0&&void 0===u)throw Error("requireFreshSigners missing library");return[...n.map((t=>({delegateCall:!1,revertOnError:!0,gasLimit:ze,to:u,value:ze,nonce:r,data:o.encodeFunctionData(o.getFunction("requireFreshSigner"),[t])}))),{delegateCall:!1,revertOnError:!0,gasLimit:ze,to:this.context.sequenceUtils,value:ze,nonce:r,data:s.encodeFunctionData(s.getFunction("publishInitialSigners"),[this.address,fe(a),this.config.signers.length,c,t])}]}async getChainIdNumber(t){if(!t)return await this.getChainId();const e=au(t);if(this.context.nonStrict)return e;const r=await this.getChainId();if(r!==e)throw new Error(`the specified chainId ${e} does not match the wallet's connected chainId ${r}`);return r}packMsgAndSig(t,e,r){return kr.encode(["address","uint256","bytes","bytes"],[this.address,r,t,e])}signTransaction(t){throw new Error("signTransaction method is not supported in Wallet, please use signTransactions(...)")}static async singleOwner(t,e){const r=mn.isSigner(t)?t:new Fa(t),n={threshold:1,signers:[{weight:1,address:Te(await r.getAddress())}]};return new tf({config:n,context:e},r)}async hasEnoughSigners(t){return t&&await this.getChainIdNumber(t),(await this.signWeight()).gte(this.config.threshold)}}const ef={bundleCreation:!0,creationGasLimit:Ke.pow(17)};class rf{constructor(t){this.provider=void 0,this.bundleCreation=void 0,this.creationGasLimit=void 0;const e=n({},ef,t);this.bundleCreation=e.bundleCreation,this.provider=e.provider,this.creationGasLimit=st.from(e.creationGasLimit)}async isWalletDeployed(t){if(!this.provider)throw new Error("Bundled creation provider not found");return"0x"!==await this.provider.getCode(t)}prepareWalletDeploy(t,r){const n=new ru.Interface(e.factory.abi);return{to:r.factory,data:n.encodeFunctionData(n.getFunction("deploy"),[r.mainModule,dc(t)])}}async prependWalletDeploy(t){const{config:r,context:i,transactions:s,nonce:o,signature:a}=t,l=uc(r,i),h=new ru.Interface(e.mainModule.abi),c=async function(){const t=await a;return"string"==typeof t?t:rd(t)}();return this.bundleCreation&&!await this.isWalletDeployed(l)?{to:i.guestModule,execute:{transactions:[n({},this.prepareWalletDeploy(r,i),{delegateCall:!1,revertOnError:!1,gasLimit:this.creationGasLimit,value:ze}),{delegateCall:!1,revertOnError:!0,gasLimit:ze,to:l,value:ze,data:h.encodeFunctionData(h.getFunction("execute"),[jd(s),o,await c])}],nonce:ze,signature:"0x"}}:{to:l,execute:{transactions:s,nonce:st.from(o),signature:await c}}}async prepareTransactions(t,r,n,...i){const s=Fd(...i);if(!s)throw new Error("Unable to prepare transactions without a defined nonce");const{to:o,execute:a}=await this.prependWalletDeploy({config:t,context:r,transactions:i,nonce:s,signature:n}),l=new ru.Interface(e.mainModule.abi);return{to:o,data:l.encodeFunctionData(l.getFunction("execute"),[jd(a.transactions),a.nonce,a.signature])}}}const nf=st.from(8e5),sf={waitPollRate:1e3,deltaBlocksLog:12,fromBlockLog:-1024};class of extends rf{constructor(t){super(t),this.provider=void 0,this.waitPollRate=void 0,this.deltaBlocksLog=void 0,this.fromBlockLog=void 0;const e=n({},sf,t);this.provider=e.provider,this.waitPollRate=e.waitPollRate,this.deltaBlocksLog=e.deltaBlocksLog,this.fromBlockLog=e.fromBlockLog}async simulate(t,...e){var r=this;return(await Promise.all(e.map((async function(e){if(e.gasLimit&&!st.from(e.gasLimit||0).eq(ze))return e.gasLimit;if(e.delegateCall)return nf;if(e.to===t&&!await r.isWalletDeployed(t))return nf;if(!r.provider)throw new Error("signer.provider is not set, but is required");return r.provider.estimateGas({from:t,to:e.to,data:e.data,value:e.value})})))).map((t=>({executed:!0,succeeded:!0,gasUsed:st.from(t).toNumber(),gasLimit:st.from(t).toNumber()})))}async getNonce(t,r,n,i){if(!this.provider)throw new Error("provider is not set");const s=uc(t,r);if("0x"===await this.provider.getCode(s))return 0;void 0===n&&(n=0);const o=new xo(s,e.mainModule.abi,this.provider);return Hd(n,await o.readNonce(n,{blockTag:i}))}async wait(t,e,r=this.waitPollRate,i=5){var s=this;"string"!=typeof t&&(Cc.info("computing id",t.config,t.context,t.chainId,...t.transactions),t=Od(uc(t.config,t.context),t.chainId,...t.transactions));let o=!1;const a=async function(t,e){let n=0;for(;!o;){try{return await t()}catch(t){if(n++,void 0!==i&&n>=i)throw Cc.error(`giving up after ${n} failed attempts${e?`: ${e}`:""}`,t),t;Cc.warn(`attempt #${n} failed${e?`: ${e}`:""}`,t)}r>0&&await new Promise((t=>setTimeout(t,r)))}throw new Error(`timed out after ${n} failed attempts${e?`: ${e}`:""}`)},l=async function(){let e=s.fromBlockLog;if(e<0){const t=await a((()=>s.provider.getBlockNumber()),"unable to get latest block number");e=t+e}if("string"!=typeof t)throw new Error("impossible");const i=t.replace("0x","");for(;!o;){const t=await a((()=>s.provider.getBlockNumber()),"unable to get latest block number"),l=await a((()=>s.provider.getLogs({fromBlock:Math.max(0,e-s.deltaBlocksLog),toBlock:t,topics:["0x1f180c27086c7a39ea2a7b25239d1ab92348f07ca7bb59d1438fcf527568f881"]})),`unable to get NonceChange logs for blocks ${Math.max(0,e-s.deltaBlocksLog)} to ${t}`);e=t;const h=(await Promise.all(l.map((t=>a((()=>s.provider.getTransactionReceipt(t.transactionHash)),`unable to get receipt for transaction ${t.transactionHash}`))))).find((t=>t.logs.find((t=>0===t.topics.length&&t.data.replace("0x","")===i||1===t.topics.length&&"0x3dbd1590ea96dd3253a91f24e64e3a502e1225d602a5731357bc12643070ccd7"===t.topics[0]&&t.data.length>=64&&t.data.replace("0x","").startsWith(i)))));if(h)return n({receipt:h},await a((()=>s.provider.getTransaction(h.transactionHash)),`unable to get transaction ${h.transactionHash}`));o||await new Promise((t=>setTimeout(t,r)))}throw new Error(`Timeout waiting for transaction receipt ${t}`)};return void 0!==e?Promise.race([l(),new Promise(((r,n)=>setTimeout((()=>{o=!0,n(`Timeout waiting for transaction receipt ${t}`)}),e)))]):l()}}let af,lf,hf,cf;!function(t){t.UNKNOWN="UNKNOWN",t.DROPPED="DROPPED",t.QUEUED="QUEUED",t.SENT="SENT",t.SUCCEEDED="SUCCEEDED",t.PARTIALLY_FAILED="PARTIALLY_FAILED",t.FAILED="FAILED"}(af||(af={})),function(t){t.SEND="SEND",t.RECEIVE="RECEIVE",t.BRIDGE_DEPOSIT="BRIDGE_DEPOSIT",t.BRIDGE_WITHDRAW="BRIDGE_WITHDRAW",t.BURN="BURN",t.UNKNOWN="UNKNOWN"}(lf||(lf={})),function(t){t.UNKNOWN="UNKNOWN",t.ERC20_TOKEN="ERC20_TOKEN",t.ERC1155_TOKEN="ERC1155_TOKEN"}(hf||(hf={})),function(t){t.DESC="DESC",t.ASC="ASC"}(cf||(cf={}));class uf{constructor(t,e){this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Relayer/",this.ping=t=>this.fetch(this.url("Ping"),df({},t)).then((t=>ff(t).then((t=>({status:t.status}))))),this.version=t=>this.fetch(this.url("Version"),df({},t)).then((t=>ff(t).then((t=>({version:t.version}))))),this.runtimeStatus=t=>this.fetch(this.url("RuntimeStatus"),df({},t)).then((t=>ff(t).then((t=>({status:t.status}))))),this.getSequenceContext=t=>this.fetch(this.url("GetSequenceContext"),df({},t)).then((t=>ff(t).then((t=>({data:t.data}))))),this.getChainID=t=>this.fetch(this.url("GetChainID"),df({},t)).then((t=>ff(t).then((t=>({chainID:t.chainID}))))),this.sendMetaTxn=(t,e)=>this.fetch(this.url("SendMetaTxn"),df(t,e)).then((t=>ff(t).then((t=>({status:t.status,txnHash:t.txnHash}))))),this.getMetaTxnNonce=(t,e)=>this.fetch(this.url("GetMetaTxnNonce"),df(t,e)).then((t=>ff(t).then((t=>({nonce:t.nonce}))))),this.getMetaTxnReceipt=(t,e)=>this.fetch(this.url("GetMetaTxnReceipt"),df(t,e)).then((t=>ff(t).then((t=>({receipt:t.receipt}))))),this.simulate=(t,e)=>this.fetch(this.url("Simulate"),df(t,e)).then((t=>ff(t).then((t=>({results:t.results}))))),this.feeTokens=t=>this.fetch(this.url("FeeTokens"),df({},t)).then((t=>ff(t).then((t=>({isFeeRequired:t.isFeeRequired,tokens:t.tokens}))))),this.feeOptions=(t,e)=>this.fetch(this.url("FeeOptions"),df(t,e)).then((t=>ff(t).then((t=>({options:t.options,quote:t.quote}))))),this.sentTransactions=(t,e)=>this.fetch(this.url("SentTransactions"),df(t,e)).then((t=>ff(t).then((t=>({page:t.page,transactions:t.transactions}))))),this.pendingTransactions=(t,e)=>this.fetch(this.url("PendingTransactions"),df(t,e)).then((t=>ff(t).then((t=>({page:t.page,transactions:t.transactions}))))),this.listGasSponsors=(t,e)=>this.fetch(this.url("ListGasSponsors"),df(t,e)).then((t=>ff(t).then((t=>({page:t.page,gasSponsors:t.gasSponsors}))))),this.addGasSponsor=(t,e)=>this.fetch(this.url("AddGasSponsor"),df(t,e)).then((t=>ff(t).then((t=>({status:t.status,gasSponsor:t.gasSponsor}))))),this.updateGasSponsor=(t,e)=>this.fetch(this.url("UpdateGasSponsor"),df(t,e)).then((t=>ff(t).then((t=>({status:t.status,gasSponsor:t.gasSponsor}))))),this.reportGasSponsorUsage=(t,e)=>this.fetch(this.url("ReportGasSponsorUsage"),df(t,e)).then((t=>ff(t).then((t=>({gasSponsorUsage:t.gasSponsorUsage}))))),this.hostname=t,this.fetch=e}url(t){return this.hostname+this.path+t}}const df=(t={},e={})=>({method:"POST",headers:n({},e,{"Content-Type":"application/json"}),body:JSON.stringify(t||{})}),ff=t=>t.text().then((e=>{let r;try{r=JSON.parse(e)}catch(r){throw{code:"unknown",msg:`expecting JSON, got: ${e}`,status:t.status}}if(!t.ok)throw r;return r}));var pf=Object.freeze({__proto__:null,WebRPCVersion:"v1",WebRPCSchemaVersion:"v0.4.0",WebRPCSchemaHash:"e7d1a1c505a5bcc9189296c17a160c72e1f6ef8a",get ETHTxnStatus(){return af},get TransferType(){return lf},get FeeTokenType(){return hf},get SortOrder(){return cf},Relayer:uf});const gf=[af.DROPPED,af.SUCCEEDED,af.PARTIALLY_FAILED,af.FAILED],mf=[af.DROPPED,af.PARTIALLY_FAILED,af.FAILED];function yf(t){return void 0!==t.url&&"string"==typeof t.url}class wf extends rf{constructor(t){super(t),this.service=void 0,this.service=new uf(t.url,Zd().fetch)}async waitReceipt(t,e=1e3,r=5,n){"string"!=typeof t&&(Cc.info("computing id",t.config,t.context,t.chainId,...t.transactions),t=Od(uc(t.config,t.context),t.chainId,...t.transactions)),Cc.info(`[rpc-relayer/waitReceipt] waiting for ${t}`);let i=0;for(;void 0===n||!n();){try{const{receipt:e}=await this.service.getMetaTxnReceipt({metaTxID:t});if(e&&e.txnReceipt&&"null"!==e.txnReceipt&&gf.includes(e.status))return{receipt:e}}catch(t){if(i++,i===r)throw t}void 0!==n&&n()||await new Promise((t=>setTimeout(t,e)))}throw new Error(`Cancelled waiting for transaction receipt ${t}`)}async simulate(t,...e){const r=kr.encode([Td],[jd(e)]);return(await this.service.simulate({wallet:t,transactions:r})).results}async getFeeOptions(t,r,...n){const i=await this.service.feeTokens();if(i.isFeeRequired){const s=i.tokens.map((t=>t.symbol)).join(", ");Cc.info(`[rpc-relayer/getFeeOptions] relayer fees are required, accepted tokens are ${s}`);const o=uc(t,r);let a=Fd(...n);if(void 0===a&&(a=await this.getNonce(t,r)),!this.provider)throw Cc.warn("[rpc-relayer/getFeeOptions] provider not set, needed for stub signature"),new Error("provider is not set");const{to:l,execute:h}=await this.prependWalletDeploy({config:t,context:r,transactions:n,nonce:a,signature:id(this.provider,t)}),c=new on(e.mainModule.abi),u=c.encodeFunctionData(c.getFunction("execute"),[jd(h.transactions),h.nonce,h.signature]),{options:d,quote:f}=await this.service.feeOptions({wallet:o,to:l,data:u});return Cc.info(`[rpc-relayer/getFeeOptions] got refund options ${JSON.stringify(d)}`),{options:d,quote:{_tag:"FeeQuote",_quote:f}}}return Cc.info("[rpc-relayer/getFeeOptions] relayer fees are not required"),{options:[]}}async gasRefundOptions(t,e,...r){const{options:n}=await this.getFeeOptions(t,e,...r);return n}async getNonce(t,e,r){const n=uc(t,e);Cc.info(`[rpc-relayer/getNonce] get nonce for wallet ${n} space: ${r}`);const i=void 0!==r?st.from(r).toHexString():void 0,s=await this.service.getMetaTxnNonce({walletContractAddress:n,space:i}),o=st.from(s.nonce),[a,l]=zd(o);return Cc.info(`[rpc-relayer/getNonce] got next nonce for wallet ${n} ${l} space: ${a}`),o}async relay(t,r,n=!0){var i=this;let s;if(Cc.info(`[rpc-relayer/relay] relaying signed meta-transactions ${JSON.stringify(t)} with quote ${JSON.stringify(r)}`),void 0!==r&&("string"==typeof r._quote?s=r._quote:Cc.warn("[rpc-relayer/relay] ignoring invalid fee quote")),!this.provider)throw Cc.warn("[rpc-relayer/relay] provider not set, failed relay"),new Error("provider is not set");const{to:o,execute:a}=await this.prependWalletDeploy(t),l=uc(t.config,t.context),h=new on(e.mainModule.abi),c=h.encodeFunctionData(h.getFunction("execute"),[jd(a.transactions),a.nonce,a.signature]),u=await this.service.sendMetaTxn({call:{walletAddress:l,contract:o,input:c},quote:s});if(Cc.info(`[rpc-relayer/relay] got relay result ${JSON.stringify(u)}`),n)return this.wait(u.txnHash);{const t={hash:u.txnHash,confirmations:0,from:l,wait:t=>Promise.reject(new Error("impossible"))},e=async function(e){var r;if(!i.provider)throw new Error("cannot wait for receipt, relayer has no provider set");const n=await i.wait(u.txnHash),s=null==(r=n.receipt)?void 0:r.transactionHash;if(!s)throw new Error("cannot wait for receipt, unknown native transaction hash");return Object.assign(t,n),i.provider.waitForTransaction(s,e)};return t.wait=e,t}}async wait(t,e,r=1e3,n=5){var i=this;let s=!1;const{receipt:o}=await(void 0!==e?Promise.race([this.waitReceipt(t,r,n,(()=>s)),new Promise(((r,n)=>setTimeout((()=>{s=!0,n(`Timeout waiting for transaction receipt ${t}`)}),e)))]):this.waitReceipt(t,r,n));if(!o.txnReceipt||mf.includes(o.status))throw new vf(o);const a=JSON.parse(o.txnReceipt);return{blockHash:a.blockHash,blockNumber:st.from(a.blockNumber).toNumber(),confirmations:1,from:"string"==typeof t?void 0:uc(t.config,t.context),hash:a.transactionHash,raw:o.txnReceipt,receipt:a,wait:async function(t){return i.provider.waitForTransaction(a.transactionHash,t)}}}}class vf{constructor(t){this.receipt=t}}function bf(t){return"object"==typeof t&&"function"==typeof t.simulate&&"function"==typeof t.getFeeOptions&&"function"==typeof t.gasRefundOptions&&"function"==typeof t.getNonce&&"function"==typeof t.relay&&"function"==typeof t.wait}class Ef extends kd{constructor(t,...e){super(),this.options=void 0,this._wallets=void 0,this._signers=void 0,this.provider=void 0,this._chainId=void 0,this.options=t,this._signers=e,t.context||(this.options.context=n({},Su)),this.options.networks?this.setNetworks(this.options.networks):this.setNetworks([..._u])}useSigners(...t){return this._signers=t,this._wallets.forEach((e=>{e.wallet=e.wallet.useSigners(...t)})),this}async getWalletContext(){return this.options.context}getConfigFinder(){return this.options.configFinder?this.options.configFinder:new iu(this.authWallet().wallet.provider)}async getWalletConfig(t){let e=[];if(t){const r=this.getWalletByNetwork(t);r&&e.push(r)}else e=this._wallets;return(await Promise.all(e.map((t=>t.wallet.getWalletConfig())))).flat()}async getWalletState(t){let e=[];if(t){const r=this.getWalletByNetwork(t);r&&e.push(r)}else e=this._wallets;const r=Promise.all(e.map((t=>this.getConfigFinder().findCurrentConfig({address:t.wallet.address,provider:t.wallet.provider,context:t.wallet.context,knownConfigs:[t.wallet.config]})))),i=(await Promise.all(e.map((t=>t.wallet.getWalletState())))).flat(),s=i.findIndex((t=>t.chainId===this.getAuthChainId()));s>=0&&(i[s].config=await this.currentConfig(e[s].wallet));const o=await r;return i.map(((t,e)=>{var r;return n({},t,{config:null==(r=o[e])?void 0:r.config})}))}get address(){return this._wallets[0].wallet.address}getAddress(){return this._wallets[0].wallet.getAddress()}async getSigners(){return this._wallets[0].wallet.getSigners()}async getProvider(t){var e,r;return t?null==(r=this._wallets.find((e=>e.network.chainId===t)))?void 0:r.wallet.getProvider():null==(e=this.mainWallet())?void 0:e.wallet.getProvider()}async getRelayer(t){var e,r;return t?null==(r=this._wallets.find((e=>e.network.chainId===t)))?void 0:r.wallet.getRelayer():null==(e=this.mainWallet())?void 0:e.wallet.getRelayer()}async getNetworks(){return this.options.networks}async getChainId(){if(this._chainId)return this._chainId;const t=await this.provider.getNetwork();return this._chainId=t.chainId,this._chainId}getAuthChainId(){try{return this.options.networks.find((t=>t.isAuthChain)).chainId}catch(t){throw new Error("no auth network")}}async signMessage(t,e,r=!0,n=!1){var i=this;let{wallet:s}=await async function(){if(!e)return i.mainWallet();if(e.address){const t=await e.getChainId();return i.getWalletByNetwork(t)}return i.getWalletByNetwork(e)}(),o=await this.currentConfig(s);o=o||this._wallets[0].wallet.config,s=s.useConfig(o);const a=await s.signWeight();if(a.lt(s.config.threshold)&&!1!==r)throw new Pd(`Sign message - wallet combined weight ${a.toString()} below required ${s.config.threshold.toString()}`);return s.signMessage(t,void 0,r,n)}async signAuthMessage(t,e=!0,r=!1){var n;return this.signMessage(t,null==(n=this.authWallet())?void 0:n.wallet,e,r)}async signTypedData(t,e,r,n,i=!0){const s=n?this.getWalletByNetwork(n).wallet:this.mainWallet().wallet,o=Rc({domain:t,types:e,message:r});return this.signMessage(o,s,i,!0)}async _signTypedData(t,e,r,n,i=!0){return this.signTypedData(t,e,r,n,i)}async hasEnoughSigners(t){const e=t?this.getWalletByNetwork(t).wallet:this.mainWallet().wallet,r=await this.currentConfig(e);return e.useConfig(r).hasEnoughSigners()}async getFeeOptions(t,e,r=!0){const n=e?this.getWalletByNetwork(e).wallet:this.mainWallet().wallet,i=this.options.context;if(!i)throw new Error("missing wallet context");const[s,o]=await Promise.all([this.currentConfig(n),this.prependConfigUpdate(t,e,r,!0)]);if(!s)throw new Error(`missing current config for chain ${e}`);const a=await Kd(i,this.address,o);return n.relayer.getFeeOptions(s,i,...a)}async sendTransaction(t,e,r=!0,n,i){const s=await this.signTransactions(t,e,r);if(i){i(s,Od(uc(s.config,s.context),s.chainId,...s.transactions))}return(e?this.getWalletByNetwork(e).wallet:this.mainWallet().wallet).sendSignedTransactions(s,e,n)}async sendTransactionBatch(t,e,r=!0,n,i){return this.sendTransaction(t,e,r,n,i)}async signTransactions(t,e,r){const n=e?this.getWalletByNetwork(e).wallet:this.mainWallet().wallet;let i=await this.currentConfig(n);if(!i&&(i=await this.currentConfig(),!i))throw new Error("missing auth chain config");const s=await this.prependConfigUpdate(t,e,r);return n.useConfig(i).signTransactions(s)}async prependConfigUpdate(t,e,r,n){const i=await Qd(t),s=e?this.getWalletByNetwork(e).wallet:this.mainWallet().wallet,[o,a]=await Promise.all([this.currentConfig(s),this.currentConfig()]);if(!n){const t=await s.useConfig(o).signWeight();if(t.lt(o.threshold)&&r)throw new Pd(`wallet combined weight ${t.toString()} below required threshold ${o.threshold.toString()}`)}if(await s.isDeployed()&&pc(a,o))return i;const l=Array.isArray(i)?i:[i];return[...await s.buildUpdateConfigTransaction(a,!1),...l]}async sendSignedTransactions(t,e,r){return(e?this.getWalletByNetwork(e).wallet:this.mainWallet().wallet).sendSignedTransactions(t,void 0,r)}async updateConfig(t,e,r,i){const s=this.authWallet().wallet;if(t=t?fc(t):s.config,pc(s.config,t)&&!await this.isDeployed())return await s.updateConfig(t,void 0,!0,e,r,i);const o=await this.currentConfig();if(pc(o,t))return[n({},o,{address:this.address}),void 0];const[a,l]=await s.useConfig(o).updateConfig(t,void 0,!0,e,r,i);return[n({},t,{address:this.address}),l]}publishConfig(t,e=[],r,n){return this.authWallet().wallet.publishConfig(t,void 0,e,r,n)}async isDeployed(t){return(()=>t?t.address?t:this.getWalletByNetwork(t).wallet:this.authWallet().wallet)().isDeployed()}async currentConfig(t){const e=(()=>t?t.address?t:this.getWalletByNetwork(t).wallet:this.authWallet().wallet)();return(await this.getConfigFinder().findCurrentConfig({address:this.address,provider:e.provider,context:e.context,knownConfigs:[e.config]})).config}getWallets(){return this._wallets}getWalletByNetwork(t){const e=au(t),r=this._wallets.find((t=>t.network.chainId===e));if(!r)throw new Error(`network ${t} not found in wallets list`);return r}mainWallet(){const t=this._wallets.find((t=>t.network.isDefaultChain));if(!t)throw new Error("mainWallet not found");return t}authWallet(){const t=this._wallets.find((t=>t.network.isAuthChain));if(!t)throw new Error("authChain wallet not found");return t}setNetworks(t,e=[],r){let i=[];if(this._chainId=void 0,r){const n=parseInt(r),s=t.find((t=>t.name===r||t.chainId===n)),o=e.find((t=>t.name===r||t.chainId===n));if(!s&&!o)throw new Error(`unable to set default network as chain '${r}' does not exist`);s?(t.forEach((t=>t.isDefaultChain=!1)),s.isDefaultChain=!0,i=t):o&&(e.forEach((t=>t.isDefaultChain=!1)),o.isDefaultChain=!0,i=e)}else i=t;return this.options.networks=uu(gu(i)),this._wallets=this.options.networks.map((t=>{const e=new tf({config:this.options.initialConfig,context:this.options.context},...this._signers);if(t.provider)e.setProvider(t.provider);else{if(!t.rpcUrl||""===t.rpcUrl)throw new Error(`network config is missing provider settings for chainId ${t.chainId}`);e.setProvider(t.rpcUrl)}if(bf(t.relayer))e.setRelayer(t.relayer);else{if(!yf(t.relayer))throw new Error(`network config is missing relayer settings for chainId ${t.chainId}`);e.setRelayer(new wf(n({provider:e.provider},t.relayer)))}return t.isDefaultChain&&(this._chainId=t.chainId,this.provider=e.provider),{network:t,wallet:e}})),this.options.networks.find((t=>t.isDefaultChain)).chainId}connect(t){throw new Error("connect method is not supported in MultiWallet")}signTransaction(t){throw new Error("signTransaction method is not supported in MultiWallet, please use signTransactions(...)")}}async function _f(t,r,n,i,s,o){if(function(t,e,r){try{return 0===gc(Qs(e,Z(r)),t)}catch(t){return!1}}(t,r,n)||function(t,e,r){try{const n=fe(lh(["string","bytes32"],["Ethereum Signed Message:\n32",e]));return 0===gc(Qs(n,Z(r)),t)}catch(t){return!1}}(t,r,n))return!0;const a=await async function(t,r,n,i){if(!i)return;try{if("0x"===await i.getCode(t))return;const s=new xo(t,e.erc1271.abi,i),o=await s.isValidSignature(r,n);return e.erc1271.returns.isValidSignatureBytes32===o}catch(t){return!1}}(t,r,n,i);return void 0===a?Af(t,r,n,s,i,o):a}async function Af(t,e,r,n,i,s){if((i||s)&&n)try{const o=s||(await i.getNetwork()).chainId,a=Xu(r),l=U(fe(Ec(t,o,e))),h=await xf(l,a,i,n,s,!0),c=a.signers.reduce(((t,e)=>Ku(e)||Ju(e)?t+e.weight:t),0);return 0===gc(uc(h,n),t)&&c>=a.threshold}catch(t){return!1}}const Sf=async t=>{const r=await t.getAddress(),n=new xo(r,e.mainModuleUpgradable.abi,await t.getProvider()),i=await n.functions.imageHash.call([]).catch((()=>[]));return i&&i.length>0?i[0]:""},xf=async(t,e,r,n,i,s)=>{const o=void 0!==e.threshold?e:Xu(e),a=await Promise.all(o.signers.map((async e=>{if(Ku(e))return{weight:e.weight,address:Qu(t,e)};if(zu(e))return{weight:e.weight,address:Te(e.address)};if(Ju(e)){if(s&&!await _f(e.address,U(t),G(e.signature),r,n,i))throw Error("Invalid signature");return{weight:e.weight,address:e.address}}throw Error("Uknown signature type")})));return{threshold:o.threshold,signers:a}},kf=604800;class Cf{constructor(t,e,r,n,i,s,o,a,l){var h;(this.sequenceApiUrl=t,this.sequenceMetadataUrl=e,this.networks=r,this.config=n,this.context=i,this.account=s,this.metadata=o,this.authProvider=a,this._initialAuthRequest=void 0,this._jwt=void 0,this.proofStrings=new Map,this.onAuthCallbacks=[],this.apiClient=void 0,this.metadataClient=void 0,this.indexerClients=new Map,l)&&(this._jwt={token:Promise.resolve(l.token),expiration:null!=(h=l.expiration)?h:Tf(l.token)})}get name(){return this.metadata.name}get expiration(){return this.metadata.expiration?Math.max(this.metadata.expiration,120):kf}onAuth(t){this.onAuthCallbacks.push(t)}setAccount(t){this.account=t}setConfig(t){this.config=t}async auth(t=5){const e=this.sequenceApiUrl;if(!e)throw Error("No sequence api url");let r;for(let e=0;;e++)try{r=(await this.getJWT(!0)).token;break}catch(r){if(e===t-1)throw console.error(`couldn't authenticate after ${t} attempts`,r),r}return new m(e,r)}get isTestnetMode(){if(this.networks&&0!==this.networks.length)return!!this.networks[0].testnet}async getAPIClient(t=!0){if(!this.apiClient){const e=this.sequenceApiUrl;if(!e)throw Error("No chaind url");const r=(await this.getJWT(t)).token;this.apiClient=new m(e,r)}return this.apiClient}getMetadataClient(){return this.metadataClient||(this.metadataClient=new xd(this.sequenceMetadataUrl)),this.metadataClient}async getIndexerClient(t){const e=pu(this.networks,t);if(!e)throw Error(`No network for chain ${t}`);const r=(await this.getJWT(!0)).token;if(!this.indexerClients.has(e.chainId))if(e.indexer)this.indexerClients.set(e.chainId,e.indexer);else{if(!e.indexerUrl)throw Error(`No indexer url for chain ${t}`);this.indexerClients.set(e.chainId,new md(e.indexerUrl,r))}return this.indexerClients.get(e.chainId)}async getJWT(t){var e=this;const r=this.sequenceApiUrl;if(!r)throw Error("No chaind url");if(this._jwt){const t=this._jwt,e=await t.token;if(this.now()<t.expiration)return{token:e,expiration:t.expiration};this._jwt=void 0}if(!t)throw new Error("no auth token in memory");const n=this.getProofStringKey(),{proofString:i,expiration:s}=this.getProofString(n),o={token:i.then((async function(t){const i=new m(r),s=await i.getAuthToken({ewtString:t,testnetMode:e.isTestnetMode});if(!0===(null==s?void 0:s.status)&&0!==s.jwtToken.length)return s.jwtToken;throw await e.isProofStringValid(t)||e.proofStrings.delete(n),new Error("no auth token from server")})).catch((t=>{throw this._jwt=void 0,t})),expiration:s};this._jwt=o,o.token.then((()=>{this.onAuthCallbacks.forEach((t=>{try{t({status:"fulfilled",value:void 0})}catch(t){}}))})).catch((t=>{this.onAuthCallbacks.forEach((e=>{try{e({status:"rejected",reason:t})}catch(t){}}))}));return{token:await o.token,expiration:s}}getProofString(t){if(this.proofStrings.has(t)){const e=this.proofStrings.get(t);if(this.now()<e.expiration)return e;this.proofStrings.delete(t)}const e=new Jh({address:this.account.address});e.claims.app=this.name,e.setExpiryIn(this.expiration);const r=new nc,n=new iu(this.authProvider),i=this.account.authWallet(),s=this.now()+this.expiration-60,o={proofString:n.findCurrentConfig({address:i.wallet.address,provider:this.authProvider,context:i.wallet.context,knownConfigs:[i.wallet.config]}).then((t=>{if(!t.config)throw Error("Can't find latest config");return i.wallet.useConfig(t.config).sign(e.messageDigest()).then((t=>{const n=Xu(t),i=n.signers.filter(Vu).reduce(((t,e)=>t+e.weight),0);if(i<n.threshold)throw Error(`insufficient signing power, need ${n.threshold}, have ${i}`);return e.signature=t,r.encodeProof(e,!0)}))})).catch((e=>{throw this.proofStrings.delete(t),e})),expiration:s};return this.proofStrings.set(t,o),o}getProofStringKey(){return`${this.account.address} - ${this.name}`}async isProofStringValid(t){try{const e=new nc;return e.provider=this.authProvider,await e.decodeProof(t),!0}catch(t){return!1}}async dump(){let t;if(this._jwt)try{const e=this._jwt.expiration;t={token:await this._jwt.token,expiration:e}}catch(t){}return{config:this.config,context:this.context,metadata:this.metadata,jwt:t}}now(){return Math.floor((new Date).getTime()/1e3)}static async open(t){const{sequenceApiUrl:e,sequenceMetadataUrl:r,context:i,networks:s,referenceSigner:o,signers:a,threshold:l,deepSearch:h,knownConfigs:c,noIndex:u,metadata:d}=t,f=Pf(s),p=t.configFinder?t.configFinder:new iu(f),g=Promise.all(a.map((async function(t){return n({},t,{address:"string"==typeof t.signer?t.signer:await t.signer.getAddress()})}))),m=a.filter((t=>"string"!=typeof t.signer)).map((t=>t.signer)),y=(await p.findLastWalletOfInitialSigner({signer:o,context:i,provider:f,requireIndex:!h})).wallet;if(y){const t=(await p.findCurrentConfig({address:y,provider:f,context:i,knownConfigs:c})).config;if(!t)throw Error("Wallet config not found");const n=new Ef({initialConfig:t,networks:s,context:i},...m),o=new Cf(e,r,s,t,i,n,d,f),[a]=await n.updateConfig(mc(t,{threshold:l,set:await g}),!u);return o.setConfig(a),o.setAccount(new Ef({initialConfig:a,networks:s,context:i},...m)),o._initialAuthRequest=e?o.auth():Promise.reject("no sequence api url"),o}{const t=yc(l,await g),n=new Ef({initialConfig:t,networks:s,context:i},...m);await n.publishConfig(!u,[o]);const a=new Cf(e,r,s,t,i,n,d,f);return a._initialAuthRequest=e?a.auth():Promise.reject("no sequence api url"),a}}static load(t){const{sequenceApiUrl:e,sequenceMetadataUrl:r,dump:n,signers:i,networks:s}=t;return new Cf(e,r,s,n.config,n.context,new Ef({initialConfig:n.config,context:n.context,networks:s},...i),n.metadata,Pf(s),n.jwt)}}function Pf(t){var e;const r=hu(t);if(!r)throw Error("Auth chain not found");return null!=(e=r.provider)?e:new Xl(r.rpcUrl)}function Tf(t){return Sc(t).exp}const Nf=async(t,e)=>{const r=await t.getChainId(),n=Te(await t.getAddress());if(!n||""===n||"0x"===n)throw Mf;const i=new Jh;if(i.address=n,!e||!e.app||""===e.app)throw new If("authorization options requires app to be set");i.claims.app=e.app,i.claims.ogn=e.origin,i.setExpiryIn(e.expiry?Math.max(e.expiry,200):kf);const s=i.messageTypedData();i.signature=await t.signTypedData(s.domain,s.types,s.message,r);const o=new nc;return{typedData:s,proofString:await o.encodeProof(i,!0)}};class If extends Error{constructor(t){super(t),this.name="AuthError"}}const Mf=new If("auth error: account address is empty");var Of=Object.freeze({__proto__:null,signAuthorization:Nf,AuthError:If,ErrAccountIsRequired:Mf,ValidateSequenceDeployedWalletProof:async(t,e,r)=>{if(!t||void 0===t||void 0===e)return{isValid:!1};const n=r.messageDigest(),i=await t.getCode(r.address);if("0x"===i||i.length<=2)throw new Error("ValidateSequenceDeployedWalletProof failed. unable to fetch wallet contract code");const s=new xo(r.address,["function isValidSignature(bytes32, bytes) public view returns (bytes4)"],t);return await s.isValidSignature(n,U(r.signature))===Qh?{isValid:!0}:{isValid:!1}},ValidateSequenceUndeployedWalletProof:t=>async(e,r,n)=>{if(!e||void 0===e||void 0===r)return{isValid:!1};if(0!==U(await e.getCode(n.address)).length)return{isValid:!1};const i=U(fe(n.messageDigest()));return{isValid:!!await Af(n.address,i,n.signature,t||Su,e,r)}},DEFAULT_SESSION_EXPIRATION:kf,LONG_SESSION_EXPIRATION:3e7,Session:Cf}),Rf=Object.freeze({__proto__:null,WalletContractBytecode:ic,createWalletConfig:async(t,e)=>{const r={threshold:t,signers:[]};if(e.forEach((async t=>{r.signers.push({weight:t.weight,address:mn.isSigner(t.signer)?await t.signer.getAddress():t.signer})})),!cc(r))throw new Error("wallet config is not usable");return r},isUsableConfig:cc,isValidConfigSigners:(t,e)=>{if(0===e.length)return!0;const r=t.signers.map((t=>Te(t.address))),n=e.map((t=>Te(t)));let i=!0;return n.forEach((t=>{r.includes(t)||(i=!1)})),i},addressOf:uc,imageHash:dc,sortConfig:fc,isConfigEqual:pc,compareAddr:gc,editConfig:mc,genConfig:yc,ConfigFinder:class{constructor(){this.findCurrentConfig=void 0,this.findLastWalletOfInitialSigner=void 0}},SequenceUtilsFinder:iu,isDecodedAddress:zu,isDecodedSigner:Vu,isDecodedEOASigner:Ku,isDecodedEOASplitSigner:$u,isDecodedFullSigner:Ju,get SignatureType(){return Zu},decodeSignature:Xu,splitDecodedEOASigner:Yu,recoverEOASigner:Qu,joinSignatures:td,joinTwoSignatures:ed,encodeSignature:rd,signerOf:nd,mutateSignature:function(t,e,r){const i=t.signers.map((t=>nd(t,r)));return{threshold:e.threshold,signers:e.signers.map((e=>{const r=i.indexOf(e.address);if(-1!==r){return n({},t.signers[r],{weight:e.weight})}return{weight:e.weight,address:e.address}}))}},buildStubSignature:id}),Bf=Object.freeze({__proto__:null,WebRPCVersion:"v1",WebRPCSchemaVersion:"v0.1.0",WebRPCSchemaHash:"8d4d548d0af400f36ef39a21c29927fe65f9396c",GuarddService:class{constructor(t,e){this.hostname=void 0,this.fetch=void 0,this.path="/rpc/GuarddService/",this.sign=(t,e)=>this.fetch(this.url("Sign"),Xd(t,e)).then((t=>Yd(t).then((t=>({sig:t.sig}))))),this.hostname=t,this.fetch=e}url(t){return this.hostname+this.path+t}}}),Lf=Object.freeze({__proto__:null,WebRPCVersion:"v1",WebRPCSchemaVersion:"v0.4.0",WebRPCSchemaHash:"6071879702f8258e8912ca95cf2d9c1459ca991d",get ContractType(){return sd},get EventLogType(){return od},get EventLogDataType(){return ad},get TxnTransferType(){return ld},get SortOrder(){return hd},Indexer:cd,get SequenceIndexerServices(){return gd},SequenceIndexerClient:md}),Uf=Object.freeze({__proto__:null,WebRPCVersion:"v1",WebRPCSchemaVersion:"v0.4.0",WebRPCSchemaHash:"3f6b0f4aa1a7b58488e9399c277fc17995d74f5a",get ContractType(){return yd},get SwapType(){return wd},get SortOrder(){return vd},Metadata:bd,SequenceMetadataClient:xd}),Df=Object.freeze({__proto__:null,Multicall:qu,providers:Hu}),Ff=Object.freeze({__proto__:null,get ChainId(){return yu},indexerURL:wu,relayerURL:vu,nodesURL:bu,networks:Eu,mainnetNetworks:_u,testnetNetworks:Au,sequenceContext:Su,JsonRpcVersion:xu,JsonRpcRouter:ku,createJsonRpcMiddlewareStack:Cu,JsonRpcSender:Iu,JsonRpcExternalProvider:class{constructor(t){this.provider=t,this.sendAsync=(t,e)=>{this.provider.send(t.method,t.params).then((r=>{e(void 0,{jsonrpc:"2.0",id:t.id,result:r})})).catch((t=>{e(t,void 0)}))},this.send=this.sendAsync}},AllowProvider:class{constructor(t){this.sendAsyncMiddleware=void 0,this.isAllowedFunc=void 0,this.isAllowedFunc=t||(t=>!0),this.sendAsyncMiddleware=Mu(this.isAllowedFunc)}setIsAllowedFunc(t){this.isAllowedFunc=t,this.sendAsyncMiddleware=Mu(this.isAllowedFunc)}},allowProviderMiddleware:Mu,CachedProvider:Ou,EagerProvider:Ru,exceptionProviderMiddleware:Bu,loggingProviderMiddleware:Lu,networkProviderMiddleware:Uu,PublicProvider:class{constructor(t){this.privateJsonRpcMethods=["net_version","eth_chainId","eth_accounts",...Du],this.provider=void 0,this.rpcUrl=void 0,this.sendAsyncMiddleware=t=>(e,r)=>{!this.provider||this.privateJsonRpcMethods.includes(e.method)?(Cc.debug("[public-provider] sending request to signer window",e.method),t(e,r)):this.provider.send(e.method,e.params).then((t=>{r(void 0,{jsonrpc:"2.0",id:e.id,result:t})})).catch((t=>r(t)))},t&&this.setRpcUrl(t)}getRpcUrl(){return this.rpcUrl}setRpcUrl(t){t&&""!==t?(this.rpcUrl=t,this.provider=new Xl(t)):(this.rpcUrl=void 0,this.provider=void 0)}},SigningProvider:Fu,isJsonRpcProvider:Pu,isJsonRpcHandler:Tu,isNetworkConfig:function(t){return t&&void 0!==t.chainId&&void 0!==t.name&&void 0!==t.rpcUrl&&void 0!==t.relayer},getChainId:au,maybeChainId:lu,getAuthNetwork:hu,isValidNetworkConfig:cu,ensureValidNetworks:uu,ensureUniqueNetworks:(t,e=!0)=>{const r=t.map((t=>t.chainId)).sort(),n=r.filter(((t,e)=>r.indexOf(t)!==e));if(n.length>0){if(e)throw new Error(`invalid network config: duplicate chainIds ${n}`);return!1}return!0},updateNetworkConfig:du,validateAndSortNetworks:fu,findNetworkConfig:pu,checkNetworkConfig:(t,e)=>!!t&&(t.name===e||t.chainId===e),networksIndex:t=>{const e={};for(let r=0;r<t.length;r++)e[t[r].name]=t[r];return e},sortNetworks:gu,stringTemplate:mu}),jf=d((function(t,e){!function(e){var r=Object.hasOwnProperty,n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i="object"==typeof process&&"function"==typeof process.nextTick,s="function"==typeof Symbol,o="object"==typeof Reflect,a="function"==typeof setImmediate?setImmediate:setTimeout,l=s?o&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(t){var e=Object.getOwnPropertyNames(t);return e.push.apply(e,Object.getOwnPropertySymbols(t)),e}:Object.keys;function h(){this._events={},this._conf&&c.call(this,this._conf)}function c(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners!==e&&(this._maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this._newListener=t.newListener),t.removeListener&&(this._removeListener=t.removeListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),t.ignoreErrors&&(this.ignoreErrors=t.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function u(t,e){var r="(node) warning: possible EventEmitter memory leak detected. "+t+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(r+=" Event name: "+e+"."),"undefined"!=typeof process&&process.emitWarning){var n=new Error(r);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=t,process.emitWarning(n)}else console.error(r),console.trace&&console.trace()}var d=function(t,e,r){var n=arguments.length;switch(n){case 0:return[];case 1:return[t];case 2:return[t,e];case 3:return[t,e,r];default:for(var i=new Array(n);n--;)i[n]=arguments[n];return i}};function f(t,r){for(var n={},i=t.length,s=r?value.length:0,o=0;o<i;o++)n[t[o]]=o<s?r[o]:e;return n}function p(t,e,r){var n,i;if(this._emitter=t,this._target=e,this._listeners={},this._listenersCount=0,(r.on||r.off)&&(n=r.on,i=r.off),e.addEventListener?(n=e.addEventListener,i=e.removeEventListener):e.addListener?(n=e.addListener,i=e.removeListener):e.on&&(n=e.on,i=e.off),!n&&!i)throw Error("target does not implement any known event API");if("function"!=typeof n)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=n,this._off=i;var s=t._observers;s?s.push(this):t._observers=[this]}function g(t,n,i,s){var o=Object.assign({},n);if(!t)return o;if("object"!=typeof t)throw TypeError("options must be an object");var a,l,h,c=Object.keys(t),u=c.length;function d(t){throw Error('Invalid "'+a+'" option value'+(t?". Reason: "+t:""))}for(var f=0;f<u;f++){if(a=c[f],!s&&!r.call(n,a))throw Error('Unknown "'+a+'" option');(l=t[a])!==e&&(h=i[a],o[a]=h?h(l,d):l)}return o}function m(t,e){return"function"==typeof t&&t.hasOwnProperty("prototype")||e("value must be a constructor"),t}function y(t){var e="value must be type of "+t.join("|"),r=t.length,n=t[0],i=t[1];return 1===r?function(t,r){if(typeof t===n)return t;r(e)}:2===r?function(t,r){var s=typeof t;if(s===n||s===i)return t;r(e)}:function(n,i){for(var s=typeof n,o=r;o-- >0;)if(s===t[o])return n;i(e)}}Object.assign(p.prototype,{subscribe:function(t,e,r){var n=this,i=this._target,s=this._emitter,o=this._listeners,a=function(){var n=d.apply(null,arguments),o={data:n,name:e,original:t};if(r){var a=r.call(i,o);!1!==a&&s.emit.apply(s,[o.name].concat(n))}else s.emit.apply(s,[e].concat(n))};if(o[t])throw Error("Event '"+t+"' is already listening");this._listenersCount++,s._newListener&&s._removeListener&&!n._onNewListener?(this._onNewListener=function(r){r===e&&null===o[t]&&(o[t]=a,n._on.call(i,t,a))},s.on("newListener",this._onNewListener),this._onRemoveListener=function(r){r===e&&!s.hasListeners(r)&&o[t]&&(o[t]=null,n._off.call(i,t,a))},o[t]=null,s.on("removeListener",this._onRemoveListener)):(o[t]=a,n._on.call(i,t,a))},unsubscribe:function(t){var e,r,n,i=this,s=this._listeners,o=this._emitter,a=this._off,h=this._target;if(t&&"string"!=typeof t)throw TypeError("event must be a string");function c(){i._onNewListener&&(o.off("newListener",i._onNewListener),o.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var t=E.call(o,i);o._observers.splice(t,1)}if(t){if(!(e=s[t]))return;a.call(h,t,e),delete s[t],--this._listenersCount||c()}else{for(n=(r=l(s)).length;n-- >0;)t=r[n],a.call(h,t,s[t]);this._listeners={},this._listenersCount=0,c()}}});var w=y(["function"]),v=y(["object","function"]);function b(t,e,r){var n,i,s,o=0,a=new t((function(l,h,c){function u(){i&&(i=null),o&&(clearTimeout(o),o=0)}r=g(r,{timeout:0,overload:!1},{timeout:function(t,e){return("number"!=typeof(t*=1)||t<0||!Number.isFinite(t))&&e("timeout must be a positive number"),t}}),n=!r.overload&&"function"==typeof t.prototype.cancel&&"function"==typeof c;var d=function(t){u(),l(t)},f=function(t){u(),h(t)};n?e(d,f,c):(i=[function(t){f(t||Error("canceled"))}],e(d,f,(function(t){if(s)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof t)throw TypeError("onCancel callback must be a function");i.push(t)})),s=!0),r.timeout>0&&(o=setTimeout((function(){var t=Error("timeout");t.code="ETIMEDOUT",o=0,a.cancel(t),h(t)}),r.timeout))}));return n||(a.cancel=function(t){if(i){for(var e=i.length,r=1;r<e;r++)i[r](t);i[0](t),i=null}}),a}function E(t){var e=this._observers;if(!e)return-1;for(var r=e.length,n=0;n<r;n++)if(e[n]._target===t)return n;return-1}function _(t,e,r,n,i){if(!r)return null;if(0===n){var s=typeof e;if("string"===s){var o,a,h=0,c=0,u=this.delimiter,d=u.length;if(-1!==(a=e.indexOf(u))){o=new Array(5);do{o[h++]=e.slice(c,a),c=a+d}while(-1!==(a=e.indexOf(u,c)));o[h++]=e.slice(c),e=o,i=h}else e=[e],i=1}else"object"===s?i=e.length:(e=[e],i=1)}var f,p,g,m,y,w,v,b=null,E=e[n],A=e[n+1];if(n===i)r._listeners&&("function"==typeof r._listeners?(t&&t.push(r._listeners),b=[r]):(t&&t.push.apply(t,r._listeners),b=[r]));else{if("*"===E){for(a=(w=l(r)).length;a-- >0;)"_listeners"!==(f=w[a])&&(v=_(t,e,r[f],n+1,i))&&(b?b.push.apply(b,v):b=v);return b}if("**"===E){for((y=n+1===i||n+2===i&&"*"===A)&&r._listeners&&(b=_(t,e,r,i,i)),a=(w=l(r)).length;a-- >0;)"_listeners"!==(f=w[a])&&("*"===f||"**"===f?(r[f]._listeners&&!y&&(v=_(t,e,r[f],i,i))&&(b?b.push.apply(b,v):b=v),v=_(t,e,r[f],n,i)):v=_(t,e,r[f],f===A?n+2:n,i),v&&(b?b.push.apply(b,v):b=v));return b}r[E]&&(b=_(t,e,r[E],n+1,i))}if((p=r["*"])&&_(t,e,p,n+1,i),g=r["**"])if(n<i)for(g._listeners&&_(t,e,g,i,i),a=(w=l(g)).length;a-- >0;)"_listeners"!==(f=w[a])&&(f===A?_(t,e,g[f],n+2,i):f===E?_(t,e,g[f],n+1,i):((m={})[f]=g[f],_(t,e,{"**":m},n+1,i)));else g._listeners?_(t,e,g,i,i):g["*"]&&g["*"]._listeners&&_(t,e,g["*"],i,i);return b}function A(t,e,r){var n,i,s=0,o=0,a=this.delimiter,l=a.length;if("string"==typeof t)if(-1!==(n=t.indexOf(a))){i=new Array(5);do{i[s++]=t.slice(o,n),o=n+l}while(-1!==(n=t.indexOf(a,o)));i[s++]=t.slice(o)}else i=[t],s=1;else i=t,s=t.length;if(s>1)for(n=0;n+1<s;n++)if("**"===i[n]&&"**"===i[n+1])return;var h,c=this.listenerTree;for(n=0;n<s;n++)if(c=c[h=i[n]]||(c[h]={}),n===s-1)return c._listeners?("function"==typeof c._listeners&&(c._listeners=[c._listeners]),r?c._listeners.unshift(e):c._listeners.push(e),!c._listeners.warned&&this._maxListeners>0&&c._listeners.length>this._maxListeners&&(c._listeners.warned=!0,u.call(this,c._listeners.length,h))):c._listeners=e,!0;return!0}function S(t,e,r,n){for(var i,s,o,a,h=l(t),c=h.length,u=t._listeners;c-- >0;)i=t[s=h[c]],o="_listeners"===s?r:r?r.concat(s):[s],a=n||"symbol"==typeof s,u&&e.push(a?o:o.join(this.delimiter)),"object"==typeof i&&S.call(this,i,e,o,a);return e}function x(t){for(var e,r,n,i=l(t),s=i.length;s-- >0;)(e=t[r=i[s]])&&(n=!0,"_listeners"===r||x(e)||delete t[r]);return n}function k(t,e,r){this.emitter=t,this.event=e,this.listener=r}function C(t,r,n){if(!0===n)o=!0;else if(!1===n)s=!0;else{if(!n||"object"!=typeof n)throw TypeError("options should be an object or true");var s=n.async,o=n.promisify,l=n.nextTick,h=n.objectify}if(s||l||o){var c=r,u=r._origin||r;if(l&&!i)throw Error("process.nextTick is not supported");o===e&&(o="AsyncFunction"===r.constructor.name),r=function(){var t=arguments,e=this,r=this.event;return o?l?Promise.resolve():new Promise((function(t){a(t)})).then((function(){return e.event=r,c.apply(e,t)})):(l?process.nextTick:a)((function(){e.event=r,c.apply(e,t)}))},r._async=!0,r._origin=u}return[r,h?new k(this,t,r):this]}function P(t){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,c.call(this,t)}k.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},P.EventEmitter2=P,P.prototype.listenTo=function(t,r,i){if("object"!=typeof t)throw TypeError("target musts be an object");var s=this;function o(e){if("object"!=typeof e)throw TypeError("events must be an object");var r,n=i.reducers,o=E.call(s,t);r=-1===o?new p(s,t,i):s._observers[o];for(var a,h=l(e),c=h.length,u="function"==typeof n,d=0;d<c;d++)a=h[d],r.subscribe(a,e[a]||a,u?n:n&&n[a])}return i=g(i,{on:e,off:e,reducers:e},{on:w,off:w,reducers:v}),n(r)?o(f(r)):o("string"==typeof r?f(r.split(/\s+/)):r),this},P.prototype.stopListeningTo=function(t,e){var r=this._observers;if(!r)return!1;var n,i=r.length,s=!1;if(t&&"object"!=typeof t)throw TypeError("target should be an object");for(;i-- >0;)n=r[i],t&&n._target!==t||(n.unsubscribe(e),s=!0);return s},P.prototype.delimiter=".",P.prototype.setMaxListeners=function(t){t!==e&&(this._maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},P.prototype.getMaxListeners=function(){return this._maxListeners},P.prototype.event="",P.prototype.once=function(t,e,r){return this._once(t,e,!1,r)},P.prototype.prependOnceListener=function(t,e,r){return this._once(t,e,!0,r)},P.prototype._once=function(t,e,r,n){return this._many(t,1,e,r,n)},P.prototype.many=function(t,e,r,n){return this._many(t,e,r,!1,n)},P.prototype.prependMany=function(t,e,r,n){return this._many(t,e,r,!0,n)},P.prototype._many=function(t,e,r,n,i){var s=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");function o(){return 0==--e&&s.off(t,o),r.apply(this,arguments)}return o._origin=r,this._on(t,o,n,i)},P.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var t,e,r,n,i,o,a=arguments[0],l=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(l&&(t=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(r=a.length,s)for(n=0;n<r;n++)if("symbol"==typeof a[n]){o=!0;break}o||(a=a.join(this.delimiter))}var c,u=arguments.length;if(this._all&&this._all.length)for(n=0,r=(c=this._all.slice()).length;n<r;n++)switch(this.event=a,u){case 1:c[n].call(this,a);break;case 2:c[n].call(this,a,arguments[1]);break;case 3:c[n].call(this,a,arguments[1],arguments[2]);break;default:c[n].apply(this,arguments)}if(l)c=[],_.call(this,c,t,this.listenerTree,0,r);else{if("function"==typeof(c=this._events[a])){switch(this.event=a,u){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=new Array(u-1),i=1;i<u;i++)e[i-1]=arguments[i];c.apply(this,e)}return!0}c&&(c=c.slice())}if(c&&c.length){if(u>3)for(e=new Array(u-1),i=1;i<u;i++)e[i-1]=arguments[i];for(n=0,r=c.length;n<r;n++)switch(this.event=a,u){case 1:c[n].call(this);break;case 2:c[n].call(this,arguments[1]);break;case 3:c[n].call(this,arguments[1],arguments[2]);break;default:c[n].apply(this,e)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},P.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var t,e,r,n,i,o,a=arguments[0],l=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(l&&(t=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(n=a.length,s)for(i=0;i<n;i++)if("symbol"==typeof a[i]){e=!0;break}e||(a=a.join(this.delimiter))}var c,u=[],d=arguments.length;if(this._all)for(i=0,n=this._all.length;i<n;i++)switch(this.event=a,d){case 1:u.push(this._all[i].call(this,a));break;case 2:u.push(this._all[i].call(this,a,arguments[1]));break;case 3:u.push(this._all[i].call(this,a,arguments[1],arguments[2]));break;default:u.push(this._all[i].apply(this,arguments))}if(l?(c=[],_.call(this,c,t,this.listenerTree,0)):c=this._events[a],"function"==typeof c)switch(this.event=a,d){case 1:u.push(c.call(this));break;case 2:u.push(c.call(this,arguments[1]));break;case 3:u.push(c.call(this,arguments[1],arguments[2]));break;default:for(r=new Array(d-1),o=1;o<d;o++)r[o-1]=arguments[o];u.push(c.apply(this,r))}else if(c&&c.length){if(c=c.slice(),d>3)for(r=new Array(d-1),o=1;o<d;o++)r[o-1]=arguments[o];for(i=0,n=c.length;i<n;i++)switch(this.event=a,d){case 1:u.push(c[i].call(this));break;case 2:u.push(c[i].call(this,arguments[1]));break;case 3:u.push(c[i].call(this,arguments[1],arguments[2]));break;default:u.push(c[i].apply(this,r))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(u)},P.prototype.on=function(t,e,r){return this._on(t,e,!1,r)},P.prototype.prependListener=function(t,e,r){return this._on(t,e,!0,r)},P.prototype.onAny=function(t){return this._onAny(t,!1)},P.prototype.prependAny=function(t){return this._onAny(t,!0)},P.prototype.addListener=P.prototype.on,P.prototype._onAny=function(t,e){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),e?this._all.unshift(t):this._all.push(t),this},P.prototype._on=function(t,r,n,i){if("function"==typeof t)return this._onAny(t,r),this;if("function"!=typeof r)throw new Error("on only accepts instances of Function");this._events||h.call(this);var s,o=this;return i!==e&&(r=(s=C.call(this,t,r,i))[0],o=s[1]),this._newListener&&this.emit("newListener",t,r),this.wildcard?(A.call(this,t,r,n),o):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),n?this._events[t].unshift(r):this._events[t].push(r),!this._events[t].warned&&this._maxListeners>0&&this._events[t].length>this._maxListeners&&(this._events[t].warned=!0,u.call(this,this._events[t].length,t))):this._events[t]=r,o)},P.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var s="string"==typeof t?t.split(this.delimiter):t.slice();if(!(i=_.call(this,null,s,this.listenerTree,0)))return this}else{if(!this._events[t])return this;r=this._events[t],i.push({_listeners:r})}for(var o=0;o<i.length;o++){var a=i[o];if(r=a._listeners,n(r)){for(var l=-1,h=0,c=r.length;h<c;h++)if(r[h]===e||r[h].listener&&r[h].listener===e||r[h]._origin&&r[h]._origin===e){l=h;break}if(l<0)continue;return this.wildcard?a._listeners.splice(l,1):this._events[t].splice(l,1),0===r.length&&(this.wildcard?delete a._listeners:delete this._events[t]),this._removeListener&&this.emit("removeListener",t,e),this}(r===e||r.listener&&r.listener===e||r._origin&&r._origin===e)&&(this.wildcard?delete a._listeners:delete this._events[t],this._removeListener&&this.emit("removeListener",t,e))}return this.listenerTree&&x(this.listenerTree),this},P.prototype.offAny=function(t){var e,r=0,n=0;if(t&&this._all&&this._all.length>0){for(r=0,n=(e=this._all).length;r<n;r++)if(t===e[r])return e.splice(r,1),this._removeListener&&this.emit("removeListenerAny",t),this}else{if(e=this._all,this._removeListener)for(r=0,n=e.length;r<n;r++)this.emit("removeListenerAny",e[r]);this._all=[]}return this},P.prototype.removeListener=P.prototype.off,P.prototype.removeAllListeners=function(t){if(t===e)return!this._events||h.call(this),this;if(this.wildcard){var r,n=_.call(this,null,t,this.listenerTree,0);if(!n)return this;for(r=0;r<n.length;r++)n[r]._listeners=null;this.listenerTree&&x(this.listenerTree)}else this._events&&(this._events[t]=null);return this},P.prototype.listeners=function(t){var r,n,i,s,o,a=this._events;if(t===e){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!a)return[];for(s=(r=l(a)).length,i=[];s-- >0;)"function"==typeof(n=a[r[s]])?i.push(n):i.push.apply(i,n);return i}if(this.wildcard){if(!(o=this.listenerTree))return[];var h=[],c="string"==typeof t?t.split(this.delimiter):t.slice();return _.call(this,h,c,o,0),h}return a&&(n=a[t])?"function"==typeof n?[n]:n:[]},P.prototype.eventNames=function(t){var e=this._events;return this.wildcard?S.call(this,this.listenerTree,[],null,t):e?l(e):[]},P.prototype.listenerCount=function(t){return this.listeners(t).length},P.prototype.hasListeners=function(t){if(this.wildcard){var r=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return _.call(this,r,n,this.listenerTree,0),r.length>0}var i=this._events,s=this._all;return!!(s&&s.length||i&&(t===e?l(i).length:i[t]))},P.prototype.listenersAny=function(){return this._all?this._all:[]},P.prototype.waitFor=function(t,r){var n=this,i=typeof r;return"number"===i?r={timeout:r}:"function"===i&&(r={filter:r}),b((r=g(r,{timeout:0,filter:e,handleError:!1,Promise:Promise,overload:!1},{filter:w,Promise:m})).Promise,(function(e,i,s){function o(){var s=r.filter;if(!s||s.apply(n,arguments))if(n.off(t,o),r.handleError){var a=arguments[0];a?i(a):e(d.apply(null,arguments).slice(1))}else e(d.apply(null,arguments))}s((function(){n.off(t,o)})),n._on(t,o,!1)}),{timeout:r.timeout,overload:r.overload})};var T=P.prototype;Object.defineProperties(P,{defaultMaxListeners:{get:function(){return T._maxListeners},set:function(t){if("number"!=typeof t||t<0||Number.isNaN(t))throw TypeError("n must be a non-negative number");T._maxListeners=t},enumerable:!0},once:{value:function(t,e,r){return b((r=g(r,{Promise:Promise,timeout:0,overload:!1},{Promise:m})).Promise,(function(r,n,i){var s;if("function"==typeof t.addEventListener)return s=function(){r(d.apply(null,arguments))},i((function(){t.removeEventListener(e,s)})),void t.addEventListener(e,s,{once:!0});var o,a=function(){o&&t.removeListener("error",o),r(d.apply(null,arguments))};"error"!==e&&(o=function(r){t.removeListener(e,a),n(r)},t.once("error",o)),i((function(){o&&t.removeListener("error",o),t.removeListener(e,a)})),t.once(e,a)}),{timeout:r.timeout,overload:r.overload})},writable:!0,configurable:!0}}),Object.defineProperties(T,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=P}()}));class qf extends URLSearchParams{static new(t){return new URLSearchParams(t)}}let Wf,Gf,Hf;!function(t){t.OPEN="open",t.CLOSE="close",t.MESSAGE="message",t.CONNECT="connect",t.DISCONNECT="disconnect",t.ACCOUNTS_CHANGED="accountsChanged",t.CHAIN_CHANGED="chainChanged",t.NETWORKS="networks",t.WALLET_CONTEXT="walletContext",t.INIT="init",t.DEBUG="_debug"}(Wf||(Wf={})),function(t){t[t.CLOSED=0]="CLOSED",t[t.OPENING=1]="OPENING",t[t.OPENED=2]="OPENED"}(Gf||(Gf={})),function(t){t[t.NIL=0]="NIL",t[t.SENT_NONCE=1]="SENT_NONCE",t[t.OK=2]="OK"}(Hf||(Hf={}));class zf extends Error{constructor(t){super(t),this.name="ProviderError"}}const Vf=new zf("Wallet is not signed in. Connect a wallet and try again."),Kf=3e4;let $f=0;const Jf=()=>++$f;class Zf{constructor(){var t=this;this.pendingMessageRequests=[],this.responseCallbacks=new Map,this.state=void 0,this.confirmationOnly=!1,this.events=new jf.EventEmitter2,this.openPayload=void 0,this.connectPayload=void 0,this.accountsChangedPayload=void 0,this.networksPayload=void 0,this.walletContextPayload=void 0,this._sessionId=void 0,this._init=void 0,this._registered=void 0,this.sendAsync=async function(e,r,n){t.state===Gf.CLOSED&&(t.confirmationOnly=!0),t.openWallet(void 0,{type:"jsonRpcRequest",method:e.method},n);try{t.isOpened()||await t.waitUntilOpened();r(void 0,(await t.sendMessageRequest({idx:Jf(),type:Wf.MESSAGE,data:e,chainId:n})).data)}catch(t){r(t)}},this.sendMessageRequest=async function(e){return new Promise(((r,n)=>{(!e.idx||e.idx<=0)&&"init"!==e.type&&n(new Error("message idx not set"));const i=(t,e)=>{if(t)n(t);else{if(!e)throw new Error("no valid response to return");r(e)}},s=e.idx;t.responseCallbacks.get(s)?n(new Error("duplicate message idx, should never happen")):t.responseCallbacks.set(s,i),t.isOpened()?t.sendMessage(e):(Cc.debug("pushing to pending requests",e),t.pendingMessageRequests.push(e))}))},this.waitUntilOpened=async function(e=3e4){let r=!1;return Promise.race([new Promise(((n,i)=>{const s=setTimeout((()=>{clearTimeout(s),r||(t.state=Gf.CLOSED,t.events.emit("close",{code:1005,message:"opening wallet timed out"})),i(new Error("opening wallet timed out"))}),e)})),new Promise((e=>{var n;if(t.isOpened())return r=!0,void e(null==(n=t.openPayload)?void 0:n.session);t.events.once("open",(n=>{t.openPayload=n,r=!0,e(n.session)}))}))])},this.waitUntilConnected=async function(){await t.waitUntilOpened();const e=new Promise((e=>{t.connectPayload?e(t.connectPayload):t.events.once("connect",(r=>{t.connectPayload=r,e(r)}))})),r=new Promise(((e,r)=>{t.events.once("close",(t=>{r(t?new Error(`wallet closed due to ${JSON.stringify(t)}`):new Error("user closed the wallet"))}))}));return Promise.race([e,r])},this.state=Gf.CLOSED,this._registered=!1,this._init=Hf.NIL}get registered(){return this._registered}register(){throw new Error("abstract method")}unregister(){throw new Error("abstract method")}openWallet(t,e,r){throw new Error("abstract method")}closeWallet(){throw new Error("abstract method")}isOpened(){return this.registered&&this.state===Gf.OPENED}isConnected(){var t;const e=null==(t=this.openPayload)?void 0:t.session;return this.registered&&void 0!==e&&!!e.accountAddress&&42===e.accountAddress.length&&!!e.networks&&e.networks.length>0}handleMessage(t){var e=this;if(t.type===Wf.INIT){Cc.debug("MessageProvider, received INIT message",t);const{nonce:e}=t.data;if(!e||0==e.length)return void Cc.error("invalid init nonce");this._init=Hf.OK,this.sendMessage({idx:-1,type:Wf.INIT,data:{sessionId:this._sessionId,nonce:e}})}if(this._init!==Hf.OK)return;Cc.debug("RECEIVED MESSAGE FROM WALLET",t.idx,t);const r=t.idx,n=this.responseCallbacks.get(r);if(r&&this.responseCallbacks.delete(r),t.type!==Wf.OPEN||this.isOpened()){if(t.type===Wf.MESSAGE){if(this.confirmationOnly&&setTimeout((()=>{0===this.responseCallbacks.size&&this.closeWallet()}),500),!n)throw new Error("impossible state");if(n)return this.events.emit("message",t),void n(t.data.error,t)}if(t.type===Wf.ACCOUNTS_CHANGED)return this.accountsChangedPayload={accounts:[]},void(t.data&&t.data.length>0?(this.accountsChangedPayload={accounts:[Te(t.data[0])],origin:t.origin},this.events.emit("accountsChanged",this.accountsChangedPayload.accounts,this.accountsChangedPayload.origin)):this.events.emit("accountsChanged",[],t.origin));if(t.type!==Wf.CHAIN_CHANGED){if(t.type===Wf.NETWORKS)return this.networksPayload=t.data,void this.events.emit("networks",this.networksPayload);if(t.type===Wf.WALLET_CONTEXT)return this.walletContextPayload=t.data,void this.events.emit("walletContext",this.walletContextPayload);t.type===Wf.CLOSE&&this.state!==Gf.CLOSED&&this.close(t.data),t.type===Wf.CONNECT&&(this.connectPayload=t.data,this.events.emit("connect",this.connectPayload)),t.type===Wf.DISCONNECT&&this.isConnected()&&(this.events.emit("disconnect",t.data),this.close())}else this.events.emit("chainChanged",t.data)}else{var i,s;if(this._sessionId&&this._sessionId!==(null==(i=t.data)?void 0:i.sessionId))return void Cc.debug("open event received from wallet, but does not match sessionId",this._sessionId);if(null!=(s=t.data)&&s.error){var o;const e=new Error(`opening wallet failed: received ${null==(o=t.data)?void 0:o.error}`);throw Cc.error(e),this.close(),e}if(this.state=Gf.OPENED,this.openPayload=t.data,this.events.emit("open",this.openPayload),0!==this.pendingMessageRequests.length){this.pendingMessageRequests.splice(0,this.pendingMessageRequests.length).forEach((async function(t){e.sendMessage(t)}))}}}sendMessage(t){throw new Error("abstract method")}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}emit(t,...e){return this.events.emit(t,...e)}close(t){this.state!==Gf.CLOSED&&(this.state=Gf.CLOSED,this.confirmationOnly=!1,this._sessionId=void 0,Cc.info("closing wallet and flushing!"),this.pendingMessageRequests.length=0,this.responseCallbacks.forEach((t=>{t(n({},new Error("wallet closed"),{code:4001}))})),this.responseCallbacks.clear(),this.connectPayload=void 0,this.openPayload=void 0,this.accountsChangedPayload=void 0,this.networksPayload=void 0,this.walletContextPayload=void 0,this.events.emit("close",t))}}class Xf{constructor(t,e,r,i=[]){var s=this;this.signer=void 0,this.signerReadyCallbacks=[],this.prompter=void 0,this.mainnetNetworks=void 0,this.testnetNetworks=void 0,this._openIntent=void 0,this._connectOptions=void 0,this._defaultNetworkId=void 0,this._chainId=void 0,this.events=new jf.EventEmitter2,this.promptConnect=async function(t){if(!t&&!s._connectOptions)throw new Error("prompter connect options are empty");if(!s.prompter)return s.connect(t);const e=await s.prompter.promptConnect(t||s._connectOptions).catch((t=>({connected:!1}))),r=e;return r.connected&&!r.session&&(r.session=await s.walletSession()),e},this.sendAsync=async function(t,e,r){const i={jsonrpc:"2.0",id:t.id,result:null};await s.getSigner();try{if(!(s.signer&&null!==s.signer||Yf.includes(t.method)))throw Vf;const e=s.signer;if(!e)throw new Error("WalletRequestHandler: wallet signer is not configured");const n=await e.getProvider(r);if(!n)throw new Error(`WalletRequestHandler: wallet provider is not configured for chainId ${r}`);switch(t.method){case"net_version":{const t=await n.send("net_version",[]);i.result=t;break}case"eth_chainId":{const t=await n.send("eth_chainId",[]);i.result=t;break}case"eth_accounts":{const t=await e.getAddress();i.result=[t];break}case"eth_getBalance":{const[e,r]=t.params,s=await n.getBalance(e,r);i.result=s.toHexString();break}case"personal_sign":case"eth_sign":{let n;if("personal_sign"===t.method){const[e,r]=t.params;n=e}else{const[e,r]=t.params;n=r}let o="";const a=op(n);if(null===s.prompter)o=await e.signMessage(a,r);else{await s.handleConfirmWalletDeployPrompt(s.prompter,e,r)&&(o=await s.prompter.promptSignMessage({chainId:r,message:a},s.connectOptions))}if(!(o&&o.length>0))throw new Error("declined by user");i.result=o;break}case"eth_signTypedData":case"eth_signTypedData_v4":{const[n,o]=t.params;let a;if("string"==typeof o)try{a=JSON.parse(o)}catch(t){}else a=o;if(!(a&&a.domain&&a.types&&a.message))throw new Error("invalid typedData object");let l="";if(null===s.prompter)l=await e.signTypedData(a.domain,a.types,a.message,r);else{await s.handleConfirmWalletDeployPrompt(s.prompter,e,r)&&(l=await s.prompter.promptSignMessage({chainId:r,typedData:a},s.connectOptions))}if(!(l&&l.length>0))throw new Error("declined by user");i.result=l;break}case"eth_sendTransaction":{const[n]=t.params;"gas"in n&&void 0===n.gasLimit&&(n.gasLimit=n.gas,delete n.gas);let o="";if(null===s.prompter){o=(await e.sendTransaction(n,r)).hash}else o=await s.prompter.promptSendTransaction(n,r,s.connectOptions);if(!o)throw new Error("declined by user");i.result=o;break}case"eth_signTransaction":{const[n]=t.params;if(Te(n.from)!==await e.getAddress())throw new Error("sender address does not match wallet");null===s.prompter?i.result=await e.signTransactions(n,r):i.result=await s.prompter.promptSignTransaction(n,r,s.connectOptions);break}case"eth_sendRawTransaction":if(Vd(t.params[0])){const r=st.from(t.params[0].chainId).toNumber(),n=await(await e.getRelayer(r)).relay(t.params[0]);i.result=(await n).hash}else{const e=await n.sendTransaction(t.params[0]);i.result=e.hash}break;case"eth_getTransactionCount":{const r=Te(t.params[0]),s=t.params[1];if(r===Te(await e.getAddress())){const t=await e.getTransactionCount(s);i.result=st.from(t).toHexString()}else{const t=await n.getTransactionCount(r,s);i.result=st.from(t).toHexString()}break}case"eth_blockNumber":i.result=await n.getBlockNumber();break;case"eth_getBlockByNumber":case"eth_getBlockByHash":i.result=await n.getBlock(t.params[0]);break;case"eth_getTransactionByHash":i.result=await n.getTransaction(t.params[0]);break;case"eth_call":{const[e,r]=t.params;i.result=await n.call(e,r);break}case"eth_getCode":{const[e,r]=t.params;i.result=await n.getCode(e,r);break}case"eth_estimateGas":{const[e]=t.params;i.result=await n.estimateGas(e);break}case"eth_gasPrice":{const t=await n.getGasPrice();i.result=t.toHexString();break}case"wallet_switchEthereumChain":{const[e]=t.params;if(!e.chainId||0===e.chainId.length)throw new Error("invalid chainId");const r=st.from(e.chainId);if(!await s.setDefaultNetwork(r.toString(),!0))throw new Error(`unable to set chainId ${r}`);i.result=null;break}case"sequence_getWalletContext":i.result=await e.getWalletContext();break;case"sequence_getWalletConfig":{const[r]=t.params;i.result=await e.getWalletConfig(r);break}case"sequence_getWalletState":{const[r]=t.params;i.result=await e.getWalletState(r);break}case"sequence_getNetworks":i.result=await s.getNetworks(!0);break;case"sequence_updateConfig":throw new Error("sequence_updateConfig method is not allowed from a dapp");case"sequence_publishConfig":throw new Error("sequence_publishConfig method is not allowed from a dapp");case"sequence_gasRefundOptions":case"sequence_getNonce":case"sequence_relay":break;case"sequence_setDefaultNetwork":{const[e]=t.params;if(!e)throw new Error("invalid request, method argument defaultNetworkId cannot be empty");if(!await s.setDefaultNetwork(e))throw new Error(`unable to set default network ${e}`);i.result=await s.getNetworks(!0);break}default:{const e=await n.send(t.method,t.params);i.result=e}}}catch(t){Cc.error(t),i.result=null,i.error=n({},new Error(t),{code:4001})}e(void 0,i)},this.isSignedIn=async function(){return await s.signerReady(),!!s.signer},this.getSigner=async function(){if(await s.signerReady(),void 0===s.signer)throw new Error("signerReady failed resolve");return s.signer},this.signer=t,this.prompter=e,this.mainnetNetworks=r,this.testnetNetworks=i}async signIn(t,e={}){this.setSigner(t);const{connect:r,mainnetNetworks:n,testnetNetworks:i,defaultNetworkId:s}=e;if(n&&n.length>0&&(this.mainnetNetworks=n),i&&i.length>0&&(this.testnetNetworks=i),!(this.mainnetNetworks&&0!==this.mainnetNetworks.length||this.testnetNetworks&&0!==this.testnetNetworks.length))throw new Error("signIn failed as network configuration is empty");const o=s||this._defaultNetworkId;if(o&&!await this.setDefaultNetwork(o,!1))throw new Error(`WalletRequestHandler setup unable to set defaultNetworkId ${o}`);if(r){const t=this._connectOptions,e=await this.connect(t);this.notifyConnect(e),t&&!0===t.keepWalletOpened||this.notifyClose()}}signOut(){this.setSigner(null)}signerReset(){this.signer=void 0}signerReady(t=1e4){return new Promise(((e,r)=>{void 0!==this.signer?e():(setTimeout((()=>{void 0===this.signer&&(this.signerReadyCallbacks=[],r("signerReady timed out"))}),t),this.signerReadyCallbacks.push(e))}))}async connect(t){if(!this.signer)return{connected:!1,chainId:"0x0",error:"unable to connect without signed in account"};const e={connected:!0,chainId:G(await this.getChainId())};if(t&&t.authorize){const r={app:t.app,origin:t.origin,expiry:t.expiry};try{e.proof=await Nf(this.signer,r)}catch(e){return Cc.warn(`connect, signAuthorization failed for options: ${JSON.stringify(t)}, due to: ${e.message}`),{connected:!1,chainId:"0x0",error:`signAuthorization failed: ${e.message}`}}}return e.session=await this.walletSession(),e}sendMessageRequest(t){return new Promise((e=>{this.sendAsync(t.data,((r,i)=>{const s=n({},t,{data:i});e(s)}),t.chainId)}))}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}async getAddress(){return this.signer?this.signer.getAddress():""}async getChainId(){return this.signer?(this._chainId||(this._chainId=await this.signer.getChainId()),this._chainId):0}get openIntent(){return this._openIntent}setOpenIntent(t){this._openIntent=t}get connectOptions(){return this._connectOptions}setConnectOptions(t){this._connectOptions=t}get defaultNetworkId(){return this._defaultNetworkId}async setDefaultNetwork(t,e=!0){if(t&&(this._defaultNetworkId=t,this._chainId=void 0,this.signer&&this.signer.setNetworks)){const r=this.signer.setNetworks(this.mainnetNetworks,this.testnetNetworks,t);return r&&e&&await this.notifyNetworks(),r}}async getNetworks(t){if(!this.signer)return Cc.warn("signer not set: getNetworks is returning an empty list"),[];const e=await this.signer.getNetworks();return t?e.map((t=>{const e=n({},t);return e.provider=void 0,e.relayer=void 0,e})):e}async walletSession(){return this.signer?{walletContext:await this.signer.getWalletContext(),accountAddress:await this.signer.getAddress(),networks:await this.getNetworks(!0)}:void 0}notifyConnect(t,e){var r,n;(this.events.emit("connect",t),null!=(r=t.session)&&r.accountAddress)&&this.events.emit("accountsChanged",[null==(n=t.session)?void 0:n.accountAddress],e)}notifyDisconnect(t){this.events.emit("accountsChanged",[],t),this.events.emit("disconnect")}async notifyNetworks(t){const e=t||await this.getNetworks(!0);if(this.events.emit("networks",e),e.length>0){const t=e.find((t=>t.isDefaultChain));t&&this.events.emit("chainChanged",G(t.chainId))}else this.events.emit("chainChanged","0x0")}async notifyWalletContext(){if(!this.signer)return void Cc.warn("signer not set: skipping to notify wallet context");const t=await this.signer.getWalletContext();this.events.emit("walletContext",t)}notifyClose(t){this.events.emit("close",t)}setSigner(t){if(this.signer=t,void 0!==t){for(let t=0;t<this.signerReadyCallbacks.length;t++)this.signerReadyCallbacks[t]();this.signerReadyCallbacks=[]}}async handleConfirmWalletDeployPrompt(t,e,r){if(!r)return!0;if(await fp(e,r))return!0;if(await t.promptConfirmWalletDeploy(r,this.connectOptions)){return!!await fp(e,r)||(Cc.error("WalletRequestHandler: result for promptConfirmWalletDeploy is not correct"),!1)}return!1}}const Yf=["net_version","eth_chainId","eth_getBalance","eth_getTransactionCount","eth_blockNumber","eth_getBlockByNumber","eth_getBlockByHash","eth_getTransactionByHash","eth_getCode","eth_estimateGas","eth_gasPrice","sequence_getWalletContext","sequence_getNetworks","sequence_setDefaultNetwork"];class Qf extends eh{static isSequenceProvider(t){return tp(t)}constructor(t,e){const r=new Iu(t,lu(e));super(t=r,"any"),this._sender=void 0,this._isSequenceProvider=void 0,this._defaultChainId=void 0,this._sender=r,this._isSequenceProvider=!0,this._defaultChainId=lu(e)}sendAsync(t,e,r){this._sender.sendAsync(t,e,r)}send(t,e,r){return this._sender.send(t,e,r)}request(t){return this.send(t.method,t.params||[],t.chainId)}getSigner(){return new ep(this,this._defaultChainId)}async getChainId(){const t=await this.send("eth_chainId",[]),e=st.from(t).toNumber();if(this._defaultChainId&&this._defaultChainId!==e)throw new Error(`provider chainId (${e}) does not match provider-bound chainId ${this._defaultChainId}`);return e}}function tp(t){const e=t;return e&&void 0!==e.send&&!0===e._isSequenceProvider}class ep extends kd{constructor(t,e){super(),this.provider=void 0,this.defaultChainId=void 0,this._address=void 0,this._index=void 0,this._context=void 0,this._networks=void 0,this._providers={},this.provider=t,this.defaultChainId=e}async getAddress(){if(this._address)return this._address;const t=await this.provider.send("eth_accounts",[]);return this._address=t[0],this._index=0,Te(this._address)}signTransaction(t){throw new Error("signTransaction is unsupported, use signTransactions instead")}connect(t){throw new Error("unsupported: cannot alter JSON-RPC Signer connection")}async getProvider(t){if(t){const e=await this.getChainId();if(e!==t)throw new Error(`signer is attempting to access chain ${t}, but is already bound to chain ${e}`)}return this.provider}async getSender(t){return!t||t&&t===this.defaultChainId?this.provider:(this._providers[t]||(this._providers[t]=new Qf(new Iu(this.provider,t),t)),this._providers[t])}getRelayer(t){throw new Error("TODO")}async getWalletContext(){return this._context||(this._context=await this.provider.send("sequence_getWalletContext",[])),this._context}async getWalletConfig(t){return await this.provider.send("sequence_getWalletConfig",[lu(t)],lu(t)||this.defaultChainId)}async getWalletState(t){return await this.provider.send("sequence_getWalletState",[lu(t)],lu(t)||this.defaultChainId)}async getNetworks(){return this._networks||(this._networks=await this.provider.send("sequence_getNetworks",[])),this._networks}async getSigners(){const t=(await this.getNetworks()).find((t=>t.isAuthChain));if(!t)throw new Error("authChainId could not be determined from network list");const e=await this.getWalletConfig(t);if(!e||0===e.length)throw new Error("walletConfig returned zero results for authChainId {authChainId}");return e[0].signers.map((t=>t.address))}async signMessage(t,e,r){const n=await this.getSender(lu(e)||this.defaultChainId),i="string"==typeof t?nr(t):t,s=await this.getAddress();return await n.send("personal_sign",[G(i),s])}async signTypedData(t,e,r,n,i){return await this.provider.send("eth_signTypedData_v4",[await this.getAddress(),Zr.getPayload(t,e,r)],lu(n)||this.defaultChainId)}async sendTransaction(t,e,r){const n=await this.getSender(lu(e)||this.defaultChainId),i=this.sendUncheckedTransaction(t,e).then((t=>sl((()=>n.getTransaction(t).then((e=>{if(null!==e)return n._wrapTransaction(e,t)}))),{onceBlock:this.provider}).catch((e=>{throw e.transactionHash=t,e}))));return i}async sendTransactionBatch(t,e,r){const i=await Qd(t);if(!i||0===i.length)throw new Error("cannot send empty batch");if(i.find((t=>void 0!==t.wait&&null!==t.wait)))throw new Error("transaction request expected for sendTransactionBatch, transaction response found");const s=n({},i[0]);return i.length>1&&(s.auxiliary=i.splice(1)),this.sendTransaction(s,e,r)}signTransactions(t,e,r){return t=Tt(t),this.provider.send("eth_signTransaction",[t],lu(e)||this.defaultChainId)}sendSignedTransactions(t,e){throw new Error("TODO")}async updateConfig(t){const[e,r]=await this.provider.send("sequence_updateConfig",[t],this.defaultChainId);if(null===r)return[e,void 0];return[e,(await this.getSender(this.defaultChainId))._wrapTransaction(r,r.hash)]}async publishConfig(){const t=await this.getSender(this.defaultChainId),e=await t.send("sequence_publishConfig",[]);if(null!==e)return t._wrapTransaction(e,e.hash)}async isDeployed(t){const e=await this.getSender(lu(t)),r=await e.getCode(await this.getAddress());return!!r&&"0x"!==r}async _legacySignMessage(t,e,r){const n=await this.getSender(lu(e)||this.defaultChainId),i="string"==typeof t?nr(t):t,s=await this.getAddress();return await n.send("eth_sign",[s,G(i)])}async _signTypedData(t,e,r,n,i){return this.signTypedData(t,e,r,n,i)}async sendUncheckedTransaction(t,e){t=Tt(t);const r=this.getAddress(),n=await this.getSender(lu(e)||this.defaultChainId);return Ct({tx:Ct(t),sender:await r}).then((({tx:e,sender:r})=>{if(null!=e.from){if(Te(e.from)!==r)throw new Error(`from address mismatch for transaction ${t}`)}else e.from=r;const i=np(e);return n.send("eth_sendTransaction",[i]).then((t=>t),(t=>{throw t}))}))}connectUnchecked(){throw new Error("connectUnchecked is unsupported")}async unlock(t){const e=await this.getAddress();return this.provider.send("personal_unlockAccount",[e,t,null])}}const rp={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,from:!0,auxiliary:!0,expiration:!0,afterNonce:!0,delegateCall:!0,revertOnError:!0},np=(t,e)=>{const r=Tt(rp);if(e)for(const t in e)e[t]&&(r[t]=!0);Pt(t,r);const n={};["gasLimit","gasPrice","nonce","value"].forEach((e=>{const r=t[e];if(null==r)return;const i=K(r);"gasLimit"===e&&(e="gas"),n[e]=i})),["from","to","data"].forEach((e=>{t[e]&&(n[e]=G(t[e]))})),["delegateCall","revertOnError"].forEach((e=>{const r=t[e];null!=r&&(n[e]=r)}));const i=t.auxiliary;return i&&i.length>0&&(n.auxiliary=[],i.forEach((t=>{n.auxiliary.push(np(t))}))),n},ip=nr("Ethereum Signed Message:\n"),sp=t=>L(t)||q(t)?U(t):nr(t),op=t=>{const e=sp(t);return D([ip,nr(String(e.length)),e])},ap=async(t,e,r,n,i,s)=>{var o;i||(i=null==(o=await n.getNetwork())?void 0:o.chainId);return!s&&Qf.isSequenceProvider(n)&&(s=await n.getSigner().getWalletContext()),_f(t,e,r,n,s,i)},lp=async(t,e,r,n,i,s)=>{const o=op(e),a=bc(o);return ap(t,a,r,n,i,s)},hp=(t,e,r,n,i,s)=>ap(t,Rc(e),r,n,i,s),cp=async(t,e,r,n,i)=>{const s=Ec(t,n,e),o=await(async(t,e,r,n,i,s)=>{const o=U(fe(t));return xf(o,e,r,n,i,s)})(s,r);if(i){const t=uc(o,i);if(o.address&&o.address!==t)throw new Error("recovered address does not match the WalletConfig address, check the WalletContext");o.address=t}return o},up=()=>"chrome-extension:"===window.location.protocol||"moz-extension:"===window.location.protocol,dp=()=>!!navigator.userAgent.match(/UnitySequence/i),fp=async(t,e)=>{var r;const n=await t.getWalletState(),i=await t.getNetworks(),s=n.find((t=>t.chainId===e));if(!s)throw new Error(`WalletRequestHandler: could not find wallet state for chainId ${e}`);const o=s.deployed;if(!i)throw new Error("isWalletUpToDate util: could not get networks from signer");const a=i.find((t=>t.isAuthChain));if(!a)throw new Error("isWalletUpToDate util: could not get auth chain network information");const l=a.chainId,h=null==(r=n.find((t=>t.chainId===l)))?void 0:r.config;if(!h)throw new Error("isWalletUpToDate util: could not get auth chain config");const c=s.config;if(!c)throw new Error(`isWalletUpToDate util: could not get config for chainId ${e}`);const u=pc(h,c);return o&&u};class pp{constructor(){}static getInstance(){return pp._instance||(pp._instance={getItem:t=>Promise.resolve(window.localStorage.getItem(t)),setItem:(t,e)=>Promise.resolve(window.localStorage.setItem(t,e)),removeItem:t=>Promise.resolve(window.localStorage.removeItem(t))}),this._instance}static use(t){pp._instance=t}}pp._instance=void 0;class gp{constructor(t,e){this.def=e,this.key=void 0,this.key=t}async get(){const t=await pp.getInstance().getItem(this.key);if(null===t)return this.def;try{return JSON.parse(t)}catch(t){console.error(t)}}set(t){t?pp.getInstance().setItem(this.key,JSON.stringify(t)):pp.getInstance().removeItem(this.key)}del(){pp.getInstance().removeItem(this.key)}}const mp="@sequence.transportSession";class yp{constructor(t){var e=this;this.walletRequestHandler=void 0,this._sessionId=void 0,this._registered=void 0,this._init=void 0,this._initNonce=void 0,this._initCallback=void 0,this.appOrigin=void 0,this.sendAsync=async function(t,e,r){throw new Error("abstract method")},this.handleMessage=async function(t){const r=t;if(e._init===Hf.OK)switch(r.type){case Wf.OPEN:{if(e._init!==Hf.OK)return;const t={sessionId:r.data.sessionId,intent:r.data.intent,networkId:r.data.networkId};return void await e.open(t)}case Wf.CLOSE:return e._init,void Hf.OK;case Wf.MESSAGE:{const t=await e.walletRequestHandler.sendMessageRequest(r);return e.sendMessage(t),void t.data.error}default:Cc.error(`unexpected payload type ${r.type}`)}else if(r.type===Wf.INIT){if(!e.isValidInitAck(t))return void(e._initCallback&&e._initCallback("invalid init"));e._initCallback&&e._initCallback()}},this.sendMessageRequest=async function(t){return e.walletRequestHandler.sendMessageRequest(t)},this.open=async function({sessionId:t,intent:r,networkId:n}){if(t&&(e._sessionId=Nc(t),e.saveTransportSession({sessionId:t,intent:r,networkId:n})),e.walletRequestHandler.setOpenIntent(r),await e.init(),r&&"connect"===r.type&&r.options){const t=r.options,i=t;if(e.appOrigin&&null!=i&&i.origin){if(!up()&&i.origin!==e.appOrigin)throw new Error("origin is invalid")}else!e.appOrigin&&null!=i&&i.origin?t.origin=Mc(i.origin):e.appOrigin&&(t.origin=e.appOrigin);t.app&&(t.app=Ic(t.app)),e.walletRequestHandler.setConnectOptions(t),t.networkId&&(n=t.networkId)}else e.walletRequestHandler.setConnectOptions(void 0);if(await e.walletRequestHandler.getSigner(),!await e.walletRequestHandler.isSignedIn())return e.notifyOpen({sessionId:e._sessionId}),!0;{let t;try{t=n?await e.walletRequestHandler.setDefaultNetwork(n,!1):await e.walletRequestHandler.getChainId()}catch(t){console.error(t)}if(!t||t<=0)return e.notifyOpen({sessionId:e._sessionId,error:`failed to open wallet on network ${n}`}),!1;if(r&&"connect"===r.type){e.notifyOpen({sessionId:e._sessionId});try{const t=await e.walletRequestHandler.promptConnect(r.options);t.connected&&e.walletRequestHandler.notifyConnect(t)}catch(t){Cc.warn("promptConnect not connected:",t)}finally{r.options&&!0===r.options.keepWalletOpened||e.notifyClose()}}else e.notifyOpen({sessionId:e._sessionId,chainId:`${t}`,session:await e.walletRequestHandler.walletSession()})}return!0},this.saveTransportSession=t=>{pp.getInstance().setItem(mp,JSON.stringify(t))},this.getCachedTransportSession=async function(){const t=await pp.getInstance().getItem(mp);try{return t?JSON.parse(t):null}catch(e){return console.error(`unable to parse transport session: ${t}`),null}},this.walletRequestHandler=t,this._init=Hf.NIL,this.walletRequestHandler.on("connect",(t=>{this.registered&&this.notifyConnect(t)})),this.walletRequestHandler.on("disconnect",(t=>{this.registered&&this.notifyDisconnect(t)})),this.walletRequestHandler.on("accountsChanged",((t,e)=>{this.registered&&this.notifyAccountsChanged(t,e)})),this.walletRequestHandler.on("networks",(t=>{this.registered&&(this.notifyNetworks(t),t&&0!==t.length?this.notifyChainChanged(G(t.find((t=>t.isDefaultChain)).chainId)):this.notifyChainChanged("0x0"))})),this.walletRequestHandler.on("walletContext",(t=>{this.registered&&t&&this.notifyWalletContext(t)})),this.walletRequestHandler.on("close",(t=>{this.registered&&this.notifyClose(t)}))}get registered(){return this._registered}register(){throw new Error("abstract method")}unregister(){throw new Error("abstract method")}sendMessage(t){throw new Error("abstract method")}notifyOpen(t){const{chainId:e,sessionId:r,session:n,error:i}=t;this.sendMessage({idx:-1,type:Wf.OPEN,data:{chainId:e,sessionId:r,session:n,error:i}})}notifyClose(t){this.sendMessage({idx:-1,type:Wf.CLOSE,data:t?{error:t}:null})}notifyConnect(t){this.sendMessage({idx:-1,type:Wf.CONNECT,data:t})}notifyDisconnect(t){this.sendMessage({idx:-1,type:Wf.DISCONNECT,data:t?{error:t}:null})}notifyAccountsChanged(t,e){this.sendMessage({idx:-1,type:Wf.ACCOUNTS_CHANGED,data:t,origin:e})}notifyChainChanged(t){this.sendMessage({idx:-1,type:Wf.CHAIN_CHANGED,data:t})}notifyNetworks(t){this.sendMessage({idx:-1,type:Wf.NETWORKS,data:t})}notifyWalletContext(t){this.sendMessage({idx:-1,type:Wf.WALLET_CONTEXT,data:t})}isValidInitAck(t){if(this._init===Hf.OK)return Cc.warn("isValidInitAck, already in init'd state, so inquiry is invalid."),!1;if(t.type!==Wf.INIT)return Cc.warn("isValidInitAck, invalid message type, expecting init"),!1;const{sessionId:e,nonce:r}=t.data;return e&&0!==e.length&&r&&0!==r.length?e===this._sessionId&&r===this._initNonce||(Cc.error("invalid init ack match"),!1):(Cc.error("invalid init ack"),!1)}init(){return new Promise(((t,e)=>{if(this._init===Hf.OK)return void t();if(this._init!==Hf.NIL||this._initCallback)return void e("transport init is in progress");const r=setTimeout((()=>{Cc.warn("transport init timed out"),this._initCallback&&this._initCallback("transport init timed out")}),15e3);this._initCallback=n=>{this._initCallback=void 0,clearTimeout(r),n?e(n):(this._init=Hf.OK,t())},this._initNonce=`${performance.now()}`,this.sendMessage({idx:-1,type:Wf.INIT,data:{nonce:this._initNonce}}),this._init=Hf.SENT_NONCE}))}}class wp{constructor(){this.conn=void 0,this.events=new jf.EventEmitter2,this.handleMessage=t=>{throw new Error("ProxyMessageChannelPort is not registered")},this.sendMessage=t=>{this.conn.handleMessage(t),"open"===t.type&&this.events.emit("open",t),"close"===t.type&&this.events.emit("close",t),"connect"===t.type&&this.events.emit("connect",t),"disconnect"===t.type&&this.events.emit("disconnect",t)}}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}}class vp extends Zf{constructor(t){if(super(),this.port=void 0,this.register=()=>{this.port.handleMessage=t=>{this.handleMessage(t)},this.on("open",((...t)=>{this.port.events.emit("open",...t)})),this.on("close",((...t)=>{this.port.events.emit("close",...t)})),this.on("connect",((...t)=>{this.port.events.emit("connect",...t)})),this.on("disconnect",((...t)=>{this.port.events.emit("disconnect",...t)})),this._registered=!0},this.unregister=()=>{this._registered=!1,this.closeWallet(),this.events.removeAllListeners(),this.port.handleMessage=void 0},this.openWallet=(t,e,r)=>{if(this.state===Gf.CLOSED){this.state=Gf.OPENING;const n=`${performance.now()}`;this._sessionId=n,this.sendMessage({idx:-1,type:Wf.OPEN,data:{path:t,intent:e,networkId:r,sessionId:n}})}},this.state=Gf.CLOSED,this.port=t,!t)throw new Error("port argument cannot be empty");this._init=Hf.OK}closeWallet(){this.sendMessage({idx:-1,type:Wf.CLOSE,data:null}),this.close()}sendMessage(t){if(!t.idx)throw new Error("message idx is empty");this.port.sendMessage(t)}}class bp{constructor(...t){var e=this;this.messageProviders=void 0,this.provider=void 0,this.register=()=>{if(1===this.messageProviders.length)return this.provider=this.messageProviders[0],void this.provider.register();this.messageProviders.forEach((t=>{t.register(),t.once("open",(()=>{this.provider||(this.provider=t,this.messageProviders.forEach((t=>{this.provider!==t&&t.unregister()})))}))}))},this.unregister=()=>{this.messageProviders.forEach((t=>t.unregister())),this.provider=void 0},this.openWallet=(t,e,r)=>{this.provider?this.provider.openWallet(t,e,r):this.messageProviders.forEach((n=>n.openWallet(t,e,r)))},this.sendAsync=async function(t,r,n){if(!e.provider)throw new Error("impossible state, wallet must be opened first");e.provider.sendAsync(t,r,n)},this.sendMessageRequest=async function(t){if(e.provider)return e.provider.sendMessageRequest(t);throw new Error("impossible state, wallet must be opened first")},this.waitUntilOpened=async function(){return e.provider?e.provider.waitUntilOpened():Promise.race(e.messageProviders.map((t=>t.waitUntilOpened())))},this.waitUntilConnected=async function(){if(e.provider)return e.provider.waitUntilConnected();throw new Error("impossible state, wallet must be opened first")},this.messageProviders=t,this.provider=void 0}add(...t){this.messageProviders.push(...t)}closeWallet(){this.provider&&this.provider.closeWallet()}isOpened(){return!!this.provider&&this.provider.isOpened()}isConnected(){return!!this.provider&&this.provider.isConnected()}on(t,e){this.provider?this.provider.on(t,e):this.messageProviders.forEach((r=>{r.on(t,e)}))}once(t,e){this.provider?this.provider.once(t,e):this.messageProviders.forEach((r=>{r.once(t,e)}))}emit(t,...e){if(this.provider)return this.provider.emit(t,...e);for(let r=0;r<this.messageProviders.length;r++)this.messageProviders[r].emit(t,...e);return!0}sendMessage(t){if(!t.idx||t.idx<=0)throw new Error("message idx is empty");if(!this.provider)throw new Error("impossible state, wallet must be opened first");this.provider.sendMessage(t)}handleMessage(t){if(!this.provider)throw new Error("impossible state, wallet must be opened first");this.provider.handleMessage(t)}}let Ep;class _p extends Zf{constructor(t){super(),this.walletURL=void 0,this.walletWindow=void 0,this.register=()=>{Ep&&(Ep.unregister(),Ep=this),window.addEventListener("message",this.onWindowEvent),Ep=this,this.on("open",(()=>{const t=this.walletWindow,e=setInterval((()=>{t&&t.closed&&(clearInterval(e),this.close())}),500)})),this.on("close",(()=>{this.walletWindow&&(this.walletWindow.close(),this.walletWindow=null)})),this._registered=!0},this.unregister=()=>{this._registered=!1,this.closeWallet(),Ep===this&&(Ep=void 0),window.removeEventListener("message",this.onWindowEvent),this.events.removeAllListeners()},this.openWallet=(t,e,r)=>{if(this.walletWindow&&this.isOpened())return void this.walletWindow.focus();const n=new URL(this.walletURL.href),i=new qf;let s,o;t&&""!==t&&(n.pathname=t.toLowerCase()),this._init=Hf.NIL,this._sessionId=`${performance.now()}`,i.set("sid",this._sessionId),e&&("connect"===e.type&&(e.options||(e.options={}),up()||dp()||(e.options.origin=window.location.origin)),i.set("intent",wc(e))),r&&i.set("net",`${r}`),up()?(s=[450,750],o=[Math.abs(window.screen.width/2-s[0]/2),Math.abs(window.screen.height/2-s[1]/2)]):(s=[450,750],o=[Math.abs(window.screenX+window.innerWidth/2-s[0]/2),Math.abs(window.screenY+window.innerHeight/2-s[1]/2)]);const a=`toolbar=0,location=0,menubar=0,scrollbars=yes,status=yes,width=${s[0]},height=${s[1]},left=${o[0]},top=${o[1]}`;n.search=i.toString(),this.walletWindow=window.open(n.href,"sequence.app",a)},this.onWindowEvent=t=>{if(t.origin!==this.walletURL.origin)return;let e;try{e=JSON.parse(t.data)}catch(t){return}if(!e)throw new Error("ProviderMessage object is empty");this.handleMessage(e)},this.walletURL=new URL(t)}closeWallet(){var t;this.close(),null==(t=this.walletWindow)||t.close()}sendMessage(t){if(!this.walletWindow)return void Cc.warn("WindowMessageProvider: sendMessage failed as walletWindow is unavailable");const e="string"!=typeof t?JSON.stringify(t):t;this.walletWindow.postMessage(e,this.walletURL.origin)}}const Ap="sequence-extension-message-handler";class Sp extends Zf{constructor(t){super(),this.register=()=>{this._registered=!0},t.onConnect.addListener((t=>{t.name===Ap&&(this._init=Hf.OK,t.onMessage.addListener((t=>{this.handleMessage(t)})))}))}sendMessage(t){}unregister(){}openWallet(t,e,r){}closeWallet(){}}class xp extends jf.EventEmitter2{constructor(t){var e;super(),e=this,this.stream=t,this.responseCallbacks=new Map,this._messageIdx=0,this.nextMessageIdx=()=>++this._messageIdx,this.handleMessage=t=>{if(!t.type||!t.data)return;Cc.info("[received message]",t);const e=t.idx,r=this.responseCallbacks.get(e);switch(e&&this.responseCallbacks.delete(e),t.type){case Wf.MESSAGE:if(!r)throw new Error("impossible state");this.emit(Wf.MESSAGE,t),r(t.data.error,t);break;case Wf.DISCONNECT:case Wf.ACCOUNTS_CHANGED:case Wf.CHAIN_CHANGED:this.emit(t.type,t.data);break;default:console.error("unknown message type",t)}},this.sendMessageRequest=async function(t){return new Promise(((r,n)=>{(!t.idx||t.idx<=0)&&n(new Error("message idx not set"));const i=(t,e)=>{if(t)n(t);else{if(!e)throw new Error("no valid response to return");r(e)}},{idx:s}=t;e.responseCallbacks.get(s)?n(new Error("duplicate message idx, should never happen")):e.responseCallbacks.set(s,i),e.sendMessage(t)}))},this.stream.on("data",this.handleMessage)}sendMessage(t){this.stream.writable||console.error("window post message stream is not writable"),this.stream.write(t)}}function kp(t){var e;if(null!=(e=window.ue)&&e.sequencewallettransport&&!window.logsOverriddenForUnreal){var r;const e=null==(r=window.ue)?void 0:r.sequencewallettransport;console.log=(...r)=>{e.logfromjs(`${t}: ${Cp(r)}`)},console.warn=(...r)=>{e.warnfromjs(`${t}: ${Cp(r)}`)},console.error=(...r)=>{e.errorfromjs(`${t}: ${Cp(r)}`)},window.logsOverriddenForUnreal=!0}}function Cp(t){return t.map((t=>"object"==typeof t?t instanceof Error?t.message:JSON.stringify(t):String(t))).join(" ")}let Pp;class Tp extends Zf{constructor(t){super(),this.walletURL=void 0,this.register=()=>{var t;kp("dapp"),Pp&&(Pp.unregister(),Pp=this),null!=(t=window.ue)&&t.sequencewallettransport&&(window.ue.sequencewallettransport.onmessagefromwallet=this.onUnrealCallback),Pp=this,this._registered=!0,console.log("registering transport!")},this.unregister=()=>{var t,e;this._registered=!1,this.closeWallet(),Pp===this&&(Pp=void 0),(null==(t=window.ue)||null==(e=t.sequencewallettransport)?void 0:e.onmessagefromwallet)===this.onUnrealCallback&&delete window.ue.sequencewallettransport.onmessagefromwallet,this.events.removeAllListeners()},this.openWallet=(t,e,r)=>{if(this.isOpened())return void console.log("wallet already open!");console.log("opening wallet!");const n=new URL(this.walletURL.href),i=new qf;t&&(n.pathname=t.toLowerCase()),this._init=Hf.NIL,this._sessionId=`${performance.now()}`,i.set("sid",this._sessionId),e&&i.set("intent",wc(e)),r&&i.set("net",`${r}`),n.search=i.toString(),console.log("opening wallet to",n.href),window.open(n.href)},this.onUnrealCallback=t=>{if(!t)throw new Error("ProviderMessage object is empty");this.handleMessage(t)},this.walletURL=new URL(t)}closeWallet(){this.close()}sendMessage(t){var e,r;const n="string"!=typeof t?JSON.stringify(t):t;console.log("Sending message to wallet:",n),null==(e=window.ue)||null==(r=e.sequencewallettransport)||r.sendmessagetowallet(n)}}class Np{constructor(t){var e=this;this.wallet=void 0,this.recoverWalletConfig=async function(t,r,n,i,s){return s=s||await e.wallet.getWalletContext(),cp(t,r,n,i,s)},this.recoverWalletConfigFromMessage=async function(t,r,n,i,s){return s=s||await e.wallet.getWalletContext(),cp(t,bc(op(r)),n,i,s)},this.recoverWalletConfigFromTypedData=async function(t,r,n,i,s){return s=s||await e.wallet.getWalletContext(),cp(t,Rc(r),n,i,s)},this.wallet=t}signMessage(t,e,r){const n=this.wallet.getSigner();if(!n)throw new Error("unable to get signer");return n.signMessage(t,e,r)}async signAuthMessage(t,e){const r=await this.wallet.getAuthSigner();if(!r)throw new Error("unable to get AuthChain signer");return r.signMessage(t,await r.getChainId(),e)}signTypedData(t,e,r,n,i){const s=this.wallet.getSigner();if(!s)throw new Error("unable to get signer");return s.signTypedData(t,e,r,n,i)}async signAuthTypedData(t,e,r,n){const i=await this.wallet.getAuthSigner();if(!i)throw new Error("unable to get AuthChain signer");return i.signTypedData(t,e,r,await i.getChainId(),n)}async isValidSignature(t,e,r,n,i){const s=this.wallet.getProvider(n);if(!s)throw new Error(`unable to get provider for chainId ${n}`);return ap(t,e,r,s,n,i)}async isValidMessageSignature(t,e,r,n,i){const s=this.wallet.getProvider(n);if(!s)throw new Error(`unable to get provider for chainId ${n}`);const o=op(e),a=bc(o);return ap(t,a,r,s,n,i)}isValidTypedDataSignature(t,e,r,n,i){return this.isValidSignature(t,Rc(e),r,n,i)}}class Ip{constructor(t,e){var r=this;this.utils=void 0,this.config=void 0,this.session=void 0,this.connectedSites=void 0,this.transport=void 0,this.networks=void 0,this.providers=void 0,this.init=()=>{var t,e,r,n,i,s,o,a;this.transport.provider||(this.transport.messageProvider=new bp,null!=(t=this.config.transports)&&null!=(e=t.windowTransport)&&e.enabled&&(this.transport.windowMessageProvider=new _p(this.config.walletAppURL),this.transport.messageProvider.add(this.transport.windowMessageProvider)),null!=(r=this.config.transports)&&null!=(n=r.proxyTransport)&&n.enabled&&(this.transport.proxyMessageProvider=new vp(this.config.transports.proxyTransport.appPort),this.transport.messageProvider.add(this.transport.proxyMessageProvider)),null!=(i=this.config.transports)&&null!=(s=i.extensionTransport)&&s.enabled&&(this.transport.extensionMessageProvider=new Sp(this.config.transports.extensionTransport.runtime),this.transport.messageProvider.add(this.transport.extensionMessageProvider)),null!=(o=this.config.transports)&&null!=(a=o.unrealTransport)&&a.enabled&&(this.transport.unrealMessageProvider=new Tp(this.config.walletAppURL),this.transport.messageProvider.add(this.transport.unrealMessageProvider)),this.transport.messageProvider.register(),this.transport.allowProvider=Mu((t=>{if("sequence_setDefaultNetwork"===t.method)return!0;const e=this.isConnected();if(!e)throw new Error("Sequence: wallet not connected");return e})),this.transport.networkProvider=Uu((t=>this.networks&&0!==this.networks.length?this.networks.find((t=>t.isDefaultChain)).chainId:0)),this.transport.cachedProvider=new Ou,this.transport.cachedProvider.onUpdate((()=>{this.session||(this.session={providerCache:{}}),this.session.providerCache=this.transport.cachedProvider.getCache(),this.saveSession(this.session)})),this.transport.router=new ku([Lu,this.transport.networkProvider,this.transport.allowProvider,Bu,this.transport.cachedProvider],this.transport.messageProvider),this.transport.provider=new Qf(this.transport.router),this.transport.messageProvider.on("open",(t=>{const{session:e}=t;e?this.useSession(e,!0):(this.session&&this.session.accountAddress&&this.transport.messageProvider.emit("disconnect"),this.clearSession())})),this.transport.messageProvider.on("accountsChanged",((t,e)=>{e?t.length>0&&this.useSession({accountAddress:t[0]},!0):t&&0!==t.length&&""!==t[0]?this.useSession({accountAddress:t[0]},!0):this.clearSession()})),this.transport.messageProvider.on("networks",(t=>{this.useSession({networks:t},!0)})),this.transport.messageProvider.on("walletContext",(t=>{this.useSession({walletContext:t},!0)})))},this.loadSession=async function(){const t=await pp.getInstance().getItem("@sequence.session");if(t&&""!==t)try{const e=JSON.parse(t);return e&&r.useSession(e,!1),e}catch(t){return void Cc.warn("loadSession failed, unable to parse session payload from storage.")}},this.connect=async function(t){if(!0===(null==t?void 0:t.refresh)&&r.disconnect(),r.isConnected()&&await r.isSiteConnected(null==t?void 0:t.origin)&&r.session&&(null==t||!t.authorize)&&(null==t||!t.askForEmail))return{connected:!0,session:r.session,chainId:G(await r.getChainId())};if(t&&t.authorize&&(!t.app||""===t.app))throw new Error("connecting with 'authorize' option also requires 'app' to be set");await r.openWallet(void 0,{type:"connect",options:t});const e=await r.transport.messageProvider.waitUntilConnected().catch((t=>({connected:!1})));if(e.connected){if(!e.session)throw new Error("impossible state, connect response is missing session");r.useSession(e.session,!0),r.addConnectedSite(null==t?void 0:t.origin)}return e},this.authorize=async function(t){return r.connect(n({},t,{authorize:!0}))},this.getSession=()=>{if(this.isConnected())return this.session},this.getAddress=async function(){if(!r.isConnected())throw new Error("connect first");return r.getSession().accountAddress},this.getNetworks=async function(t){if(!r.isConnected()||!r.networks)throw new Error("connect first");if(t){const e=pu(r.networks,t);return e?[e]:[]}return r.networks},this.getChainId=async function(){if(!r.networks||r.networks.length<1)throw new Error("networks have not been set by session. connect first.");const t=r.networks.find((t=>t.isDefaultChain));if(!t)throw new Error("networks must have a default chain specified");return t.chainId},this.getAuthChainId=async function(){if(!r.networks||r.networks.length<1)throw new Error("networks have not been set by session. connect first.");const t=r.networks.find((t=>t.isAuthChain));if(!t)throw new Error("networks must have an auth chain specified");return t.chainId},this.openWallet=async function(t,e,n){if("connect"!==(null==e?void 0:e.type)&&!r.isConnected())throw new Error("connect first");let i;return i=!r.networks||r.networks.length<1?r.config.defaultNetworkId:await r.getChainId(),r.transport.messageProvider.openWallet(t,e,n||i),await r.transport.messageProvider.waitUntilOpened(),!0},this.closeWallet=()=>{this.transport.messageProvider.closeWallet()},this.saveSession=async function(t){Cc.debug("wallet provider: saving session");const e=JSON.stringify(t);await pp.getInstance().setItem("@sequence.session",e)},this.useSession=async function(t,e=!0){r.session||(r.session={}),r.config.walletContext?r.session.walletContext=r.config.walletContext:t.walletContext&&(r.session.walletContext=t.walletContext),t.accountAddress&&r.useAccountAddress(t.accountAddress),t.networks&&r.useNetworks(t.networks),t.providerCache&&r.transport.cachedProvider.setCache(t.providerCache),e&&r.saveSession(r.session)},this.config=n({},Mp),e&&(this.config=n({},this.config,e)),t?this.config.defaultNetworkId=t:this.config.defaultNetworkId||(this.config.defaultNetworkId="mainnet"),null!=e&&e.localStorage&&pp.use(e.localStorage),this.transport={},this.networks=[],this.providers={},this.connectedSites=new gp("@sequence.connectedSites",[]),this.utils=new Np(this),this.init()}async addConnectedSite(t){t=t||window.location.origin;const e=await this.connectedSites.get();if(e){if(e.includes(t))return;this.connectedSites.set([...e,t])}else this.connectedSites.set([t])}async removeConnectedSite(t){const e=await this.connectedSites.get();e&&this.connectedSites.set(e.filter((e=>e!==t)))}getConnectedSites(){return this.connectedSites.get()}async isSiteConnected(t){const e=await this.connectedSites.get();return!!e&&e.includes(t||window.location.origin)}disconnect(){this.isOpened()&&this.closeWallet(),this.clearSession()}getProviderConfig(){return this.config}isOpened(){return this.transport.messageProvider.isOpened()}isConnected(){return void 0!==this.session&&void 0!==this.session.networks&&this.session.networks.length>0&&void 0!==this.networks&&this.networks.length>0&&!!this.session.accountAddress&&this.session.accountAddress.startsWith("0x")}getProvider(t){if(!this.isConnected()){if(t)throw new Error("session is empty. connect and try again.");return this.transport.provider}let e,r=this.networks.find((t=>t.isDefaultChain));if(t&&(r=pu(this.networks,t),!r))throw new Error(`network ${t} is not in the network list`);if(this.providers[r.chainId])return this.providers[r.chainId];const n=r.provider?r.provider:new Xl(r.rpcUrl,r.chainId);if(r.isDefaultChain){const t=new ku([Lu,Bu,new Ru({accountAddress:this.session.accountAddress,walletContext:this.session.walletContext}),new Fu(this.transport.provider),this.transport.cachedProvider],new Iu(n));e=new Qf(t,r.chainId)}else{const t=new ku([Lu,Bu,new Ru({accountAddress:this.session.accountAddress,walletContext:this.session.walletContext,chainId:r.chainId}),new Fu(this.transport.provider),new Ou(r.chainId)],new Iu(n));e=new Qf(t,r.chainId)}return this.providers[r.chainId]=e,e}async getAuthProvider(){return this.getProvider((await this.getAuthNetwork()).chainId)}async getAuthNetwork(){return(await this.getNetworks()).find((t=>t.isAuthChain))}getAllProviders(){return this.providers}getSigner(t){return this.getProvider(t).getSigner()}async getAuthSigner(){return(await this.getAuthProvider()).getSigner()}getWalletConfig(t){return this.getSigner().getWalletConfig(t)}getWalletState(t){return this.getSigner().getWalletState(t)}getWalletContext(){return this.getSigner().getWalletContext()}isDeployed(t){return this.getSigner(t).isDeployed()}on(t,e){this.transport.messageProvider.on(t,e)}once(t,e){this.transport.messageProvider.once(t,e)}useAccountAddress(t){this.session||(this.session={}),this.session.accountAddress=Te(t)}useNetworks(t){if(this.session||(this.session={}),this.session.networks=t,this.session.networks&&0!==this.session.networks.length)if(this.config.networks||this.config.networkRpcUrl){if(this.networks=t,this.config.networks&&(this.networks=t.map((t=>n({},t))),this.config.networks.forEach((t=>{const e=pu(this.networks,t.chainId||t.name);e&&du(t,e)})),uu(this.networks,!0)),this.config.networkRpcUrl){const t=this.networks.find((t=>t.isDefaultChain));t&&(t.rpcUrl=this.config.networkRpcUrl)}}else this.networks=t}clearSession(){var t;Cc.debug("wallet provider: clearing session"),pp.getInstance().removeItem("@sequence.session"),this.session=void 0,this.networks=[],this.providers={},null==(t=this.transport.cachedProvider)||t.clearCache()}}const Mp={walletAppURL:"https://sequence.app",transports:{windowTransport:{enabled:!0},proxyTransport:{enabled:!1}}};let Op;const Rp=async(t,e)=>(Op&&Op.isOpened()&&Op.closeWallet(),Op=new Ip(t,e),await Op.loadSession(),Op),Bp=()=>{if(!Op)throw new Error("Wallet has not been initialized, call sequence.initWallet(network, config) first.");return Op};var Lp=Object.freeze({__proto__:null,PROVIDER_OPEN_TIMEOUT:Kf,nextMessageIdx:Jf,BaseProviderTransport:Zf,BaseWalletTransport:yp,ProxyMessageChannel:class{constructor(){this.app=void 0,this.wallet=void 0;const t=new wp,e=new wp;t.conn=e,e.conn=t,this.app=t,this.wallet=e}},ProxyMessageChannelPort:wp,ProxyMessageProvider:vp,ProxyMessageHandler:class extends yp{constructor(t,e){super(t),this.port=void 0,this.port=e,this._init=Hf.OK}register(){this.port.handleMessage=t=>{this.handleMessage(t)},this._registered=!0}async restoreSession(){const t=await this.getCachedTransportSession();t&&this.open(t)}unregister(){this.port.handleMessage=void 0,this._registered=!1}sendMessage(t){this.port.sendMessage(t)}},MuxMessageProvider:bp,WindowMessageProvider:_p,WindowMessageHandler:class extends yp{constructor(t){var e;super(t),e=this,this.parentWindow=void 0,this._isPopup=!1,this.onWindowEvent=async function(t){if(!t.origin||""===t.origin)return;if(e.appOrigin&&t.origin!==e.appOrigin)return;let r;try{r=JSON.parse(t.data)}catch(t){return}Cc.debug("RECEIVED MESSAGE",r),e._init!==Hf.OK&&e.isValidInitAck(r)&&(e.appOrigin=t.origin),e._init!==Hf.OK||e.appOrigin&&!(e.appOrigin.length<8)?e.handleMessage(r):Cc.error("impossible state, init.OK and appOrigin required")},this.getWindowTransportSession=t=>{const e=new qf(t);return{sessionId:e.get("sid"),networkId:e.get("net"),intent:vc(e.get("intent"))}},this._init=Hf.NIL}async register(t){const e=null!==parent.window.opener;if(this._isPopup=e,!0!==e)return;const{pathname:r,search:n}=new URL(t||window.location.href);let i=this.getWindowTransportSession(n);!!i.sessionId||(i=await this.getCachedTransportSession()),i?(this.parentWindow=parent.window.opener,window.addEventListener("message",this.onWindowEvent,!1),this._registered=!0,this.open(i).then((t=>{if(!t){var e;const t=`failed to open to network ${null==(e=i)?void 0:e.networkId}`;Cc.error(t),this.notifyClose({message:t}),window.close()}})).catch((t=>{var e;const r=`failed to open to network ${null==(e=i)?void 0:e.networkId}, due to: ${t}`;Cc.error(r),this.notifyClose({message:r}),window.close()}))):Cc.error("window session is undefined")}unregister(){window.removeEventListener("message",this.onWindowEvent),this._registered=!1}sendMessage(t){const e=JSON.stringify(t);t.type===Wf.INIT?this.postMessage(e,!0):this.postMessage(e)}get isPopup(){return this._isPopup}postMessage(t,e=!1){!0===e||this._init===Hf.OK?e?this.parentWindow.postMessage(t,"*"):this.appOrigin&&this.appOrigin.length>4?this.parentWindow.postMessage(t,this.appOrigin):Cc.error("unable to postMessage as parentOrigin is invalid"):Cc.error("impossible state, should not be calling postMessage until inited")}},WalletRequestHandler:Xf,CHANNEL_ID:Ap,ExtensionMessageHandler:class extends yp{constructor(t,e){super(t),this.runtime=e,this.port=void 0,this._init=Hf.OK}register(){this._registered=!0,this.port=this.runtime.connect({name:Ap})}sendMessage(t){Cc.info("[ExtensionMessageHandler send]",t),this.port.postMessage(t)}},ExtensionMessageProvider:Sp,BaseInjectedTransport:xp,UnrealMessageProvider:Tp,UnrealMessageHandler:class extends yp{constructor(t){super(t),this.onMessageFromUnreal=t=>{Cc.debug("RECEIVED MESSAGE",t),this.handleMessage(t)},this.getUnrealTransportSession=t=>{const e=new qf(t);return{sessionId:e.get("sid"),networkId:e.get("net"),intent:vc(e.get("intent"))}},this._init=Hf.NIL}async register(t){var e;if(void 0===(null==(e=window.ue)?void 0:e.sequencewallettransport))return;kp("wallet");const{search:r}=new URL(t||window.location.href);let n=this.getUnrealTransportSession(r);!!n.sessionId||(n=await this.getCachedTransportSession()),n?(window.ue.sequencewallettransport.onmessagefromsequencejs=this.onMessageFromUnreal,this._registered=!0,this.open(n).then((t=>{if(!t){var e;const t=`failed to open to network ${null==(e=n)?void 0:e.networkId}`;Cc.error(t),this.notifyClose({message:t}),window.close()}})).catch((t=>{var e;const r=`failed to open to network ${null==(e=n)?void 0:e.networkId}, due to: ${t}`;Cc.error(r),this.notifyClose({message:r}),window.close()}))):Cc.error("unreal session is undefined")}unregister(){var t,e;(null==(t=window.ue)||null==(e=t.sequencewallettransport)?void 0:e.onmessagefromsequencejs)===this.onMessageFromUnreal&&delete window.ue.sequencewallettransport.onmessagefromsequencejs,this._registered=!1}sendMessage(t){var e,r;if(t.type!==Wf.INIT&&this._init!==Hf.OK)return void Cc.error("impossible state, should not be calling postMessage until inited");const n=JSON.stringify(t);null==(e=window.ue)||null==(r=e.sequencewallettransport)||r.sendmessagetosequencejs(n)}},WindowSessionParams:qf,get EventType(){return Wf},get OpenState(){return Gf},get InitState(){return Hf},ProviderError:zf,ErrSignedInRequired:Vf,Wallet:Ip,DefaultProviderConfig:Mp,initWallet:Rp,getWallet:Bp,Web3Provider:Qf,isSequenceProvider:tp,LocalWeb3Provider:class extends Qf{constructor(t,e){super(new Xf(t,null,e||[]))}},Web3Signer:ep,messageToBytes:sp,prefixEIP191Message:op,isValidSignature:ap,isValidMessageSignature:lp,isValidTypedDataSignature:hp,recoverWalletConfig:cp,isBrowserExtension:up,isUnityPlugin:dp,isWalletUpToDate:fp,LocalStorage:pp,LocalStore:gp}),Up=Object.freeze({__proto__:null,RpcRelayerProto:pf,isLocalRelayerOptions:function(t){return void 0!==t.signer&&mn.isSigner(t.signer)},LocalRelayer:class extends of{constructor(t){if(super(mn.isSigner(t)?{provider:t.provider}:n({},t,{provider:t.signer.provider})),this.signer=void 0,this.txnOptions=void 0,this.signer=mn.isSigner(t)?t:t.signer,!this.signer.provider)throw new Error("Signer must have a provider")}async deployWallet(t,e){const r=this.prepareWalletDeploy(t,e);return this.signer.sendTransaction(n({},r,{gasLimit:Ke.pow(17)}))}async getFeeOptions(t,e,...r){return{options:[]}}async gasRefundOptions(t,e,...r){const{options:n}=await this.getFeeOptions(t,e,...r);return n}setTransactionOptions(t){this.txnOptions=t}async relay(t,r,i=!0){if(void 0!==r&&Cc.warn("LocalRelayer doesn't accept fee quotes"),!t.context.guestModule||42!==t.context.guestModule.length)throw new Error("LocalRelayer requires the context.guestModule address");const{to:s,execute:o}=await this.prependWalletDeploy(t),a=new on(e.mainModule.abi),l=a.encodeFunctionData(a.getFunction("execute"),[jd(o.transactions),o.nonce,o.signature]),h=this.signer.sendTransaction(n({to:s,data:l},this.txnOptions));if(i){const t=await h;return t.receipt=await t.wait(),t}return h}},isBaseRelayerOptions:function(t){return void 0!==t.bundleCreation&&"boolean"==typeof t.bundleCreation||void 0!==t.creationGasLimit&&nu(t.creationGasLimit)||void 0!==t.provider&&(un.isProvider(t.provider)||"string"==typeof t.provider)},BaseRelayerDefaults:ef,BaseRelayer:rf,ProviderRelayerDefaults:sf,isProviderRelayerOptions:function(t){return void 0!==t.provider&&un.isProvider(t.provider)},ProviderRelayer:of,proto:pf,isRpcRelayerOptions:yf,RpcRelayer:wf,isRelayer:bf}),Dp=Object.freeze({__proto__:null,MetaTransactionsType:Td,packMetaTransactionsData:function(...t){const e=Fd(...t);if(void 0===e)throw new Error("Encoding transactions without defined nonce");return Nd(e,...t)},packMetaTransactionsNonceData:Nd,digestOfTransactions:Id,digestOfTransactionsNonce:Md,computeMetaTxnHash:Od,toSequenceTransactions:Rd,flattenAuxTransactions:Bd,toSequenceTransaction:Ld,isAsyncSendable:function(t){return t.send||t.sendAsync},isSequenceTransaction:Ud,hasSequenceTransactions:Dd,readSequenceNonce:Fd,sequenceTxAbiEncode:jd,appendNonce:qd,makeExpirable:Wd,makeAfterNonce:Gd,encodeNonce:Hd,decodeNonce:zd,isSignedTransactions:Vd,fromTransactionish:Kd}),Fp=Object.freeze({__proto__:null,isValidSignature:ap,isValidMessageSignature:lp,isValidTypedDataSignature:hp,recoverWalletConfig:cp,isWalletUpToDate:fp,base64Encode:t=>Hh(t,!0),base64EncodeObject:wc,base64Decode:t=>{if(null!=t)return zh(t)},base64DecodeObject:vc,encodeMessageDigest:bc,packMessageData:Ec,subDigestOf:_c,isNode:Ac,isBrowser:()=>!0,jwtDecodeClaims:Sc,Logger:kc,logger:Cc,configureLogger:t=>Cc.configure(t),promisify:Pc,getRandomInt:Tc,queryStringFromObject:function(t,e){return`${encodeURIComponent(t)}=${encodeURIComponent(JSON.stringify(e))}`},queryStringToObject:function(t){const e=t.split("&"),r={};for(const t of e){const e=t.split("=");r[decodeURIComponent(e[0])]=JSON.parse(decodeURIComponent(e[1]))}return r},sanitizeNumberString:Nc,sanitizeAlphanumeric:Ic,sanitizeHost:Mc,sleep:t=>new Promise((e=>{const r=setTimeout((()=>{clearTimeout(r),e()}),t)})),encodeTypedDataHash:Oc,encodeTypedDataDigest:Rc,defineReadOnly:xt,getStatic:kt,resolveProperties:Ct,checkProperties:Pt,shallowCopy:Tt,deepCopy:Ot,urlClean:t=>t.replace(/([^:]\/)\/+/g,"$1"),isBigNumberish:nu}),jp=Object.freeze({__proto__:null,abi:r,api:y,auth:Of,config:Rf,guard:Bf,indexer:Lf,metadata:Uf,multicall:Df,network:Ff,provider:Lp,relayer:Up,transactions:Dp,utils:Fp,initWallet:Rp,getWallet:Bp,Wallet:Ip});t.Wallet=Ip,t.getWallet=Bp,t.initWallet=Rp,t.sequence=jp,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=0xsequence.umd.min.js.map
